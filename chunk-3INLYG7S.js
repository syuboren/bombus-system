import{a as Z}from"./chunk-JGMLKVO3.js";import{f as H,h as Q}from"./chunk-Z4TLKUSB.js";import{a as O}from"./chunk-WBP244A2.js";import{a as N,b as W,e as J,g as q,h as K,i as G,j as U,k as X}from"./chunk-POFP4LN5.js";import{h as $,j as L}from"./chunk-PT7OKD4P.js";import{a as Y}from"./chunk-MY43ZI55.js";import"./chunk-6KPOWU4K.js";import{$a as y,Da as b,Ia as E,Ka as C,La as w,Ma as _,Pa as h,Qa as I,S as k,Sa as v,Ta as P,U as B,Ua as t,Va as e,Wa as s,Xa as T,Ya as x,Za as p,ab as M,ba as u,bb as S,ca as g,cb as i,db as d,eb as m,fb as z,ib as R,rb as V,vb as A,xa as a}from"./chunk-Y462IJR5.js";import{a as j,b as F}from"./chunk-JKOY2XUY.js";var te=["miniProfitChart"],ne=["timeTunnelChart"],ie=["waterfallChart"],ae=["costPieChart"],re=["profitTrendChart"],D=(l,r)=>r.id;function oe(l,r){l&1&&(t(0,"div",6),s(1,"i",7),t(2,"span"),i(3,"\u8F09\u5165\u4E2D..."),e()())}function le(l,r){if(l&1&&(t(0,"li"),s(1,"i",46),i(2),e()),l&2){let n=r.$implicit;a(2),m(" ",n,"")}}function ce(l,r){if(l&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td")(6,"span",15),i(7),e()(),t(8,"td")(9,"div",47)(10,"div",48),s(11,"div",49),e(),t(12,"span"),i(13),e()()()()),l&2){let n=r.$implicit,o=p(4);a(2),d(n.objective),a(2),d(n.keyResult),a(2),C("ngClass",o.getWeightClass(n.weight)),a(),d(o.getWeightLabel(n.weight)),a(4),w("width",n.progress,"%"),a(2),m("",n.progress,"%")}}function de(l,r){if(l&1&&(t(0,"tr")(1,"td")(2,"div",50)(3,"div",51),i(4),e(),i(5),e()(),t(6,"td"),i(7),e(),t(8,"td"),i(9),e(),t(10,"td"),i(11),e(),t(12,"td")(13,"div",52)(14,"span",53),i(15),e(),t(16,"div",48),s(17,"div",49),e()()()()),l&2){let n=r.$implicit;a(3),w("background",n.member.color),a(),d(n.member.initials),a(),m(" ",n.member.name," "),a(2),d(n.role),a(2),d(n.keyResult),a(),_("text-danger",n.taskCompletion<100),a(),m("",n.taskCompletion,"%"),a(4),d(n.score),a(2),w("width",n.score*10,"%")}}function se(l,r){l&1&&s(0,"i",56)}function pe(l,r){l&1&&s(0,"i",57)}function me(l,r){if(l&1&&(t(0,"div",54)(1,"div",55),E(2,se,1,0,"i",56)(3,pe,1,0,"i",57),e(),t(4,"div",58)(5,"div",59),i(6),e(),t(7,"div",60),i(8),e()()()),l&2){let n=r.$implicit;_("alert-card--warning",n.type==="warning"),a(2),h(n.type==="error"?2:3),a(4),d(n.title),a(2),d(n.description)}}function ue(l,r){if(l&1&&(t(0,"div",33)(1,"div",36)(2,"div",37)(3,"h3"),i(4,"\u5C08\u6848\u76EE\u6A19\u8207\u7BC4\u7587 (Scope)"),e(),t(5,"p",38),i(6),e(),t(7,"h4"),i(8,"\u9A57\u6536\u689D\u4EF6"),e(),t(9,"ul",39),v(10,le,3,1,"li",null,I),e()(),t(12,"div",37)(13,"h3"),i(14,"OKR \u8CA2\u737B\u5EA6\u5831\u8868"),e(),t(15,"table",40)(16,"thead")(17,"tr")(18,"th"),i(19,"\u76EE\u6A19 (Objective)"),e(),t(20,"th"),i(21,"\u95DC\u9375\u7D50\u679C (Key Result)"),e(),t(22,"th"),i(23,"\u5C08\u6848\u8CA2\u737B\u6B0A\u91CD"),e(),t(24,"th"),i(25,"\u7576\u524D\u9054\u6210\u7387"),e()()(),t(26,"tbody"),v(27,ce,14,7,"tr",null,D),e()()(),t(29,"div",37)(30,"h3"),i(31,"\u5718\u968A\u6210\u54E1\u8CA2\u737B\u5EA6\u660E\u7D30 (Individual Contribution)"),e(),t(32,"table",40)(33,"thead")(34,"tr")(35,"th"),i(36,"\u6210\u54E1"),e(),t(37,"th"),i(38,"\u5C08\u6848\u89D2\u8272"),e(),t(39,"th"),i(40,"\u8CA0\u8CAC\u95DC\u9375\u7D50\u679C"),e(),t(41,"th"),i(42,"\u4EFB\u52D9\u5B8C\u6210\u7387"),e(),t(43,"th"),i(44,"\u7D9C\u5408\u8CA2\u737B\u8A55\u5206"),e()()(),t(45,"tbody"),v(46,de,18,12,"tr",null,D),e()()()(),t(48,"div",37)(49,"div",41)(50,"h3"),i(51,"\u6548\u80FD\u504F\u5DEE\u81EA\u52D5\u63D0\u9192 (Variance Alert)"),e(),t(52,"span",42),s(53,"i",43),i(54," \u7570\u5E38\u5075\u6E2C"),e()(),v(55,me,9,5,"div",44,D),s(57,"div",45,0),e()()),l&2){let n=p();a(6),d(n.objective),a(4),P(n.acceptanceCriteria),a(17),P(n.okrContributions),a(19),P(n.teamContributions),a(9),P(n.varianceAlerts)}}function ge(l,r){l&1&&s(0,"i",69)}function xe(l,r){if(l&1){let n=T();t(0,"tr",68),x("click",function(){let c=u(n).$implicit,f=p(4);return g(f.openTaskDetail(c))}),t(1,"td"),E(2,ge,1,0,"i",69),i(3),e(),t(4,"td")(5,"div",50)(6,"div",51),i(7),e(),i(8),e()(),t(9,"td")(10,"span",15),i(11),e()(),t(12,"td"),i(13),e(),t(14,"td")(15,"span",70),i(16),e()(),t(17,"td"),s(18,"i",71),e()()}if(l&2){let n=r.$implicit,o=p(4);a(),_("indent-1",n.indent===0)("indent-2",n.indent===1),a(),h(n.isParent?2:-1),a(),m(" ",n.name," "),a(3),w("background",n.assignee.color),a(),d(n.assignee.initials),a(),m(" ",n.assignee.name," "),a(2),C("ngClass",o.getTaskStatusClass(n.status)),a(),d(o.getTaskStatusLabel(n.status)),a(2),d(n.dueDate),a(3),d(n.okrTag)}}function fe(l,r){if(l&1&&(t(0,"div",34)(1,"div",61)(2,"button",62),s(3,"i",63),i(4," \u7BE9\u9078"),e(),t(5,"button",64),s(6,"i",65),i(7," \u65B0\u589E\u4EFB\u52D9"),e()(),t(8,"table",40)(9,"thead")(10,"tr")(11,"th",66),i(12,"\u4EFB\u52D9\u540D\u7A31"),e(),t(13,"th"),i(14,"\u8CA0\u8CAC\u4EBA"),e(),t(15,"th"),i(16,"\u72C0\u614B"),e(),t(17,"th"),i(18,"\u622A\u6B62\u65E5"),e(),t(19,"th"),i(20,"OKR"),e(),t(21,"th"),i(22,"\u64CD\u4F5C"),e()()(),t(23,"tbody"),v(24,xe,19,14,"tr",67,D),e()()()),l&2){let n=p();a(24),P(n.tasks)}}function Ce(l,r){if(l&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td")(4,"span",17),i(5),e()(),t(6,"td"),i(7),e(),t(8,"td"),i(9),e(),t(10,"td"),i(11),e()()),l&2){let n=r.$implicit,o=p(4);_("cost-row--subtotal",n.name.includes("\u5C0F\u8A08"))("cost-row--total",n.name.includes("\u5408\u8A08")),a(2),d(n.name),a(2),_("badge--indirect",n.category==="indirect"),a(),d(n.category==="direct"?"\u76F4\u63A5\u6210\u672C":"\u9593\u63A5\u6210\u672C"),a(2),d(o.formatCurrency(n.budget)),a(2),d(o.formatCurrency(n.actual)),a(),_("text-danger",n.variance<0)("text-success",n.variance>0),a(),m(" ",n.variance===0?"0":o.formatCurrency(n.variance)," ")}}function _e(l,r){if(l&1&&(t(0,"div",35)(1,"div",37)(2,"div",72)(3,"h3"),i(4,"AI \u672A\u4F86\u640D\u76CA\u9810\u6E2C (Project P&L Forecast)"),e(),t(5,"span",73),s(6,"i",74),i(7," AI Confidence: 92%"),e()(),t(8,"div",75)(9,"div")(10,"h4",76),i(11,"\u6642\u5149\u96A7\u9053\u5716 (Time Tunnel) - \u6B77\u53F2 vs \u9810\u6E2C"),e(),s(12,"div",77,1),e(),t(14,"div")(15,"h4",76),i(16,"\u6BDB\u5229\u7011\u5E03\u5716 (Profit Waterfall) - \u9810\u7B97\u81F3\u6BDB\u5229\u6D41\u5411"),e(),s(17,"div",77,2),e()()(),t(19,"div",75)(20,"div",37)(21,"h3"),i(22,"\u6210\u672C\u7D50\u69CB\u5206\u6790"),e(),s(23,"div",77,3),e(),t(25,"div",37)(26,"h3"),i(27,"\u5C08\u6848\u6BDB\u5229\u8DA8\u52E2"),e(),s(28,"div",77,4),e()(),t(30,"div",37)(31,"h3"),i(32,"\u6210\u672C\u660E\u7D30\u8868 (Cost Breakdown)"),e(),t(33,"table",40)(34,"thead")(35,"tr")(36,"th"),i(37,"\u9805\u76EE"),e(),t(38,"th"),i(39,"\u985E\u5225"),e(),t(40,"th"),i(41,"\u9810\u7B97"),e(),t(42,"th"),i(43,"\u5BE6\u969B\u652F\u51FA"),e(),t(44,"th"),i(45,"\u5DEE\u7570"),e()()(),t(46,"tbody"),v(47,Ce,12,15,"tr",78,D),t(49,"tr",79)(50,"td",80),i(51,"\u76F4\u63A5\u6210\u672C\u5C0F\u8A08"),e(),t(52,"td"),i(53,"$1,800,000"),e(),t(54,"td"),i(55,"$1,900,000"),e(),t(56,"td",81),i(57,"-$100,000"),e()(),t(58,"tr",79)(59,"td",80),i(60,"\u9593\u63A5\u6210\u672C\u5C0F\u8A08"),e(),t(61,"td"),i(62,"$600,000"),e(),t(63,"td"),i(64,"$600,000"),e(),t(65,"td"),i(66,"0"),e()(),t(67,"tr",82)(68,"td",80),i(69,"\u7E3D\u6210\u672C\u5408\u8A08"),e(),t(70,"td"),i(71,"$2,400,000"),e(),t(72,"td"),i(73,"$2,500,000"),e(),t(74,"td",81),i(75,"-$100,000"),e()()()()()()),l&2){let n=p();a(47),P(n.costBreakdown)}}function be(l,r){if(l&1){let n=T();t(0,"div",8)(1,"div",9)(2,"button",10),x("click",function(){u(n);let c=p(2);return g(c.goBack())}),s(3,"i",11),i(4," \u8FD4\u56DE\u5217\u8868 "),e()(),t(5,"div",12)(6,"div",13)(7,"div",14)(8,"h1"),i(9),t(10,"span",15),i(11),e()(),t(12,"div",16)(13,"span",17),i(14),e(),t(15,"span",17),s(16,"i",18),i(17),e(),t(18,"span",17),s(19,"i",19),i(20),e()()(),t(21,"div",20)(22,"div",21)(23,"div",22),i(24,"\u7E3D\u9810\u7B97"),e(),t(25,"div",23),i(26),e()(),t(27,"div",24)(28,"div",22),i(29,"\u76F4\u63A5\u6210\u672C"),e(),t(30,"div",25),i(31),e()(),t(32,"div",21)(33,"div",22),i(34,"\u9593\u63A5\u6210\u672C"),e(),t(35,"div",25),i(36),e()(),t(37,"div",24)(38,"div",22),i(39,"\u5DF2\u6D88\u8017\u7E3D\u8A08"),e(),t(40,"div",23),i(41),e()(),t(42,"div",21)(43,"div",22),i(44,"\u9810\u4F30\u6BDB\u5229"),e(),t(45,"div",26),i(46),e()()()(),t(47,"div",27),s(48,"div",28),e(),t(49,"div",29)(50,"span"),i(51),e(),t(52,"span"),i(53),e()()(),t(54,"div",30)(55,"div",31),x("click",function(){u(n);let c=p(2);return g(c.switchTab("overview"))}),i(56,"\u5C08\u6848\u6982\u89BD"),e(),t(57,"div",31),x("click",function(){u(n);let c=p(2);return g(c.switchTab("tasks"))}),i(58,"\u4EFB\u52D9\u7BA1\u7406 (WBS)"),e(),t(59,"div",31),x("click",function(){u(n);let c=p(2);return g(c.switchTab("financial"))}),i(60,"\u7E3E\u6548\u8207\u6BDB\u5229"),e()(),t(61,"div",32),E(62,ue,59,1,"div",33)(63,fe,26,0,"div",34)(64,_e,76,0,"div",35),e()()}if(l&2){let n=r,o=p(2);a(9),m(" ",n.name," "),a(),C("ngClass",o.getStatusClass(n.status)),a(),d(o.getStatusLabel(n.status)),a(3),d(n.code),a(3),z(" ",n.startDate," ~ ",n.endDate,""),a(3),m(" ",n.pm,""),a(6),d(o.formatCurrency(n.budget)),a(5),d(o.formatCurrency(n.directCost)),a(5),d(o.formatCurrency(n.indirectCost)),a(5),d(o.formatCurrency(n.totalSpent)),a(5),m("",n.estimatedProfit,"%"),a(2),w("width",n.progress,"%"),a(3),m("\u7E3D\u9032\u5EA6: ",n.progress,"%"),a(2),m("\u5269\u9918\u5929\u6578: ",n.remainingDays," \u5929"),a(2),_("active",o.activeTab()==="overview"),a(2),_("active",o.activeTab()==="tasks"),a(2),_("active",o.activeTab()==="financial"),a(3),h(o.activeTab()==="overview"?62:-1),a(),h(o.activeTab()==="tasks"?63:-1),a(),h(o.activeTab()==="financial"?64:-1)}}function he(l,r){if(l&1&&E(0,be,65,25,"div",8),l&2){let n,o=p();h((n=o.project())?0:-1,n)}}function ve(l,r){if(l&1){let n=T();t(0,"div",83),x("click",function(){u(n);let c=p();return g(c.closeTaskDetail())}),e(),t(1,"div",84)(2,"div",85)(3,"h3",86),i(4,"\u4EFB\u52D9\u8A73\u60C5"),e(),t(5,"button",87),x("click",function(){u(n);let c=p();return g(c.closeTaskDetail())}),s(6,"i",88),e()(),t(7,"div",89)(8,"div",90)(9,"label",91),i(10,"\u4EFB\u52D9\u540D\u7A31"),e(),s(11,"input",92),e(),t(12,"div",90)(13,"label",91),i(14,"\u4EFB\u52D9\u63CF\u8FF0"),e(),t(15,"textarea",93),i(16),e()(),t(17,"div",90)(18,"label",91),i(19,"\u96B1\u5F62\u6210\u672C\u8A08\u7B97 (\u5DE5\u6642 x \u6642\u85AA)"),e(),t(20,"div",94)(21,"div",95)(22,"label"),i(23,"\u6307\u6D3E\u4EBA\u54E1"),e(),t(24,"select",96),x("ngModelChange",function(c){u(n);let f=p();return f.taskAssigneeRate.set(c),g(f.updateTaskCost())}),t(25,"option",97),i(26,"Jessica Lin ($800/hr)"),e(),t(27,"option",97),i(28,"Junior Dev ($500/hr)"),e()()(),t(29,"div",95)(30,"label"),i(31,"\u9810\u4F30\u5DE5\u6642"),e(),t(32,"input",98),x("ngModelChange",function(c){u(n);let f=p();return f.taskHours.set(c),g(f.updateTaskCost())}),e()()(),t(33,"div",99)(34,"div",100)(35,"span"),i(36,"\u4EBA\u529B\u6210\u672C"),e(),t(37,"span"),i(38),e()(),t(39,"div",100)(40,"span"),i(41,"\u8A2D\u5099\u5206\u6524 (5%)"),e(),t(42,"span"),i(43),e()(),t(44,"div",101)(45,"span"),i(46,"\u7E3D\u6210\u672C\u9810\u4F30"),e(),t(47,"span"),i(48),e()()()()(),t(49,"div",102)(50,"button",103),x("click",function(){u(n);let c=p();return g(c.closeTaskDetail())}),i(51,"\u53D6\u6D88"),e(),t(52,"button",104),i(53,"\u5132\u5B58\u8B8A\u66F4"),e()()()}if(l&2){let n=r,o=p();a(11),C("value",n.name),a(5),d(n.description),a(8),C("ngModel",o.taskAssigneeRate()),a(),C("value",800),a(2),C("value",500),a(5),C("ngModel",o.taskHours()),a(6),d(o.formatCurrency(n.laborCost)),a(5),d(o.formatCurrency(n.overheadCost)),a(5),d(o.formatCurrency(n.totalCost))}}var ee=class l{miniProfitChartRef;timeTunnelChartRef;waterfallChartRef;costPieChartRef;profitTrendChartRef;projectService=k(Z);route=k(H);router=k(Q);cdr=k(V);miniProfitChart=null;timeTunnelChart=null;waterfallChart=null;costPieChart=null;profitTrendChart=null;resizeHandler=()=>this.resizeCharts();loading=b(!0);project=b(null);activeTab=b("overview");teamMembers=b([]);showTaskModal=b(!1);selectedTask=b(null);taskHours=b(40);taskAssigneeRate=b(800);projectName=A(()=>this.project()?.name||"\u5C08\u6848\u8A73\u60C5");breadcrumbs=A(()=>["\u5C08\u6848\u7BA1\u7406","\u5C08\u6848\u5217\u8868",this.projectName()]);ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r&&this.loadProjectDetail(r),this.projectService.getTeamMembers().subscribe({next:n=>this.teamMembers.set(n)})}ngAfterViewInit(){window.addEventListener("resize",this.resizeHandler),setTimeout(()=>this.initOverviewCharts(),100)}ngOnDestroy(){window.removeEventListener("resize",this.resizeHandler),this.disposeCharts()}loadProjectDetail(r){this.loading.set(!0),this.projectService.getProjectDetail(r).subscribe({next:n=>{this.project.set(n),this.loading.set(!1),this.cdr.detectChanges()}})}switchTab(r){this.activeTab.set(r),this.cdr.detectChanges(),r==="financial"&&setTimeout(()=>this.initFinancialCharts(),100)}goBack(){this.router.navigate(["/project"])}openTaskDetail(r){this.projectService.getTaskDetail(r.id).subscribe({next:n=>{this.selectedTask.set(n),this.taskHours.set(n.estimatedHours),this.taskAssigneeRate.set(n.hourlyRate),this.showTaskModal.set(!0),this.cdr.detectChanges()}})}closeTaskDetail(){this.showTaskModal.set(!1),this.selectedTask.set(null)}updateTaskCost(){let r=this.taskHours(),n=this.taskAssigneeRate(),o=r*n,c=Math.round(o*.05);this.selectedTask.update(f=>f?F(j({},f),{estimatedHours:r,hourlyRate:n,laborCost:o,overheadCost:c,totalCost:o+c}):null)}initOverviewCharts(){this.miniProfitChartRef?.nativeElement&&(this.miniProfitChart=O(this.miniProfitChartRef.nativeElement),this.miniProfitChart.setOption({grid:{top:10,bottom:20,left:30,right:10},xAxis:{type:"category",data:["M1","M2","M3"]},yAxis:{type:"value"},series:[{data:[10,12,8],type:"line",smooth:!0,areaStyle:{color:"rgba(199,127,127,0.2)"},lineStyle:{color:"#C77F7F"}}]}))}initFinancialCharts(){this.timeTunnelChartRef?.nativeElement&&(this.timeTunnelChart=O(this.timeTunnelChartRef.nativeElement),this.timeTunnelChart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["\u5BE6\u969B\u6210\u672C","AI \u9810\u6E2C\u6210\u672C"],bottom:0},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yAxis:{type:"value",name:"\u6210\u672C (K)",axisLabel:{formatter:"${value}"}},series:[{name:"\u5BE6\u969B\u6210\u672C",type:"line",data:[150,230,224,218,135,147,260,null,null,null,null,null],itemStyle:{color:"#64748B"},lineStyle:{width:3}},{name:"AI \u9810\u6E2C\u6210\u672C",type:"line",smooth:!0,lineStyle:{type:"dashed",width:3},data:[150,230,224,218,135,147,260,280,310,340,380,410],itemStyle:{color:"#9A8C98"},markArea:{itemStyle:{color:"rgba(154, 140, 152, 0.1)"},data:[[{xAxis:"Jul"},{xAxis:"Dec"}]]}}]})),this.waterfallChartRef?.nativeElement&&(this.waterfallChart=O(this.waterfallChartRef.nativeElement),this.waterfallChart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",splitLine:{show:!1},data:["\u7E3D\u9810\u7B97","\u4EBA\u529B\u6210\u672C","\u5916\u5305\u6210\u672C","\u8A2D\u5099\u6210\u672C","\u9593\u63A5\u6210\u672C","\u9810\u4F30\u6BDB\u5229"]},yAxis:{type:"value"},series:[{name:"Placeholder",type:"bar",stack:"Total",itemStyle:{borderColor:"transparent",color:"transparent"},data:[0,28e5,23e5,22e5,16e5,0]},{name:"\u91D1\u984D",type:"bar",stack:"Total",label:{show:!0,position:"top",formatter:r=>`$${(r.value/1e6).toFixed(1)}M`},data:[{value:4e6,itemStyle:{color:"#64748B"}},{value:12e5,itemStyle:{color:"#C77F7F"}},{value:5e5,itemStyle:{color:"#C77F7F"}},{value:1e5,itemStyle:{color:"#C77F7F"}},{value:6e5,itemStyle:{color:"#E3C088"}},{value:16e5,itemStyle:{color:"#7FB095"}}]}]})),this.costPieChartRef?.nativeElement&&(this.costPieChart=O(this.costPieChartRef.nativeElement),this.costPieChart.setOption({tooltip:{trigger:"item",formatter:"{b}: ${c} ({d}%)"},legend:{bottom:"0%",left:"center",icon:"circle",itemWidth:8,itemHeight:8},color:["#9A8C98","#B87D7B","#D6A28C","#E3C088"],series:[{name:"Cost Structure",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:5,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold",color:"#475569"}},labelLine:{show:!1},data:[{value:12e5,name:"\u4EBA\u529B\u6210\u672C"},{value:5e5,name:"\u5916\u5305\u958B\u767C"},{value:1e5,name:"\u8A2D\u5099\u8CC7\u6E90"},{value:6e5,name:"\u9593\u63A5\u6210\u672C"}]}]})),this.profitTrendChartRef?.nativeElement&&(this.profitTrendChart=O(this.profitTrendChartRef.nativeElement),this.profitTrendChart.setOption({tooltip:{trigger:"axis"},grid:{left:"10%",bottom:"10%"},xAxis:{type:"category",data:["Jan","Feb","Mar","Apr","May","Jun"]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{type:"line",data:[20,25,22,28,30,32],smooth:!0,itemStyle:{color:"#8DA399"},areaStyle:{color:"rgba(141, 163, 153, 0.2)"}}]}))}resizeCharts(){this.miniProfitChart?.resize(),this.timeTunnelChart?.resize(),this.waterfallChart?.resize(),this.costPieChart?.resize(),this.profitTrendChart?.resize()}disposeCharts(){this.miniProfitChart?.dispose(),this.timeTunnelChart?.dispose(),this.waterfallChart?.dispose(),this.costPieChart?.dispose(),this.profitTrendChart?.dispose()}getStatusClass(r){switch(r){case"active":return"badge--active";case"risk":return"badge--risk";case"planning":return"badge--planning";case"completed":return"badge--completed";default:return""}}getStatusLabel(r){switch(r){case"active":return"\u9032\u884C\u4E2D";case"risk":return"\u98A8\u96AA";case"planning":return"\u898F\u5283\u4E2D";case"completed":return"\u5DF2\u5B8C\u6210";default:return r}}getTaskStatusClass(r){switch(r){case"completed":return"badge--active";case"in-progress":return"badge--planning";case"delayed":return"badge--risk";case"pending":return"badge--pending";default:return""}}getTaskStatusLabel(r){switch(r){case"completed":return"\u5DF2\u5B8C\u6210";case"in-progress":return"\u9032\u884C\u4E2D";case"delayed":return"\u5EF6\u9072\u4E2D";case"pending":return"\u5F85\u958B\u59CB";default:return r}}getWeightClass(r){switch(r){case"high":return"badge--active";case"medium":return"badge--medium";case"low":return"badge--low";default:return""}}getWeightLabel(r){switch(r){case"high":return"High (40%)";case"medium":return"Med (25%)";case"low":return"Low (10%)";default:return r}}formatCurrency(r){return`$${r.toLocaleString()}`}formatCurrencyShort(r){return r>=1e6?`$${(r/1e6).toFixed(1)}M`:`$${(r/1e3).toFixed(0)}K`}static \u0275fac=function(n){return new(n||l)};static \u0275cmp=B({type:l,selectors:[["app-project-detail-page"]],viewQuery:function(n,o){if(n&1&&(y(te,5),y(ne,5),y(ie,5),y(ae,5),y(re,5)),n&2){let c;M(c=S())&&(o.miniProfitChartRef=c.first),M(c=S())&&(o.timeTunnelChartRef=c.first),M(c=S())&&(o.waterfallChartRef=c.first),M(c=S())&&(o.costPieChartRef=c.first),M(c=S())&&(o.profitTrendChartRef=c.first)}},standalone:!0,features:[R],decls:4,vars:3,consts:[["miniProfitChart",""],["timeTunnelChart",""],["waterfallChart",""],["costPieChart",""],["profitTrendChart",""],["pageTitle","\u5C08\u6848\u8A73\u60C5",3,"breadcrumbs"],[1,"loading-container"],[1,"ri-loader-4-line","loading-spinner"],[1,"project-detail-page"],[1,"page-toolbar"],["type","button",1,"btn-back",3,"click"],[1,"ri-arrow-left-line"],[1,"project-header-card"],[1,"ph-top"],[1,"ph-title"],[1,"badge",3,"ngClass"],[1,"ph-badges"],[1,"badge"],[1,"ri-calendar-line"],[1,"ri-user-line"],[1,"ph-stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-val"],[1,"stat-item","stat-item--bordered"],[1,"stat-val","stat-val--secondary"],[1,"stat-val","stat-val--success"],[1,"progress-bar-container"],[1,"progress-bar-fill"],[1,"progress-info"],[1,"project-tabs"],[1,"tab-item",3,"click"],[1,"tab-content-wrapper"],[1,"overview-grid"],[1,"tasks-tab"],[1,"financial-tab"],[1,"overview-left"],[1,"inner-card"],[1,"scope-text"],[1,"acceptance-list"],[1,"wbs-table"],[1,"alert-header"],[1,"badge","badge--risk"],[1,"ri-alarm-warning-line"],[1,"alert-card",3,"alert-card--warning"],[1,"mini-chart"],[1,"ri-checkbox-circle-line"],[1,"progress-cell"],[1,"mini-progress-bar"],[1,"mini-progress-fill"],[1,"assignee-cell"],[1,"assignee-avatar"],[1,"score-cell"],[1,"score-value"],[1,"alert-card"],[1,"alert-icon"],[1,"ri-error-warning-fill"],[1,"ri-alert-fill"],[1,"alert-content"],[1,"alert-title"],[1,"alert-desc"],[1,"tasks-toolbar"],[1,"btn-secondary"],[1,"ri-filter-3-line"],[1,"btn-primary"],[1,"ri-add-line"],[2,"width","40%"],[1,"wbs-row"],[1,"wbs-row",3,"click"],[1,"ri-arrow-down-s-fill","toggle-icon"],[1,"okr-badge"],[1,"ri-more-fill",2,"color","#999"],[1,"prediction-header"],[1,"ai-badge"],[1,"ri-magic-line"],[1,"financial-grid"],[1,"chart-title"],[1,"chart-container"],[3,"cost-row--subtotal","cost-row--total"],[1,"cost-row--subtotal"],["colspan","2"],[1,"text-danger"],[1,"cost-row--total"],[1,"modal-backdrop",3,"click"],[1,"modal"],[1,"modal__header"],[1,"modal__title"],["type","button",1,"btn-icon",3,"click"],[1,"ri-close-line"],[1,"modal__body"],[1,"form-group"],[1,"form-label"],["type","text","readonly","",1,"form-input",3,"value"],["readonly","",1,"form-textarea"],[1,"cost-inputs"],[1,"cost-input-item"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],["type","number",1,"form-input",3,"ngModelChange","ngModel"],[1,"cost-calc-box"],[1,"cost-row"],[1,"cost-row","cost-total"],[1,"modal__footer"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary"]],template:function(n,o){if(n&1&&(s(0,"app-header",5),E(1,oe,4,0,"div",6)(2,he,1,1)(3,ve,54,9)),n&2){let c;C("breadcrumbs",o.breadcrumbs()),a(),h(o.loading()?1:2),a(2),h((c=o.showTaskModal()&&o.selectedTask())?3:-1,c)}},dependencies:[L,$,X,G,U,N,q,K,W,J,Y],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;padding:100px;padding-top:calc(var(--header-height, 70px) + 100px);color:#64748b}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;font-size:24px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.project-detail-page[_ngcontent-%COMP%]{padding:20px;padding-top:calc(var(--header-height, 70px) + 20px)}.page-toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.btn-back[_ngcontent-%COMP%]{padding:10px 20px;background:#fff;color:#1e293b;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:6px;transition:all .2s}.btn-back[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.btn-back[_ngcontent-%COMP%]:hover{background:#f8fafc;border-color:#9a8c98;color:#9a8c98}.project-header-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;padding:25px;margin-bottom:20px}.ph-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;flex-wrap:wrap;gap:20px}.ph-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1e293b;margin:0 0 10px;display:flex;align-items:center;gap:10px}.ph-badges[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;background:#f1f5f9;color:#64748b;display:flex;align-items:center;gap:5px}.badge--active[_ngcontent-%COMP%]{background:#7fb09526;color:#7fb095}.badge--risk[_ngcontent-%COMP%]{background:#c77f7f26;color:#c77f7f}.badge--planning[_ngcontent-%COMP%]{background:#e3c08826;color:#a88643}.badge--completed[_ngcontent-%COMP%]{background:#9a8c9826;color:#9a8c98}.badge--medium[_ngcontent-%COMP%], .badge--indirect[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.ph-stats[_ngcontent-%COMP%]{display:flex;gap:30px;background:#f8fafc;padding:15px 25px;border-radius:8px;flex-wrap:wrap}.stat-item[_ngcontent-%COMP%]{text-align:center}.stat-item--bordered[_ngcontent-%COMP%]{border-left:1px solid #e2e8f0;padding-left:20px}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:#64748b;margin-bottom:5px}.stat-val[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1e293b}.stat-val--secondary[_ngcontent-%COMP%]{color:#64748b;font-size:16px}.stat-val--success[_ngcontent-%COMP%]{color:#7fb095}.progress-bar-container[_ngcontent-%COMP%]{width:100%;background:#e2e8f0;height:6px;border-radius:3px;overflow:hidden}.progress-bar-fill[_ngcontent-%COMP%]{height:100%;background:#9a8c98;transition:width .3s ease}.progress-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:5px;font-size:12px;color:#64748b}.project-tabs[_ngcontent-%COMP%]{background:#fff;border-radius:12px 12px 0 0;border:1px solid #e2e8f0;border-bottom:none;display:flex;padding:0 20px;margin-bottom:-1px}.tab-item[_ngcontent-%COMP%]{padding:15px 20px;font-size:14px;font-weight:600;color:#64748b;border-bottom:3px solid transparent;cursor:pointer;transition:all .2s}.tab-item.active[_ngcontent-%COMP%]{color:#9a8c98;border-bottom-color:#9a8c98}.tab-item[_ngcontent-%COMP%]:hover{color:#9a8c98}.tab-content-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 12px 12px;border:1px solid #e2e8f0;padding:25px;min-height:500px}.overview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:20px}@media (max-width: 1200px){.overview-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.overview-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.inner-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:20px}.inner-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#1e293b;margin:0 0 15px}.inner-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1e293b;margin:15px 0 10px}.scope-text[_ngcontent-%COMP%]{line-height:1.6;color:#64748b;margin-bottom:20px}.acceptance-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.acceptance-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#64748b;margin-bottom:5px;display:flex;align-items:center;gap:8px}.acceptance-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7fb095}.wbs-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.wbs-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px 15px;background:#f8fafc;color:#64748b;font-size:13px;font-weight:600;border-bottom:1px solid #e2e8f0}.wbs-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid #e2e8f0;font-size:14px;color:#1e293b}.wbs-row[_ngcontent-%COMP%]{cursor:pointer}.wbs-row[_ngcontent-%COMP%]:hover{background:#f8fafc}.indent-1[_ngcontent-%COMP%]{padding-left:20px!important}.indent-2[_ngcontent-%COMP%]{padding-left:40px!important;border-left:3px solid #eee}.toggle-icon[_ngcontent-%COMP%]{color:#64748b;margin-right:5px;cursor:pointer}.assignee-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.assignee-avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:#ccc;color:#fff;font-size:10px;display:flex;align-items:center;justify-content:center;font-weight:600}.progress-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.progress-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;min-width:35px}.mini-progress-bar[_ngcontent-%COMP%]{flex:1;height:6px;background:#eee;border-radius:3px;overflow:hidden;min-width:60px}.mini-progress-fill[_ngcontent-%COMP%]{height:100%;background:#9a8c98;transition:width .3s ease}.score-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.score-value[_ngcontent-%COMP%]{font-weight:700;color:#9a8c98;min-width:30px}.okr-badge[_ngcontent-%COMP%]{background:#9a8c9826;color:#9a8c98;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600}.text-danger[_ngcontent-%COMP%]{color:#c77f7f!important}.text-success[_ngcontent-%COMP%]{color:#7fb095!important}.alert-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.alert-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.alert-card[_ngcontent-%COMP%]{padding:15px;background:#fef2f2;border-radius:8px;border:1px solid #FECACA;margin-bottom:15px;display:flex;gap:10px}.alert-card--warning[_ngcontent-%COMP%]{background:#fffbeb;border-color:#fde68a}.alert-card--warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .alert-card--warning[_ngcontent-%COMP%]   .alert-title[_ngcontent-%COMP%]{color:#d97706}.alert-card--warning[_ngcontent-%COMP%]   .alert-desc[_ngcontent-%COMP%]{color:#92400e}.alert-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#c77f7f;font-size:18px}.alert-content[_ngcontent-%COMP%]{flex:1}.alert-title[_ngcontent-%COMP%]{font-weight:700;color:#c77f7f;font-size:14px;margin-bottom:4px}.alert-desc[_ngcontent-%COMP%]{font-size:13px;color:#991b1b;line-height:1.5}.mini-chart[_ngcontent-%COMP%]{width:100%;height:200px;margin-top:15px}.tasks-tab[_ngcontent-%COMP%]   .tasks-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px}.financial-tab[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.prediction-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.prediction-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.ai-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9a8c98,#64748b);color:#fff;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;display:flex;align-items:center;gap:5px}.financial-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 1000px){.financial-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chart-title[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin-bottom:10px}.chart-container[_ngcontent-%COMP%]{width:100%;height:300px}.cost-row--subtotal[_ngcontent-%COMP%]{background:#f8fafc;font-weight:600}.cost-row--total[_ngcontent-%COMP%]{background:#f1f5f9;font-weight:700;color:#9a8c98;border-top:2px solid #e2e8f0}.btn-primary[_ngcontent-%COMP%]{padding:10px 20px;background:#9a8c98;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:background .2s;display:inline-flex;align-items:center;gap:5px}.btn-primary[_ngcontent-%COMP%]:hover{background:#81727f}.btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;background:#fff;color:#1e293b;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:5px;transition:all .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:none;background:transparent;color:#64748b;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:20px}.btn-icon[_ngcontent-%COMP%]:hover{background:#f1f5f9}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:9999}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:12px;width:600px;max-width:90vw;max-height:90vh;overflow-y:auto;z-index:10000;box-shadow:0 20px 60px #0003}.modal__header[_ngcontent-%COMP%]{padding:20px 25px;border-bottom:1px solid #e2e8f0;display:flex;justify-content:space-between;align-items:center}.modal__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:0}.modal__body[_ngcontent-%COMP%]{padding:25px}.modal__footer[_ngcontent-%COMP%]{padding:20px 25px;border-top:1px solid #e2e8f0;background:#f8fafc;display:flex;justify-content:flex-end;gap:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;font-size:14px;color:#1e293b}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;color:#1e293b;background:#fff;transition:border-color .2s}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#9a8c98}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px;font-family:inherit}.cost-inputs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.cost-input-item[_ngcontent-%COMP%]{flex:1}.cost-input-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-bottom:5px}.cost-calc-box[_ngcontent-%COMP%]{background:#f8fafc;padding:20px;border-radius:8px;border:1px solid #e2e8f0;margin-top:15px}.cost-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px;font-size:14px;color:#64748b}.cost-row.cost-total[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#9a8c98;border-top:1px solid #e2e8f0;padding-top:12px;margin-top:12px;margin-bottom:0}"],changeDetection:0})};export{ee as ProjectDetailPageComponent};

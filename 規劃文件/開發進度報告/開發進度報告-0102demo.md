# AI 智慧招募流程模組 - 開發進度報告

> 對照文件：`0102demo.md`
> 報告日期：2025-12-21
> 系統版本：v1.0

---

## 📋 模組總覽

| 模組 | 規劃內容 | 開發狀態 | 完成度 |
|------|---------|---------|--------|
| 模組一 | 職務說明書與職能設定 | ✅ 已完成 | 95% |
| 模組二 | 職缺發布與人力銀行串接 | ⚠️ 部分完成 | 60% |
| 模組三 | 履歷匯入 | ⚠️ 部分完成 | 50% |
| 模組四 | AI 履歷評分 | ✅ 已完成 | 90% |
| 模組五 | 面試邀約決策 | ✅ 已完成 | 85% |
| 模組六 | 面試流程 | ⚠️ 部分完成 | 40% |
| 模組七 | 感謝信流程 | ⚠️ 待開發 | 10% |

---

## 模組一：職務說明書與職能設定

### 📍 對應頁面

| 路徑 | 頁面名稱 |
|------|---------|
| `/competency/framework` | 職能基準庫 |
| `/competency/job-description` | 職務說明書管理 |
| `/competency/job-description/create` | 新增職務說明書 |

### ✅ 已完成功能

| 功能 | 說明 | 對應檔案 |
|------|------|----------|
| **職能基準庫管理** | 三大類職能：核心職能(5項)、管理職能(3項)、KSA職能(52項) | `framework-page.component.ts` |
| **核心職能 L1-L6 等級** | 溝通表達、問題解決、專案思維、客戶導向、成長思維，各含 L1-L6 行為指標 | `competency.service.ts` |
| **管理職能 L1-L6 等級** | 人才發展、決策能力、團隊領導，各含 L1-L6 行為指標 | `competency.service.ts` |
| **KSA 職能清單** | 知識(K)、技能(S)、態度(A) 三類職能項目，無等級區分 | `competency.service.ts` |
| **職能等級展開/收合** | 點擊等級標籤展開至該等級，再次點擊收合 | `framework-page.component.ts` |
| **JD 建立與版本管理** | 支援三種模式：自行新增、匯入模版、AI 撰寫助手 | `create-jd-page.component.ts` |
| **JD 12 區塊結構** | 基本資訊、主要職責、職務目的、職務要求、VFP、職能需求、工作描述、檢查清單、職務責任、每日/週/月工作 | `job-description-page.component.html` |
| **職能需求綁定** | 設定核心職能＋管理職能＋KSA職能，含等級＋權重，總權重計算 | `create-jd-page.component.ts` |
| **JD 匯出 PDF** | 符合 A4 列印格式的 PDF 匯出，包含完整 12 區塊內容 | `pdf-export.service.ts` |
| **9 份 JD 範本** | 財務長、財務會計、主辦會計、出納會計、人資專員、人員招募專員、薪酬與福利專員、專案部副理、業務部業務 | `competency.service.ts` |
| **JD 版本資訊** | 建立者、建立日期、最後更新、歷次版本記錄 | `job-description-page.component.html` |
| **JD 詳細資訊 Modal** | 12 區塊結構化顯示，含職能需求表格（名稱、等級、權重） | `job-description-page.component.html` |
| **生成動畫** | 全畫面 AI 生成動畫效果 | `create-jd-page.component.scss` |

### ❌ 未完成功能

| 功能 | 規劃內容 | 狀態 |
|------|---------|------|
| JD 章節管理 (JobDescriptionManuals) | 依 SectionKey 管理章節：Purpose/Responsibilities/Authority/Requirements/Conditions | 使用固定結構替代 |
| JD 審核流程 | Draft → Active 狀態流轉，需審核通過 | 僅有狀態顯示，無審核流程 |
| JD Word 匯出 | 支援 Word 格式匯出 | 僅支援 PDF |
| 後端 API | POST /api/v1/jds、GET /api/v1/competencies | 使用 Mock 數據 |

---

## 模組二：職缺發布與人力銀行串接

### 📍 對應頁面

| 路徑 | 頁面名稱 |
|------|---------|
| `/employee/jobs` | 招募職缺管理 |

### ✅ 已完成功能

| 功能 | 說明 | 對應檔案 |
|------|------|----------|
| **職缺主檔管理** | 職缺列表顯示、狀態管理、表格/卡片視圖切換 | `jobs-page.component.ts` |
| **關聯 JD** | 發布職缺時可選擇 JD 範本，自動帶入職稱、部門、描述 | `jobs-page.component.html` |
| **職缺狀態** | Draft/Published/Closed 狀態顯示與篩選 | `jobs-page.component.ts` |
| **統計卡片** | 進行中職缺、本週新進履歷、待審核履歷、已安排面試 | `jobs-page.component.html` |
| **篩選功能** | 關鍵字搜尋、部門篩選、狀態篩選 | `jobs-page.component.html` |
| **6 個職缺資料** | 人員招募專員、主辦會計、人資專員、專案部副理、薪酬與福利專員、出納會計 | `job.service.ts` |
| **匯入履歷按鈕** | UI 按鈕（模擬功能） | `jobs-page.component.html` |

### ❌ 未完成功能

| 功能 | 規劃內容 | 狀態 |
|------|---------|------|
| **人力銀行 API 串接** | 104/1111 OAuth 認證、職缺發布 API | 僅有 UI 模擬 |
| **職缺發布** | 呼叫人力銀行 API 發布職缺 | 待開發 |
| **職缺狀態同步** | 從人力銀行拉取最新職缺狀態 | 待開發 |
| **人力銀行憑證設定** | 管理 104/1111 登入憑證 | 待開發 |
| **Webhook 接收** | 接收人力銀行履歷推送 | 待開發 |
| **後端 API** | POST /api/v1/jobs、POST /api/v1/jobs/{jobId}/publish | 使用 Mock 數據 |

---

## 模組三：履歷匯入

### 📍 對應頁面

| 路徑 | 頁面名稱 |
|------|---------|
| `/employee/job-candidates` | 職缺候選人列表 |

### ✅ 已完成功能

| 功能 | 說明 | 對應檔案 |
|------|------|----------|
| **候選人列表** | 15 位模擬候選人資料 | `job.service.ts` |
| **履歷狀態管理** | 未評分(pending)/已評分(scored) 兩種狀態 | `job-candidates-page.component.ts` |
| **篩選功能** | 關鍵字搜尋、AI 匹配度、應徵狀態 | `job-candidates-page.component.html` |
| **候選人卡片** | 顯示姓名、學歷、經驗、技能標籤、AI 分數 | `job-candidates-page.component.html` |
| **統計卡片** | 總應徵人數、待審核、AI 推薦、已安排面試 | `job-candidates-page.component.html` |

### 候選人清單

| ID | 姓名 | 職稱經驗 | AI 分數 | 狀態 |
|----|------|---------|--------|------|
| C001 | 林小美 | 人力資源專員 3年 | 92 | 新進 |
| C002 | 陳大華 | 人資行政專員 2年 | 78 | 已安排面試 |
| C003 | 王小明 | 行政助理 1年 | 65 | 已婉拒 |
| C004 | 李美玲 | 招募專員 4年 | 88 | 新進 |
| C005 | 張志偉 | 人資主管 6年 | 95 | 新進 |
| C006 | 黃雅琳 | 人資專員 2年 | 76 | 新進 |
| C007 | 吳建宏 | 招募助理 1年 | 62 | 新進 |
| C008 | 許芳瑜 | 人資專員 3年 | 84 | 已安排面試 |
| C009 | 蔡明翰 | 培訓專員 4年 | 71 | 新進 |
| C010 | 鄭雨萱 | 人資分析師 2年 | 79 | 新進 |
| C011 | 周冠廷 | 行政專員 1年 | 55 | 已婉拒 |
| C012 | 林佳慧 | 勞資關係專員 5年 | 82 | 新進 |
| C013 | 楊承翰 | 招募顧問 3年 | 87 | 已安排面試 |
| C014 | 陳怡君 | 人事助理 1年 | 58 | 已婉拒 |
| C015 | 劉宗翰 | 人資經理 8年 | 94 | 新進 |

### ❌ 未完成功能

| 功能 | 規劃內容 | 狀態 |
|------|---------|------|
| **排程匯入** | 定時從人力銀行拉取新履歷 | 待開發 |
| **手動觸發匯入** | 呼叫人力銀行 API 拉取履歷 | 僅有 UI |
| **履歷解析** | 將人力銀行格式轉換為系統標準格式 | 待開發 |
| **匯入日誌** | ResumeImportLogs 記錄 | 待開發 |
| **後端 API** | POST /api/v1/jobs/{jobId}/import-resumes | 使用 Mock 數據 |

---

## 模組四：AI 履歷評分

### 📍 對應頁面

| 路徑 | 頁面名稱 |
|------|---------|
| `/employee/job-candidates` | 職缺候選人列表 |
| `/employee/profile-detail` | 候選人檔案解析 |

### ✅ 已完成功能

| 功能 | 說明 | 對應檔案 |
|------|------|----------|
| **批量 AI 評分** | 全畫面動畫模擬 AI 評分過程，包含進度條、步驟指示 | `job-candidates-page.component.ts` |
| **評分狀態管理** | 未評分 → 已評分 狀態轉換 | `job-candidates-page.component.ts` |
| **分數動畫效果** | 分數從 0 跑到實際分數的 easeOutExpo 動畫 | `job-candidates-page.component.ts` |
| **AI 評分步驟動畫** | 分析需求 → 解析履歷 → 匹配計算 → 生成報告 → 完成 | `job-candidates-page.component.html` |
| **AI 履歷解析報告** | JD 職能匹配度、整體職能評分 | `profile-detail-page.component.html` |
| **職能需求匹配分析** | 各職能分項評分、需求等級 vs 評估等級、權重、證據說明 | `profile-detail-page.component.html` |
| **技能標籤提取** | 顯示匹配/未匹配的技能標籤 | `profile-detail-page.component.html` |
| **經歷摘要** | 公司、職位、任期、工作亮點 | `profile-detail-page.component.html` |
| **學歷驗證** | 學校、學位、科系、驗證狀態 | `profile-detail-page.component.html` |
| **AI 綜合建議** | 優勢、不足之處、面試建議 | `profile-detail-page.component.html` |
| **AI 評分資訊** | 評分時間、AI 模型版本、分析字數 | `profile-detail-page.component.html` |
| **原始履歷預覽** | 模擬履歷格式顯示 | `profile-detail-page.component.html` |

### ❌ 未完成功能

| 功能 | 規劃內容 | 狀態 |
|------|---------|------|
| **真實 AI 評分服務** | 呼叫 Claude/GPT API 進行評分 | 使用模擬數據 |
| **評分報告 JSON 儲存** | AIScoringResults 資料表 | 前端模擬 |
| **評分明細儲存** | AIScoringDetails 資料表 | 前端模擬 |
| **排程評分** | 每 30 分鐘處理待評分履歷 | 待開發 |
| **後端 API** | POST /api/v1/ai-scoring/trigger、GET /api/v1/candidates/{candidateId}/scoring | 使用 Mock 數據 |

---

## 模組五：面試邀約決策

### 📍 對應頁面

| 路徑 | 頁面名稱 |
|------|---------|
| `/employee/job-candidates` | 職缺候選人列表 |

### ✅ 已完成功能

| 功能 | 說明 | 對應檔案 |
|------|------|----------|
| **O/X 邀約決策** | 邀約（✓）/ 婉拒（✕）按鈕，hover 效果 | `job-candidates-page.component.html` |
| **AI 評分報告檢視** | 點擊「查看詳情」進入詳細頁面 | `job-candidates-page.component.ts` |
| **面試邀約 Modal** | 完整表單：日期、時間、面試官、面試方式、備註 | `job-candidates-page.component.html` |
| **面試官選擇** | 6 位面試官下拉選單，顯示姓名、職稱、部門 | `job-candidates-page.component.ts` |
| **面試方式選擇** | 現場面試、線上面試、電話面試（Radio 選項） | `job-candidates-page.component.html` |
| **狀態更新** | 邀約後狀態改為「已安排面試」 | `job-candidates-page.component.ts` |
| **婉拒狀態更新** | 婉拒後狀態改為「已婉拒」，顯示感謝信通知 | `job-candidates-page.component.ts` |
| **候選人預覽** | Modal 中顯示候選人頭像、姓名、Email | `job-candidates-page.component.html` |
| **日期限制** | 面試日期只能選擇今天之後 | `job-candidates-page.component.ts` |

### 面試官清單

| ID | 姓名 | 職稱 | 部門 |
|----|------|------|------|
| INT-001 | 張經理 | 人資經理 | 人資部 |
| INT-002 | 李副理 | 人資副理 | 人資部 |
| INT-003 | 王主管 | 招募主管 | 人資部 |
| INT-004 | 陳總監 | 人資總監 | 人資部 |
| INT-005 | 林經理 | 業務經理 | 業務部 |
| INT-006 | 黃經理 | 技術經理 | 技術部 |

### ❌ 未完成功能

| 功能 | 規劃內容 | 狀態 |
|------|---------|------|
| **批次決策** | 一次選取多位候選人進行決策 | 待開發 |
| **決策記錄儲存** | InvitationDecisions 資料表 | 前端模擬 |
| **決策理由** | 記錄決策者的理由說明 | Modal 有欄位，未儲存 |
| **後端 API** | POST /api/v1/candidates/{candidateId}/decision | 使用 Mock 數據 |

---

## 模組六：面試流程

### 📍 對應頁面

| 路徑 | 頁面名稱 |
|------|---------|
| `/employee/ai-interview` | AI 智慧面試 |

### ✅ 已完成功能

| 功能 | 說明 | 對應檔案 |
|------|------|----------|
| **面試邀約發送** | Modal 確認後顯示發送成功通知，含面試時間 | `job-candidates-page.component.ts` |
| **面試方式選擇** | 現場面試、線上面試、電話面試 | `job-candidates-page.component.html` |
| **AI 智慧面試頁面** | 基礎頁面框架（進入面試評核按鈕） | `ai-interview-page.component.ts` |

### ❌ 未完成功能

| 功能 | 規劃內容 | 狀態 |
|------|---------|------|
| **面試排程管理** | 安排面試時間、地點、面試官 | 僅有 Modal |
| **候選人回覆** | 確認/改期/拒絕 | 待開發 |
| **面試評分紀錄** | 面試官填寫評分與建議 | 待開發 |
| **錄取決策** | 彙總面試結果，決定是否錄取 | 待開發 |
| **面試記錄資料表** | Interviews 資料表 | 待開發 |
| **後端 API** | POST /api/v1/candidates/{candidateId}/interviews | 使用 Mock 數據 |

---

## 模組七：感謝信流程

### 📍 對應頁面

> 無獨立對應頁面

### ✅ 已完成功能

| 功能 | 說明 | 對應檔案 |
|------|------|----------|
| **婉拒通知** | 婉拒時顯示「已婉拒 XXX，將發送感謝信」通知 | `job-candidates-page.component.ts` |

### ❌ 未完成功能

| 功能 | 規劃內容 | 狀態 |
|------|---------|------|
| **感謝信範本管理** | 預設範本，變數替換（{{candidateName}}、{{jobTitle}}） | 待開發 |
| **自動發送觸發** | Rejected 時自動發送 | 待開發 |
| **發送記錄與追蹤** | ThankYouLetterLogs 資料表 | 待開發 |
| **Email 發送服務** | 整合 Email 服務 | 待開發 |
| **多語系範本** | 依候選人偏好語言選擇範本 | 待開發 |
| **後端 API** | POST /api/v1/candidates/{candidateId}/send-thank-you | 待開發 |

---

## 📊 整體開發統計

### 已開發頁面清單

| 模組 | 頁面路徑 | 頁面名稱 | 主要功能 |
|------|---------|---------|---------|
| 職能管理 | `/competency/framework` | 職能基準庫 | 核心/管理/KSA 職能管理 |
| 職能管理 | `/competency/job-description` | 職務說明書管理 | JD 列表、詳細資訊、PDF 匯出 |
| 職能管理 | `/competency/job-description/create` | 新增職務說明書 | 三種模式建立 JD |
| 職能管理 | `/competency/grade-matrix` | 職等職級矩陣 | 職等薪資範圍管理 |
| 職能管理 | `/competency/assessment` | 職能評核 | 評核排程與結果 |
| 職能管理 | `/competency/gap-analysis` | 缺口分析 | 職能缺口報告 |
| 員工管理 | `/employee/jobs` | 招募職缺管理 | 職缺發布與管理 |
| 員工管理 | `/employee/job-candidates` | 職缺候選人列表 | AI 評分、面試邀約 |
| 員工管理 | `/employee/profile-detail` | 候選人檔案解析 | AI 履歷分析報告 |
| 員工管理 | `/employee/ai-interview` | AI 智慧面試 | 面試評核（框架） |

### 功能完成度統計

```
模組一：職務說明書與職能設定  ████████████████████░  95%
模組二：職缺發布與人力銀行    ████████████░░░░░░░░░  60%
模組三：履歷匯入              ██████████░░░░░░░░░░░  50%
模組四：AI 履歷評分           ██████████████████░░░  90%
模組五：面試邀約決策          █████████████████░░░░  85%
模組六：面試流程              ████████░░░░░░░░░░░░░  40%
模組七：感謝信流程            ██░░░░░░░░░░░░░░░░░░░  10%
────────────────────────────────────────────────────
整體進度                      █████████████░░░░░░░░  61%
```

### 後端 API 開發狀態

| 狀態 | 說明 |
|------|------|
| 🔴 **未開發** | 所有後端 API 皆使用前端 Mock 數據模擬 |

#### 規劃中的 API 列表

| API | 用途 | 狀態 |
|-----|------|------|
| `POST /api/v1/jds` | 建立職務說明書 | 待開發 |
| `GET /api/v1/jds` | 查詢 JD 列表 | 待開發 |
| `GET /api/v1/jds/{jdId}` | 取得 JD 完整內容 | 待開發 |
| `POST /api/v1/jds/{jdId}/competencies` | 綁定職能需求 | 待開發 |
| `GET /api/v1/competencies` | 查詢職能基準庫 | 待開發 |
| `POST /api/v1/jobs` | 建立職缺 | 待開發 |
| `PATCH /api/v1/jobs/{jobId}/status` | 更新職缺狀態 | 待開發 |
| `POST /api/v1/jobs/{jobId}/publish` | 發布職缺至人力銀行 | 待開發 |
| `POST /api/v1/jobs/{jobId}/import-resumes` | 匯入履歷 | 待開發 |
| `POST /api/v1/ai-scoring/trigger` | 觸發 AI 評分 | 待開發 |
| `GET /api/v1/candidates/{candidateId}/scoring` | 取得 AI 評分結果 | 待開發 |
| `POST /api/v1/candidates/{candidateId}/decision` | 邀約決策 | 待開發 |
| `POST /api/v1/candidates/batch-decision` | 批次邀約決策 | 待開發 |
| `POST /api/v1/candidates/{candidateId}/interviews` | 建立面試排程 | 待開發 |
| `PATCH /api/v1/interviews/{interviewId}/evaluation` | 更新面試評分 | 待開發 |
| `POST /api/v1/candidates/{candidateId}/send-thank-you` | 發送感謝信 | 待開發 |

---

## 🎯 Demo 建議流程

基於目前開發完成度，建議的 Demo 流程：

### Step 1：職能基準庫
1. 進入 `/competency/framework`
2. 展示三個分頁：核心職能、管理職能、KSA 職能
3. 點擊核心職能「溝通表達」展開 L1-L6 等級
4. 展示等級累進說明（L3 = 具備 L1+L2+L3 行為指標）

### Step 2：職務說明書管理
1. 進入 `/competency/job-description`
2. 展示 9 份 JD 範本列表
3. 點擊「財務長」查看詳細資訊 Modal
4. 展示 12 區塊結構化內容
5. 展示職能需求表格（名稱、等級、權重）
6. 點擊「匯出 PDF」下載 A4 格式文件

### Step 3：新增職務說明書
1. 進入 `/competency/job-description/create`
2. 選擇「AI 職務撰寫助手」模式
3. 展示基本資訊設定
4. 展示職能需求選擇（核心＋管理＋KSA，含權重）
5. 展示 12 區塊內容編輯
6. 點擊生成，展示全畫面動畫
7. 展示生成結果預覽

### Step 4：招募職缺管理
1. 進入 `/employee/jobs`
2. 展示 6 個職缺列表
3. 點擊「發布職缺」，選擇 JD 範本
4. 展示自動帶入職稱、部門、描述

### Step 5：職缺候選人列表
1. 進入 `/employee/job-candidates`
2. 展示 15 位候選人（初始為未評分狀態）
3. 點擊「批量 AI 評分」
4. 展示全畫面 AI 評分動畫
5. 展示分數從 0 跑到實際分數的動畫效果
6. 展示 O/X 決策按鈕

### Step 6：候選人檔案解析
1. 點擊「查看詳情」進入 `/employee/profile-detail`
2. 展示原始履歷預覽（左側）
3. 展示 AI 履歷解析報告（右側）
4. 展示職能需求匹配分析（分數、等級、證據）
5. 展示 AI 綜合建議（優勢、不足、面試建議）

### Step 7：面試邀約
1. 返回候選人列表
2. 點擊「✓」邀約按鈕
3. 展示面試邀約 Modal
4. 選擇日期、時間、面試官、面試方式
5. 點擊發送邀請
6. 展示成功通知，狀態更新為「已安排面試」

### Step 8：婉拒候選人
1. 點擊「✕」婉拒按鈕
2. 展示婉拒通知（將發送感謝信）
3. 狀態更新為「已婉拒」

---

## 📝 備註

- 所有數據皆為前端 Mock 數據，無後端 API 連接
- PDF 匯出功能使用 `jspdf` + `html2canvas` 實作
- AI 評分功能為模擬動畫，非真實 AI 運算
- 面試邀約後無實際 Email 發送功能

---

*報告產生時間：2025-12-21*


import{a as z}from"./chunk-WBP244A2.js";import{i as N,j as $,k as K}from"./chunk-POFP4LN5.js";import"./chunk-PT7OKD4P.js";import{a as fe}from"./chunk-MY43ZI55.js";import{b as ge}from"./chunk-6KPOWU4K.js";import{$a as F,A as D,Da as _,Ia as O,Ja as ce,Ka as y,La as T,M as le,Ma as Q,Na as V,Oa as pe,Pa as P,Ra as q,S as w,Sa as b,Ta as v,U as I,Ua as i,Va as a,Wa as p,Xa as E,Ya as g,Za as h,ab as A,ba as f,bb as B,ca as x,cb as l,db as d,eb as C,fb as W,gb as de,ib as R,j as k,jb as me,rb as H,va as se,vb as ue,xa as s}from"./chunk-Y462IJR5.js";import{a as J,b as Z}from"./chunk-JKOY2XUY.js";var L=class o{departmentOptions=[{value:"all",label:"\u6240\u6709\u90E8\u9580"},{value:"RD",label:"\u7814\u767C\u90E8"},{value:"HR",label:"\u4EBA\u8CC7\u90E8"},{value:"Sales",label:"\u696D\u52D9\u90E8"},{value:"Marketing",label:"\u884C\u92B7\u90E8"}];competencyTypeOptions=[{value:"all",label:"\u6240\u6709\u8077\u80FD"},{value:"technical",label:"\u6280\u8853\u8077\u80FD"},{value:"management",label:"\u7BA1\u7406\u8077\u80FD"},{value:"soft",label:"\u8EDF\u6280\u80FD"}];levelOptions=[{value:"all",label:"\u6240\u6709\u8077\u7D1A"},{value:"staff",label:"\u4E00\u822C\u54E1\u5DE5"},{value:"middle",label:"\u4E2D\u968E\u4E3B\u7BA1"},{value:"senior",label:"\u9AD8\u968E\u4E3B\u7BA1"}];viewLevelOptions=[{value:"org",label:"\u7D44\u7E54\u5C64\u7D1A"},{value:"dept",label:"\u90E8\u9580\u5C64\u7D1A"},{value:"emp",label:"\u54E1\u5DE5\u5C64\u7D1A"}];heatmapDepartments=["\u7814\u767C\u90E8","\u696D\u52D9\u90E8","\u884C\u92B7\u90E8","\u4EBA\u8CC7\u90E8","\u8CA1\u52D9\u90E8","\u5BA2\u670D\u90E8","\u7522\u54C1\u90E8","\u8A2D\u8A08\u90E8"];competenciesMap={core:["\u6E9D\u901A\u5354\u8ABF","\u5718\u968A\u5408\u4F5C","\u554F\u984C\u89E3\u6C7A","\u5275\u65B0\u601D\u7DAD","\u5B78\u7FD2\u80FD\u529B"],professional:["\u5C08\u696D\u6280\u8853","\u6578\u64DA\u5206\u6790","\u5C08\u6848\u7BA1\u7406","\u6D41\u7A0B\u512A\u5316","\u54C1\u8CEA\u7BA1\u7406"],management:["\u9818\u5C0E\u7D71\u5FA1","\u6C7A\u7B56\u80FD\u529B","\u76EE\u6A19\u7BA1\u7406","\u8CC7\u6E90\u914D\u7F6E","\u7E3E\u6548\u7BA1\u7406"]};getHeatmapData(e){let t;e.competencyType==="all"?t=[...this.competenciesMap.core,...this.competenciesMap.professional,...this.competenciesMap.management]:e.competencyType==="technical"?t=this.competenciesMap.professional:e.competencyType==="management"?t=this.competenciesMap.management:e.competencyType==="soft"?t=this.competenciesMap.core:t=[...this.competenciesMap.core,...this.competenciesMap.professional,...this.competenciesMap.management];let n=this.heatmapDepartments;if(e.department!=="all"){let m={RD:"\u7814\u767C\u90E8",HR:"\u4EBA\u8CC7\u90E8",Sales:"\u696D\u52D9\u90E8",Marketing:"\u884C\u92B7\u90E8"}[e.department];m&&(n=[m])}let r=[];return n.forEach(c=>{t.forEach(m=>{let u=Math.floor(Math.random()*70)+30;c.includes("\u7814\u767C")&&m.includes("\u6280\u8853")&&(u+=15),c.includes("\u696D\u52D9")&&m.includes("\u6E9D\u901A")&&(u+=15),c.includes("\u4EBA\u8CC7")&&m.includes("\u5354\u8ABF")&&(u+=15),c.includes("\u8CA1\u52D9")&&m.includes("\u5206\u6790")&&(u+=15),u=Math.min(100,Math.max(0,u));let M=70;r.push({department:c,competency:m,score:u,required:M,gap:M-u})})}),k(r).pipe(D(300))}getHeatmapStats(e){let t=e.map(m=>m.score),n=parseFloat((t.reduce((m,u)=>m+u,0)/t.length).toFixed(1)),r=e.filter(m=>m.score>=90).length,c=e.filter(m=>m.score<50).length;return{avgScore:n,excellentCount:r,needTrainingCount:c}}nineBoxCategories=[{key:"develop",title:"\u5F85\u958B\u767C",subtitle:"\u4F4E\u7E3E\u6548\u9AD8\u6F5B\u529B",color:"#E3C088",bgGradient:"linear-gradient(135deg, rgba(227, 192, 136, 0.15) 0%, rgba(227, 192, 136, 0.25) 100%)"},{key:"potential",title:"\u6F5B\u529B\u80A1",subtitle:"\u4E2D\u7E3E\u6548\u9AD8\u6F5B\u529B",color:"#7FB095",bgGradient:"linear-gradient(135deg, rgba(127, 176, 149, 0.15) 0%, rgba(127, 176, 149, 0.25) 100%)"},{key:"star",title:"\u2B50 \u660E\u661F\u54E1\u5DE5",subtitle:"\u9AD8\u7E3E\u6548\u9AD8\u6F5B\u529B",color:"#8DA399",bgGradient:"linear-gradient(135deg, rgba(141, 163, 153, 0.15) 0%, rgba(141, 163, 153, 0.3) 100%)"},{key:"risk",title:"\u98A8\u96AA\u54E1\u5DE5",subtitle:"\u4F4E\u7E3E\u6548\u4E2D\u6F5B\u529B",color:"#C77F7F",bgGradient:"linear-gradient(135deg, rgba(199, 127, 127, 0.15) 0%, rgba(199, 127, 127, 0.25) 100%)"},{key:"stable",title:"\u7A69\u5B9A\u54E1\u5DE5",subtitle:"\u4E2D\u7E3E\u6548\u4E2D\u6F5B\u529B",color:"#8DA8BE",bgGradient:"linear-gradient(135deg, rgba(141, 168, 190, 0.15) 0%, rgba(141, 168, 190, 0.25) 100%)"},{key:"specialist",title:"\u6838\u5FC3\u9AA8\u5E79",subtitle:"\u9AD8\u7E3E\u6548\u4E2D\u6F5B\u529B",color:"#7F9CA0",bgGradient:"linear-gradient(135deg, rgba(127, 156, 160, 0.15) 0%, rgba(127, 156, 160, 0.25) 100%)"},{key:"exit",title:"\u6DD8\u6C70\u540D\u55AE",subtitle:"\u4F4E\u7E3E\u6548\u4F4E\u6F5B\u529B",color:"#858E96",bgGradient:"linear-gradient(135deg, rgba(133, 142, 150, 0.15) 0%, rgba(133, 142, 150, 0.25) 100%)"},{key:"need-improve",title:"\u9700\u6539\u5584",subtitle:"\u4E2D\u7E3E\u6548\u4F4E\u6F5B\u529B",color:"#B87D7B",bgGradient:"linear-gradient(135deg, rgba(184, 125, 123, 0.15) 0%, rgba(184, 125, 123, 0.25) 100%)"},{key:"expert",title:"\u5C08\u696D\u5C08\u5BB6",subtitle:"\u9AD8\u7E3E\u6548\u4F4E\u6F5B\u529B",color:"#D6A28C",bgGradient:"linear-gradient(135deg, rgba(214, 162, 140, 0.15) 0%, rgba(214, 162, 140, 0.25) 100%)"}];getNineBoxEmployees(e){let t=["\u738B\u5C0F\u660E","\u674E\u5C0F\u83EF","\u5F35\u5927\u540C","\u9673\u7F8E\u73B2","\u6797\u5FD7\u5049","\u9EC3\u96C5\u82B3","\u5433\u5EFA\u5B8F","\u5468\u6021\u541B","\u8521\u660E\u54F2","\u8A31\u96C5\u742A","\u912D\u5BB6\u8C6A","\u694A\u6DD1\u82AC"],n=["\u7814\u767C\u90E8","\u4EBA\u8CC7\u90E8","\u696D\u52D9\u90E8","\u884C\u92B7\u90E8"],r=["\u5DE5\u7A0B\u5E2B","\u5C08\u54E1","\u4E3B\u7BA1","\u7D93\u7406"],c=["staff","middle","senior"],u=t.map((M,S)=>{let G=Math.floor(Math.random()*100),j=Math.floor(Math.random()*100),Y=this.calculateNineBoxCategory(G,j);return{id:`emp-${S+1}`,name:M,department:n[S%n.length],position:r[S%r.length],level:c[S%c.length],performance:G,potential:j,category:Y}});if(e.department!=="all"){let M={rd:"\u7814\u767C\u90E8",hr:"\u4EBA\u8CC7\u90E8",sales:"\u696D\u52D9\u90E8",marketing:"\u884C\u92B7\u90E8"};u=u.filter(S=>S.department===M[e.department])}return e.level!=="all"&&(u=u.filter(M=>M.level===e.level)),k(u).pipe(D(300))}calculateNineBoxCategory(e,t){let n=e>=66?"high":e>=33?"mid":"low",r=t>=66?"high":t>=33?"mid":"low";return{"high-high":"star","mid-high":"potential","low-high":"develop","high-mid":"specialist","mid-mid":"stable","low-mid":"risk","high-low":"expert","mid-low":"need-improve","low-low":"exit"}[`${n}-${r}`]}getLearningProgress(){return k([{title:"\u6574\u9AD4\u57F9\u8A13\u5B8C\u6210\u7387",value:72,color:"#8DA399"},{title:"\u6838\u5FC3\u8077\u80FD\u8986\u84CB\u7387",value:85,color:"#C9A88C"},{title:"\u8AB2\u7A0B\u53C3\u8207\u5EA6",value:68,color:"#7F9CA0"},{title:"\u8A8D\u8B49\u901A\u904E\u7387",value:91,color:"#A89BB5"}]).pipe(D(200))}getCourses(){return k([{id:"c1",title:"\u9818\u5C0E\u529B\u57FA\u790E\u8AB2\u7A0B",level:"basic",duration:"8\u5C0F\u6642",participants:45,description:"\u57F9\u990A\u65B0\u4EFB\u4E3B\u7BA1\u7684\u57FA\u790E\u9818\u5C0E\u6280\u80FD\u8207\u5718\u968A\u7BA1\u7406\u80FD\u529B",progress:100},{id:"c2",title:"\u9032\u968E\u5C08\u6848\u7BA1\u7406",level:"advanced",duration:"16\u5C0F\u6642",participants:28,description:"\u6DF1\u5165\u5B78\u7FD2\u5C08\u6848\u898F\u5283\u3001\u98A8\u96AA\u7BA1\u7406\u8207\u8DE8\u90E8\u9580\u5354\u8ABF",progress:65},{id:"c3",title:"\u7B56\u7565\u601D\u7DAD\u5DE5\u4F5C\u574A",level:"expert",duration:"24\u5C0F\u6642",participants:12,description:"\u9AD8\u968E\u4E3B\u7BA1\u7B56\u7565\u5236\u5B9A\u8207\u5546\u696D\u6C7A\u7B56\u80FD\u529B\u57F9\u990A",progress:30},{id:"c4",title:"\u6E9D\u901A\u6280\u5DE7\u8A13\u7DF4",level:"basic",duration:"6\u5C0F\u6642",participants:60,description:"\u6709\u6548\u6E9D\u901A\u3001\u7C21\u5831\u6280\u5DE7\u8207\u8DE8\u6587\u5316\u6E9D\u901A\u80FD\u529B",progress:85}]).pipe(D(300))}getPathSteps(e){return k([{name:"\u5165\u8077\u57F9\u8A13",status:"completed"},{name:"\u57FA\u790E\u6280\u80FD",status:"completed"},{name:"\u5C08\u696D\u6DF1\u5316",status:"current"},{name:"\u7BA1\u7406\u6280\u80FD",status:"pending"},{name:"\u9818\u5C0E\u529B",status:"pending"}]).pipe(D(200))}getTimelineData(){return k(["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"].map(t=>({month:t,courses:Math.floor(Math.random()*10)+5,hours:Math.floor(Math.random()*100)+50,completion:Math.floor(Math.random()*30)+60}))).pipe(D(300))}getSkillTreeData(){return k({name:"\u8077\u80FD\u767C\u5C55",children:[{name:"\u6280\u8853\u8077\u80FD",children:[{name:"\u7A0B\u5F0F\u958B\u767C",value:85},{name:"\u7CFB\u7D71\u8A2D\u8A08",value:70},{name:"\u8CC7\u6599\u5206\u6790",value:65}]},{name:"\u7BA1\u7406\u8077\u80FD",children:[{name:"\u5C08\u6848\u7BA1\u7406",value:75},{name:"\u5718\u968A\u9818\u5C0E",value:60},{name:"\u7E3E\u6548\u7BA1\u7406",value:55}]},{name:"\u8EDF\u6280\u80FD",children:[{name:"\u6E9D\u901A\u5354\u8ABF",value:80},{name:"\u554F\u984C\u89E3\u6C7A",value:72},{name:"\u5275\u65B0\u601D\u7DAD",value:68}]}]}).pipe(D(300))}getKeyTalentMetrics(){return k([{title:"\u95DC\u9375\u8077\u4F4D\u8986\u84CB\u7387",value:"85%",color:"#7FB095",description:"\u8CA1\u52D9\u7D93\u7406\u6709 2 \u4F4D\u63A5\u73ED\u4EBA\u5019\u9078"},{title:"\u9AD8\u98A8\u96AA\u4EBA\u624D\u9810\u8B66",value:"3 \u4EBA",color:"#C77F7F",description:"\u96E2\u8077\u50BE\u5411 > 60%",actionLabel:"\u555F\u52D5\u7559\u624D\u8A08\u756B"},{title:"\u4EBA\u624D\u6D41\u5931\u6210\u672C\u4F30\u7B97",value:"NT$ 1,500,000",color:"#E3C088",description:"\u66FF\u63DB\u6210\u672C + \u57F9\u8A13\u6210\u672C + \u7522\u51FA\u640D\u5931"},{title:"\u5916\u90E8\u6316\u89D2\u98A8\u96AA\u8A55\u4F30",value:"\u4E2D\u7B49",color:"#7F9CA0",description:"\u5E02\u5834\u85AA\u8CC7\u5C0D\u6BD4\u3001\u7522\u696D\u6436\u4EBA\u71B1\u5EA6"}]).pipe(D(200))}getRiskAlerts(){return k([{id:"t001",name:"\u5F35\u8CC7\u6DF1",department:"\u7814\u767C\u90E8",position:"\u6280\u8853\u4E3B\u7BA1",riskScore:85,riskLevel:"high",factors:["\u5E02\u5834\u85AA\u8CC7\u843D\u5DEE 25%","\u8FD1\u671F\u7E3E\u6548\u6CE2\u52D5","\u5718\u968A\u885D\u7A81\u8A18\u9304"]},{id:"t002",name:"\u674E\u5C08\u5BB6",department:"\u7522\u54C1\u90E8",position:"\u7522\u54C1\u7D93\u7406",riskScore:78,riskLevel:"high",factors:["\u5916\u90E8\u6316\u89D2\u63A5\u89F8","\u6649\u5347\u53D7\u963B","\u5DE5\u4F5C\u6EFF\u610F\u5EA6\u4E0B\u964D"]},{id:"t003",name:"\u738B\u4E3B\u4EFB",department:"\u696D\u52D9\u90E8",position:"\u696D\u52D9\u4E3B\u4EFB",riskScore:72,riskLevel:"high",factors:["\u7E3E\u6548\u76EE\u6A19\u58D3\u529B\u5927","\u5DE5\u4F5C\u751F\u6D3B\u5E73\u8861\u5DEE","EAP \u4F7F\u7528\u983B\u7E41"]},{id:"t004",name:"\u9673\u7D93\u7406",department:"\u884C\u92B7\u90E8",position:"\u884C\u92B7\u7D93\u7406",riskScore:68,riskLevel:"medium",factors:["\u8FD1\u671F\u5BB6\u5EAD\u56E0\u7D20","\u8077\u6DAF\u767C\u5C55\u4E0D\u660E\u78BA"]},{id:"t005",name:"\u6797\u7E3D\u76E3",department:"\u8CA1\u52D9\u90E8",position:"\u8CA1\u52D9\u7E3D\u76E3",riskScore:65,riskLevel:"medium",factors:["\u5DE5\u4F5C\u5026\u6020\u5FB5\u5146","\u57F9\u8A13\u8CC7\u6E90\u4E0D\u8DB3"]}]).pipe(D(300))}getSuccessionPlans(){return k([{position:"\u6280\u8853\u9577 (CTO)",coverage:"high",coverageText:"\u8986\u84CB\u826F\u597D",successors:[{rank:1,name:"\u6797\u5FD7\u5049",readiness:85},{rank:2,name:"\u9EC3\u96C5\u82B3",readiness:70}]},{position:"\u8CA1\u52D9\u9577 (CFO)",coverage:"medium",coverageText:"\u9700\u8981\u52A0\u5F37",successors:[{rank:1,name:"\u9673\u7F8E\u73B2",readiness:60}]},{position:"\u696D\u52D9\u7E3D\u76E3",coverage:"low",coverageText:"\u98A8\u96AA\u8F03\u9AD8",successors:[]},{position:"\u4EBA\u8CC7\u7E3D\u76E3",coverage:"high",coverageText:"\u8986\u84CB\u826F\u597D",successors:[{rank:1,name:"\u5468\u6021\u541B",readiness:80},{rank:2,name:"\u8521\u660E\u54F2",readiness:65}]}]).pipe(D(300))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=le({token:o,factory:o.\u0275fac,providedIn:"root"})};var be=["heatmapChart"],ae=(o,e)=>e.value,ve=(o,e)=>e.name;function Ce(o,e){if(o&1&&(i(0,"option",10),l(1),a()),o&2){let t=e.$implicit;y("value",t.value),s(),d(t.label)}}function ye(o,e){if(o&1&&(i(0,"option",10),l(1),a()),o&2){let t=e.$implicit;y("value",t.value),s(),d(t.label)}}function Me(o,e){if(o&1&&(i(0,"option",10),l(1),a()),o&2){let t=e.$implicit;y("value",t.value),s(),d(t.label)}}function Ee(o,e){o&1&&(i(0,"div",22),p(1,"i",27),i(2,"span"),l(3,"\u8F09\u5165\u4E2D..."),a()())}function Oe(o,e){if(o&1&&(i(0,"li",41)(1,"span",47),l(2,"\u{1F4DA}"),a(),i(3,"span",48),l(4),a(),i(5,"span",49),l(6),a()()),o&2){let t=e.$implicit;s(4),d(t.name),s(2),C("(\u9810\u4F30\u63D0\u5347 +",t.improvement," \u5206)")}}function Pe(o,e){if(o&1){let t=E();i(0,"h3",31),l(1),a(),i(2,"p",32),l(3),a(),i(4,"div",33)(5,"div",34)(6,"span",35),l(7,"\u7576\u524D\u5206\u6578"),a(),i(8,"span",36),l(9),a()(),i(10,"div",34)(11,"span",35),l(12,"\u8981\u6C42\u5206\u6578"),a(),i(13,"span",37),l(14),a()(),i(15,"div",34)(16,"span",35),l(17,"\u843D\u5DEE"),a(),i(18,"span",36),l(19),a()(),i(20,"div",34)(21,"span",35),l(22,"\u90E8\u9580\u6392\u540D"),a(),i(23,"span",36),l(24),a()()(),i(25,"div",38)(26,"h4",39)(27,"span"),l(28,"\u{1F4A1}"),a(),l(29," AI \u63A8\u85A6\u8AB2\u7A0B "),a(),i(30,"ul",40),b(31,Oe,7,2,"li",41,ve),a()(),i(33,"div",42)(34,"button",43),g("click",function(){f(t);let r=h(2);return x(r.viewHistory())}),p(35,"i",44),l(36," \u67E5\u770B\u6B77\u53F2\u7D00\u9304 "),a(),i(37,"button",45),g("click",function(){f(t);let r=h(2);return x(r.assignTraining())}),p(38,"i",46),l(39," \u6307\u6D3E\u57F9\u8A13\u8AB2\u7A0B "),a()()}if(o&2){let t=e;s(),W("",t.competency," - ",t.department,""),s(2),C("\u8077\u80FD\u72C0\u614B\uFF1A",t.level.label,""),s(5),T("color",t.level.color),s(),C(" ",t.score," \u5206 "),s(5),C(" ",t.requiredScore," \u5206 "),s(4),Q("positive",t.gap>=0)("negative",t.gap<0),s(),W(" ",t.gap>=0?"+":"","",t.gap," \u5206 "),s(5),d(t.rank),s(7),v(t.courses)}}function we(o,e){if(o&1){let t=E();i(0,"div",28),g("click",function(){f(t);let r=h();return x(r.closeDetailModal())}),i(1,"div",29),g("click",function(r){return f(t),x(r.stopPropagation())}),i(2,"button",30),g("click",function(){f(t);let r=h();return x(r.closeDetailModal())}),l(3,"\xD7"),a(),O(4,Pe,40,14),a()()}if(o&2){let t,n=h();s(4),P((t=n.selectedDetail())?4:-1,t)}}var X=class o{heatmapChartRef;talentMapService=w(L);cdr=w(H);heatmapChart=null;resizeHandler=()=>this.heatmapChart?.resize();viewReady=!1;courseDatabase={\u6E9D\u901A\u5354\u8ABF:[{name:"\u9AD8\u6548\u6E9D\u901A\u6280\u5DE7\u5BE6\u6230\u73ED",improvement:8},{name:"\u8DE8\u90E8\u9580\u5354\u4F5C\u5DE5\u4F5C\u574A",improvement:6},{name:"\u885D\u7A81\u7BA1\u7406\u8207\u8AC7\u5224\u6280\u5DE7",improvement:7}],\u5718\u968A\u5408\u4F5C:[{name:"\u5718\u968A\u5EFA\u8A2D\u8207\u5354\u4F5C\u5DE5\u4F5C\u574A",improvement:9},{name:"\u8DE8\u8077\u80FD\u5718\u968A\u5408\u4F5C\u6280\u5DE7",improvement:7},{name:"\u865B\u64EC\u5718\u968A\u7BA1\u7406\u5BE6\u52D9",improvement:8}],\u554F\u984C\u89E3\u6C7A:[{name:"\u908F\u8F2F\u601D\u7DAD\u8207\u554F\u984C\u5206\u6790",improvement:10},{name:"\u7CFB\u7D71\u601D\u8003\u65B9\u6CD5\u8AD6",improvement:8},{name:"\u5275\u610F\u554F\u984C\u89E3\u6C7A\u5DE5\u4F5C\u574A",improvement:9}],\u5275\u65B0\u601D\u7DAD:[{name:"\u8A2D\u8A08\u601D\u8003\u5BE6\u52D9\u8AB2\u7A0B",improvement:11},{name:"\u5275\u65B0\u7BA1\u7406\u8207\u8B8A\u9769\u9818\u5C0E",improvement:9},{name:"TRIZ \u5275\u65B0\u65B9\u6CD5\u8AD6",improvement:10}],\u5B78\u7FD2\u80FD\u529B:[{name:"\u9AD8\u6548\u5B78\u7FD2\u65B9\u6CD5\u8AD6",improvement:8},{name:"\u77E5\u8B58\u7BA1\u7406\u8207\u61C9\u7528",improvement:7},{name:"\u81EA\u4E3B\u5B78\u7FD2\u80FD\u529B\u57F9\u990A",improvement:9}],\u5C08\u696D\u6280\u8853:[{name:"Python \u9032\u968E\u958B\u767C\u8AB2\u7A0B",improvement:12},{name:"\u7CFB\u7D71\u67B6\u69CB\u8A2D\u8A08\u5BE6\u52D9",improvement:10},{name:"\u654F\u6377\u958B\u767C\u65B9\u6CD5\u8AD6",improvement:8}],\u6578\u64DA\u5206\u6790:[{name:"Excel \u9032\u968E\u5206\u6790\u6280\u5DE7",improvement:7},{name:"Power BI \u6578\u64DA\u8996\u89BA\u5316",improvement:9},{name:"SQL \u8CC7\u6599\u5EAB\u67E5\u8A62\u512A\u5316",improvement:8}],\u5C08\u6848\u7BA1\u7406:[{name:"PMP \u5C08\u6848\u7BA1\u7406\u8A8D\u8B49\u8AB2\u7A0B",improvement:12},{name:"\u654F\u6377\u5C08\u6848\u7BA1\u7406\u5BE6\u52D9",improvement:10},{name:"\u5C08\u6848\u98A8\u96AA\u7BA1\u7406\u5DE5\u4F5C\u574A",improvement:8}],\u6D41\u7A0B\u512A\u5316:[{name:"\u7CBE\u5BE6\u7BA1\u7406\u5BE6\u52D9\u8AB2\u7A0B",improvement:9},{name:"\u6D41\u7A0B\u6539\u5584\u65B9\u6CD5\u8AD6",improvement:8},{name:"\u81EA\u52D5\u5316\u6D41\u7A0B\u8A2D\u8A08",improvement:10}],\u54C1\u8CEA\u7BA1\u7406:[{name:"\u516D\u6A19\u6E96\u5DEE\u7DA0\u5E36\u8A8D\u8B49",improvement:11},{name:"\u54C1\u8CEA\u7BA1\u7406\u7CFB\u7D71\u5BE6\u52D9",improvement:9},{name:"SPC \u7D71\u8A08\u88FD\u7A0B\u7BA1\u5236",improvement:8}],\u9818\u5C0E\u7D71\u5FA1:[{name:"\u4E2D\u968E\u4E3B\u7BA1\u9818\u5C0E\u529B\u57F9\u8A13",improvement:10},{name:"\u5718\u968A\u6FC0\u52F5\u8207\u8F14\u5C0E\u6280\u5DE7",improvement:8},{name:"\u8B8A\u9769\u7BA1\u7406\u5BE6\u52D9\u5DE5\u4F5C\u574A",improvement:9}],\u6C7A\u7B56\u80FD\u529B:[{name:"\u7B56\u7565\u601D\u7DAD\u8207\u6C7A\u7B56\u5206\u6790",improvement:10},{name:"\u98A8\u96AA\u8A55\u4F30\u8207\u6C7A\u7B56\u6A21\u578B",improvement:9},{name:"\u6578\u64DA\u9A45\u52D5\u6C7A\u7B56\u5BE6\u52D9",improvement:11}],\u76EE\u6A19\u7BA1\u7406:[{name:"OKR \u76EE\u6A19\u7BA1\u7406\u5BE6\u6230\u73ED",improvement:9},{name:"KPI \u8A2D\u8A08\u8207\u7E3E\u6548\u7BA1\u7406",improvement:8},{name:"\u76EE\u6A19\u9054\u6210\u8FFD\u8E64\u6280\u5DE7",improvement:7}],\u8CC7\u6E90\u914D\u7F6E:[{name:"\u8CC7\u6E90\u898F\u5283\u8207\u914D\u7F6E\u7B56\u7565",improvement:8},{name:"\u9810\u7B97\u7BA1\u7406\u8207\u6210\u672C\u63A7\u5236",improvement:9},{name:"\u4EBA\u529B\u8CC7\u6E90\u6700\u4F73\u5316",improvement:10}],\u7E3E\u6548\u7BA1\u7406:[{name:"\u7E3E\u6548\u8A55\u4F30\u8207\u56DE\u994B\u6280\u5DE7",improvement:9},{name:"\u7E3E\u6548\u6539\u5584\u8A08\u756B\u8A2D\u8A08",improvement:8},{name:"\u6301\u7E8C\u7E3E\u6548\u7BA1\u7406\u5BE6\u52D9",improvement:10}]};departmentOptions=this.talentMapService.departmentOptions;competencyTypeOptions=this.talentMapService.competencyTypeOptions;viewLevelOptions=this.talentMapService.viewLevelOptions;filter=_({viewLevel:"org",department:"all",competencyType:"all"});heatmapData=_([]);stats=_({avgScore:0,excellentCount:0,needTrainingCount:0});loading=_(!1);showDetailModal=_(!1);selectedDetail=_(null);onEscapeKey(){this.showDetailModal()&&this.closeDetailModal()}ngOnInit(){window.addEventListener("resize",this.resizeHandler)}ngAfterViewInit(){this.viewReady=!0,this.loadData()}ngOnDestroy(){window.removeEventListener("resize",this.resizeHandler),this.heatmapChart?.dispose()}loadData(){this.loading.set(!0),this.talentMapService.getHeatmapData(this.filter()).subscribe({next:e=>{this.heatmapData.set(e),this.stats.set(this.talentMapService.getHeatmapStats(e)),this.loading.set(!1),this.cdr.detectChanges(),this.viewReady&&e.length>0&&setTimeout(()=>this.updateChart(e),100)}})}updateFilter(e,t){this.filter.update(n=>Z(J({},n),{[e]:t})),this.loadData()}exportChart(){if(this.heatmapChart){let e=this.heatmapChart.getDataURL({type:"png",pixelRatio:2}),t=document.createElement("a");t.download="heatmap-chart.png",t.href=e,t.click()}}closeDetailModal(){this.showDetailModal.set(!1),this.selectedDetail.set(null),this.cdr.detectChanges()}assignTraining(){console.log("Assigning training for:",this.selectedDetail()),this.closeDetailModal()}viewHistory(){console.log("Viewing history for:",this.selectedDetail())}getScoreLevel(e){return e>=90?{label:"\u8077\u80FD\u512A\u79C0",color:"#2d5f3e"}:e>=70?{label:"\u8077\u80FD\u9054\u6A19",color:"#7FB095"}:e>=50?{label:"\u63A5\u8FD1\u6A19\u6E96",color:"#E3C088"}:{label:"\u9700\u91CD\u9EDE\u57F9\u80B2",color:"#C77F7F"}}getRecommendedCourses(e,t){let n=this.courseDatabase[e]||[{name:`${e}\u57FA\u790E\u57F9\u8A13\u8AB2\u7A0B`,improvement:8},{name:`${e}\u9032\u968E\u5BE6\u6230\u73ED`,improvement:10},{name:`${e}\u5C08\u5BB6\u8A8D\u8B49\u8AB2\u7A0B`,improvement:12}];return t<50?n:t<70?n.slice(0,2):n.slice(0,1)}showCellDetail(e,t,n){let r=this.getScoreLevel(n),c=70,m=n-c,u=Math.floor(Math.random()*5)+1,M=this.getRecommendedCourses(e,n),S={competency:e,department:t,score:n,level:r,requiredScore:c,gap:m,rank:`\u7B2C ${u} \u540D / 8`,courses:M};this.selectedDetail.set(S),this.showDetailModal.set(!0),this.cdr.detectChanges()}updateChart(e){if(!this.heatmapChartRef?.nativeElement)return;this.heatmapChart||(this.heatmapChart=z(this.heatmapChartRef.nativeElement));let t=[...new Set(e.map(u=>u.department))],n=[...new Set(e.map(u=>u.competency))],r=e.map(u=>[n.indexOf(u.competency),t.indexOf(u.department),u.score]),c=this,m={tooltip:{position:"top",formatter:u=>{let M=u,S=n[M.value[0]],G=t[M.value[1]],j=M.value[2],Y=c.getScoreLevel(j);return`
            <div style="padding: 10px;">
              <div style="font-weight: 600; margin-bottom: 8px; font-size: 14px;">
                ${G} - ${S}
              </div>
              <div style="color: #718096; font-size: 13px;">
                \u8077\u80FD\u5206\u6578\uFF1A<strong style="color: ${Y.color};">${j} \u5206</strong><br/>
                \u72C0\u614B\uFF1A<strong style="color: ${Y.color};">${Y.label}</strong>
              </div>
              <div style="margin-top: 8px; font-size: 12px; color: #a0aec0;">
                \u9EDE\u64CA\u67E5\u770B\u8A73\u7D30\u8CC7\u8A0A
              </div>
            </div>
          `},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#E2E4E8",borderWidth:1,extraCssText:"box-shadow: 0 4px 12px rgba(0,0,0,0.15); border-radius: 8px;"},grid:{top:"5%",left:"5%",right:"15%",bottom:"20%",containLabel:!0},xAxis:{type:"category",data:n,splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(245,245,247,0.3)"]}},axisLabel:{rotate:45,interval:0,fontSize:12,color:"#464E56",fontWeight:500},axisLine:{lineStyle:{color:"#E2E4E8"}}},yAxis:{type:"category",data:t,splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(245,245,247,0.3)"]}},axisLabel:{fontSize:12,color:"#464E56",fontWeight:500},axisLine:{lineStyle:{color:"#E2E4E8"}}},visualMap:{min:0,max:100,calculable:!0,orient:"vertical",right:10,bottom:"center",inRange:{color:["#C77F7F","#E3C088","#7FB095","#2d5f3e"]},text:["\u9AD8\u5206","\u4F4E\u5206"],textStyle:{color:"#464E56",fontSize:12}},series:[{name:"\u8077\u80FD\u5206\u6578",type:"heatmap",data:r,label:{show:!0,fontSize:11,color:"#fff",fontWeight:"bold",formatter:u=>String(u.value[2])},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.3)",borderColor:"#fff",borderWidth:2}},itemStyle:{borderColor:"#fff",borderWidth:2,borderRadius:4}}]};this.heatmapChart.setOption(m,!0),this.heatmapChart.off("click"),this.heatmapChart.on("click",u=>{if(u.componentType==="series"&&Array.isArray(u.value)){let M=u.value,S=n[M[0]],G=t[M[1]],j=M[2];this.showCellDetail(S,G,j)}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=I({type:o,selectors:[["app-heatmap-tab"]],viewQuery:function(t,n){if(t&1&&F(be,5),t&2){let r;A(r=B())&&(n.heatmapChartRef=r.first)}},hostBindings:function(t,n){t&1&&g("keydown.escape",function(){return n.onEscapeKey()},!1,se)},standalone:!0,features:[R],decls:50,vars:8,consts:[["heatmapChart",""],[1,"map-card"],[1,"map-card__header"],[1,"map-card__title"],[1,"ri-fire-fill"],[1,"map-card__desc"],[1,"filters"],[1,"filter-group"],["for","viewLevel"],["id","viewLevel",3,"change","value"],[3,"value"],["for","deptFilter"],["id","deptFilter",3,"change","value"],["for","competencyType"],["id","competencyType",3,"change","value"],[1,"stats-bar"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","stat-value--primary"],[1,"stat-value","stat-value--success"],[1,"stat-value","stat-value--danger"],[1,"chart-wrapper"],[1,"chart-loading"],[1,"chart-container"],["type","button",1,"export-btn",3,"click"],[1,"ri-download-2-line"],[1,"modal-overlay"],[1,"ri-loader-4-line"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],["type","button",1,"modal-close",3,"click"],[1,"modal-title"],[1,"modal-subtitle"],[1,"score-grid"],[1,"score-item"],[1,"score-item__label"],[1,"score-item__value"],[1,"score-item__value","score-item__value--muted"],[1,"courses-section"],[1,"courses-title"],[1,"courses-list"],[1,"course-item"],[1,"modal-actions"],["type","button",1,"btn-secondary",3,"click"],[1,"ri-history-line"],["type","button",1,"btn-primary",3,"click"],[1,"ri-graduation-cap-line"],[1,"course-icon"],[1,"course-name"],[1,"course-improvement"]],template:function(t,n){if(t&1){let r=E();i(0,"div",1)(1,"header",2)(2,"h2",3),p(3,"i",4),l(4," \u7D44\u7E54\u8077\u80FD\u71B1\u529B\u5716 (Competency Heatmap) "),a(),i(5,"p",5),l(6," \u5FEB\u901F\u5B9A\u4F4D\u7D44\u7E54\u8077\u80FD\u77ED\u677F\uFF0C\u512A\u5148\u5B89\u6392\u57F9\u8A13\u8CC7\u6E90\u3002\u4F7F\u7528\u7D05\u7DA0\u71C8\u865F\u8996\u89BA\u5316\u5448\u73FE\u5404\u90E8\u9580/\u54E1\u5DE5\u7684\u8077\u80FD\u5F37\u5F31\u3002 "),a()(),i(7,"div",6)(8,"div",7)(9,"label",8),l(10,"\u8996\u5716\u5C64\u7D1A:"),a(),i(11,"select",9),g("change",function(m){return f(r),x(n.updateFilter("viewLevel",m.target.value))}),b(12,Ce,2,2,"option",10,ae),a()(),i(14,"div",7)(15,"label",11),l(16,"\u9078\u64C7\u90E8\u9580:"),a(),i(17,"select",12),g("change",function(m){return f(r),x(n.updateFilter("department",m.target.value))}),b(18,ye,2,2,"option",10,ae),a()(),i(20,"div",7)(21,"label",13),l(22,"\u8077\u80FD\u985E\u578B:"),a(),i(23,"select",14),g("change",function(m){return f(r),x(n.updateFilter("competencyType",m.target.value))}),b(24,Me,2,2,"option",10,ae),a()()(),i(26,"div",15)(27,"div",16)(28,"span",17),l(29,"\u5E73\u5747\u5206\u6578"),a(),i(30,"span",18),l(31),a()(),i(32,"div",16)(33,"span",17),l(34,"\u512A\u79C0\u8077\u80FD\u6578"),a(),i(35,"span",19),l(36),a()(),i(37,"div",16)(38,"span",17),l(39,"\u9700\u57F9\u8A13\u4EBA\u6578"),a(),i(40,"span",20),l(41),a()()(),i(42,"div",21),O(43,Ee,4,0,"div",22),p(44,"div",23,0),a(),i(46,"button",24),g("click",function(){return f(r),x(n.exportChart())}),p(47,"i",25),l(48," \u532F\u51FA PNG "),a()(),O(49,we,5,1,"div",26)}t&2&&(s(11),y("value",n.filter().viewLevel),s(),v(n.viewLevelOptions),s(5),y("value",n.filter().department),s(),v(n.departmentOptions),s(5),y("value",n.filter().competencyType),s(),v(n.competencyTypeOptions),s(7),d(n.stats().avgScore),s(5),d(n.stats().excellentCount),s(5),d(n.stats().needTrainingCount),s(2),P(n.loading()?43:-1),s(6),P(n.showDetailModal()?49:-1))},dependencies:[K,N,$],styles:[".map-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E4E8;padding:30px;margin-bottom:20px}.map-card__header[_ngcontent-%COMP%]{margin-bottom:25px}.map-card__title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#1f2937;margin-bottom:8px;display:flex;align-items:center;gap:10px}.map-card__title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7f9ca0}.map-card__desc[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;line-height:1.6}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;margin-bottom:25px;padding:20px;background:#f5f5f7;border-radius:10px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1f2937;white-space:nowrap}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #E2E4E8;border-radius:8px;background:#fff;color:#1f2937;font-size:14px;cursor:pointer;transition:all .3s ease;min-width:150px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#64748b}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#64748b;box-shadow:0 0 0 3px #64748b1a}.stats-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:25px;padding:25px 20px;background:linear-gradient(135deg,#7f9ca00d,#7f9ca01a);border-radius:10px}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:0 20px}.stat-label[_ngcontent-%COMP%]{display:block;font-size:14px;color:#6b7280;margin-bottom:8px;font-weight:500}.stat-value[_ngcontent-%COMP%]{font-size:36px;font-weight:800;line-height:1.1;letter-spacing:-1px}.stat-value--primary[_ngcontent-%COMP%]{color:#7f9ca0}.stat-value--success[_ngcontent-%COMP%]{color:#7fb095}.stat-value--danger[_ngcontent-%COMP%]{color:#c77f7f}.chart-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.chart-container[_ngcontent-%COMP%]{width:100%;height:500px;min-height:500px;max-width:100%}.chart-loading[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;gap:10px;color:#6b7280;z-index:10}.chart-loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.export-btn[_ngcontent-%COMP%]{margin-top:20px;padding:12px 24px;background:#64748b;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.export-btn[_ngcontent-%COMP%]:hover{background:#475569;transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.export-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:9999;display:flex;align-items:center;justify-content:center;padding:20px;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;max-width:600px;width:90%;position:relative;animation:_ngcontent-%COMP%_slideUp .3s ease;box-shadow:0 20px 60px #0000004d}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-close[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:none;border:none;font-size:28px;cursor:pointer;color:#6b7280;line-height:1;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.modal-close[_ngcontent-%COMP%]:hover{background:#f5f5f7;color:#1f2937}.modal-title[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:5px;font-size:20px;font-weight:700}.modal-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:14px;margin-bottom:20px}.score-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:25px;padding:20px;background:#f5f5f7;border-radius:10px}.score-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.score-item__label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.score-item__value[_ngcontent-%COMP%]{font-size:28px;font-weight:700}.score-item__value--muted[_ngcontent-%COMP%]{color:#6b7280}.score-item__value.positive[_ngcontent-%COMP%]{color:#7fb095}.score-item__value.negative[_ngcontent-%COMP%]{color:#c77f7f}.courses-section[_ngcontent-%COMP%]{margin-bottom:25px}.courses-title[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:15px;font-size:16px;font-weight:600;display:flex;align-items:center;gap:8px}.courses-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}.course-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 15px;background:#fff;border:1px solid #E2E4E8;border-radius:8px;transition:all .2s ease}.course-item[_ngcontent-%COMP%]:hover{border-color:#64748b;box-shadow:0 2px 8px #00000014}.course-icon[_ngcontent-%COMP%]{font-size:16px}.course-name[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#1f2937;font-weight:500}.course-improvement[_ngcontent-%COMP%]{font-size:13px;color:#7fb095;font-weight:600}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding-top:20px;border-top:1px solid #E2E4E8}.btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;background:#f5f5f7;color:#1f2937;border:1px solid #E2E4E8;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:6px}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e7e7ec}.btn-secondary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.btn-primary[_ngcontent-%COMP%]{padding:10px 20px;background:#64748b;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:6px}.btn-primary[_ngcontent-%COMP%]:hover{background:#475569}.btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.map-card[_ngcontent-%COMP%]{padding:20px}.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.filter-group[_ngcontent-%COMP%]{width:100%}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;width:100%}.stats-bar[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.chart-container[_ngcontent-%COMP%]{height:400px;min-height:400px}.modal-content[_ngcontent-%COMP%]{padding:20px}.score-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-secondary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{width:100%;justify-content:center}}"],changeDetection:0})};var Se=["distributionChart"],Te=["scatterChart"],xe=(o,e)=>e.value,ke=(o,e)=>e.id;function De(o,e){if(o&1&&(i(0,"option",11),l(1),a()),o&2){let t=e.$implicit;y("value",t.value),s(),d(t.label)}}function Fe(o,e){if(o&1&&(i(0,"option",11),l(1),a()),o&2){let t=e.$implicit;y("value",t.value),s(),d(t.label)}}function Ae(o,e){if(o&1&&(i(0,"div",35)(1,"div",36),l(2),a(),i(3,"div",37)(4,"span",38),l(5),a(),i(6,"span",39),l(7),a()(),i(8,"div",40)(9,"span",41),l(10),a(),i(11,"span",42),l(12),a()()()),o&2){let t=e.$implicit,n=h(2);Q("draggable",n.simulationMode()),s(2),d(t.name.charAt(0)),s(3),d(t.name),s(2),d(t.department),s(3),C("P",t.performance,""),s(2),C("\u6F5B",t.potential,"")}}function Be(o,e){if(o&1&&(de(0)(1),i(2,"div",28)(3,"div",29)(4,"span",30),l(5),a(),i(6,"span",31),l(7),a()(),i(8,"div",32),l(9),a(),i(10,"div",33),b(11,Ae,13,7,"div",34,ke),a()()),o&2){let t=e.$implicit,n=h(),r=n.getCategoryInfo(t),c=n.employeesByCategory()[t];s(2),T("background",r.bgGradient)("border-color",r.color),s(3),d(r.title),s(2),d(r.subtitle),s(),T("color",r.color),s(),C(" ",c.length," \u4EBA "),s(2),v(c)}}var te=class o{distributionChartRef;scatterChartRef;talentMapService=w(L);cdr=w(H);distributionChart=null;scatterChart=null;viewReady=!1;resizeHandler=()=>{this.distributionChart?.resize(),this.scatterChart?.resize()};departmentOptions=[{value:"all",label:"\u6240\u6709\u90E8\u9580"},{value:"rd",label:"\u7814\u767C\u90E8"},{value:"hr",label:"\u4EBA\u8CC7\u90E8"},{value:"sales",label:"\u696D\u52D9\u90E8"},{value:"marketing",label:"\u884C\u92B7\u90E8"}];levelOptions=this.talentMapService.levelOptions;categories=this.talentMapService.nineBoxCategories;filter=_({department:"all",level:"all"});employees=_([]);loading=_(!1);simulationMode=_(!1);employeesByCategory=ue(()=>{let e=this.employees(),t={star:[],potential:[],develop:[],specialist:[],stable:[],risk:[],expert:[],"need-improve":[],exit:[]};return e.forEach(n=>t[n.category].push(n)),t});gridOrder=["develop","potential","star","risk","stable","specialist","exit","need-improve","expert"];ngOnInit(){window.addEventListener("resize",this.resizeHandler)}ngAfterViewInit(){this.viewReady=!0,this.loadData()}ngOnDestroy(){window.removeEventListener("resize",this.resizeHandler),this.distributionChart?.dispose(),this.scatterChart?.dispose()}loadData(){this.loading.set(!0),this.talentMapService.getNineBoxEmployees(this.filter()).subscribe({next:e=>{this.employees.set(e),this.loading.set(!1),this.cdr.detectChanges(),this.viewReady&&e.length>0&&setTimeout(()=>this.updateCharts(e),100)}})}updateFilter(e,t){this.filter.update(n=>Z(J({},n),{[e]:t})),this.loadData()}toggleSimulationMode(){this.simulationMode.update(e=>!e)}getCategoryInfo(e){return this.categories.find(t=>t.key===e)}getEmployeeCount(e){return this.employeesByCategory()[e].length}exportChart(e){let t=e==="distribution"?this.distributionChart:this.scatterChart;if(t){let n=t.getDataURL({type:"png",pixelRatio:2}),r=document.createElement("a");r.download=`${e}-chart.png`,r.href=n,r.click()}}updateCharts(e){this.updateDistributionChart(e),this.updateScatterChart(e)}updateDistributionChart(e){if(!this.distributionChartRef?.nativeElement)return;this.distributionChart||(this.distributionChart=z(this.distributionChartRef.nativeElement));let t=this.employeesByCategory(),n=this.categories.map(c=>({name:c.title.replace("\u2B50 ",""),value:t[c.key].length,itemStyle:{color:c.color}})).filter(c=>c.value>0),r={tooltip:{trigger:"item",formatter:"{b}: {c} \u4EBA ({d}%)"},legend:{orient:"vertical",right:"5%",top:"center",textStyle:{color:"#6B7280"}},series:[{type:"pie",radius:["40%","70%"],center:["35%","50%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:8,borderColor:"#fff",borderWidth:2},label:{show:!1},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold"}},data:n}]};this.distributionChart.setOption(r)}updateScatterChart(e){if(!this.scatterChartRef?.nativeElement)return;this.scatterChart||(this.scatterChart=z(this.scatterChartRef.nativeElement));let t=e.map(r=>{let c=this.getCategoryInfo(r.category);return{name:r.name,value:[r.performance,r.potential],itemStyle:{color:c.color}}}),n={tooltip:{formatter:r=>{let c=r;return`${c.name}<br/>\u7E3E\u6548: ${c.value[0]}<br/>\u6F5B\u529B: ${c.value[1]}`}},grid:{left:"10%",right:"10%",top:"10%",bottom:"15%"},xAxis:{type:"value",name:"\u7E3E\u6548\u8868\u73FE",nameLocation:"middle",nameGap:30,min:0,max:100,splitLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280"}},yAxis:{type:"value",name:"\u767C\u5C55\u6F5B\u529B",nameLocation:"middle",nameGap:40,min:0,max:100,splitLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280"}},series:[{type:"scatter",symbolSize:15,data:t,emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.3)"}}}],markLine:{silent:!0,lineStyle:{color:"#E8E8EA",type:"dashed"},data:[{xAxis:33},{xAxis:66},{yAxis:33},{yAxis:66}]}};this.scatterChart.setOption(n)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=I({type:o,selectors:[["app-nine-box-tab"]],viewQuery:function(t,n){if(t&1&&(F(Se,5),F(Te,5)),t&2){let r;A(r=B())&&(n.distributionChartRef=r.first),A(r=B())&&(n.scatterChartRef=r.first)}},standalone:!0,features:[R],decls:47,vars:4,consts:[["distributionChart",""],["scatterChart",""],[1,"map-card"],[1,"map-card__header"],[1,"map-card__title"],[1,"ri-grid-fill"],[1,"map-card__desc"],[1,"filters"],[1,"filter-group"],["for","nineBoxDept"],["id","nineBoxDept",3,"change","value"],[3,"value"],["for","nineBoxLevel"],["id","nineBoxLevel",3,"change","value"],["type","button",1,"simulation-btn",3,"click"],[1,"ri-drag-drop-line"],[1,"nine-box-wrapper"],[1,"axis-label","axis-label--y"],[1,"axis-label","axis-label--x"],[1,"nine-box-grid"],[1,"box-cell",3,"background","border-color"],[1,"charts-section"],[1,"section-title"],[1,"chart-combo"],[1,"chart-card"],[1,"chart-container"],["type","button",1,"export-btn",3,"click"],[1,"ri-download-2-line"],[1,"box-cell"],[1,"box-cell__header"],[1,"box-cell__title"],[1,"box-cell__subtitle"],[1,"box-cell__count"],[1,"employee-list"],[1,"employee-card",3,"draggable"],[1,"employee-card"],[1,"employee-avatar"],[1,"employee-info"],[1,"employee-name"],[1,"employee-dept"],[1,"employee-scores"],[1,"score-badge","score-badge--performance"],[1,"score-badge","score-badge--potential"]],template:function(t,n){if(t&1){let r=E();i(0,"div",2)(1,"header",3)(2,"h2",4),p(3,"i",5),l(4," \u4EBA\u624D\u4E5D\u5BAE\u683C (Talent 9-Box Grid) "),a(),i(5,"p",6),l(6," \u5E74\u5EA6\u4EBA\u624D\u76E4\u9EDE\u3001\u6649\u5347\u6C7A\u7B56\u3001\u63A5\u73ED\u4EBA\u898F\u5283\u7684\u5229\u5668\u3002\u652F\u63F4\u62D6\u66F3\u54E1\u5DE5\u982D\u50CF\u9032\u884C\u60C5\u5883\u6A21\u64EC\u3002 "),a()(),i(7,"div",7)(8,"div",8)(9,"label",9),l(10,"\u90E8\u9580\u7BE9\u9078:"),a(),i(11,"select",10),g("change",function(m){return f(r),x(n.updateFilter("department",m.target.value))}),b(12,De,2,2,"option",11,xe),a()(),i(14,"div",8)(15,"label",12),l(16,"\u8077\u7D1A\u7BE9\u9078:"),a(),i(17,"select",13),g("change",function(m){return f(r),x(n.updateFilter("level",m.target.value))}),b(18,Fe,2,2,"option",11,xe),a()(),i(20,"button",14),g("click",function(){return f(r),x(n.toggleSimulationMode())}),p(21,"i",15),l(22," \u60C5\u5883\u6A21\u64EC\u6A21\u5F0F "),a()(),i(23,"div",16)(24,"div",17),l(25," \u767C\u5C55\u6F5B\u529B (Potential) \u2192 "),a(),i(26,"div",18),l(27," \u7E3E\u6548\u8868\u73FE (Performance) \u2192 "),a(),i(28,"div",19),b(29,Be,13,9,"div",20,q),a()(),i(31,"section",21)(32,"h3",22),l(33,"\u4EBA\u624D\u5206\u4F48\u7D71\u8A08"),a(),i(34,"div",23)(35,"div",24),p(36,"div",25,0),i(38,"button",26),g("click",function(){return f(r),x(n.exportChart("distribution"))}),p(39,"i",27),l(40," \u532F\u51FA\u5713\u9905\u5716 PNG "),a()(),i(41,"div",24),p(42,"div",25,1),i(44,"button",26),g("click",function(){return f(r),x(n.exportChart("scatter"))}),p(45,"i",27),l(46," \u532F\u51FA\u6563\u4F48\u5716 PNG "),a()()()()()}t&2&&(s(11),y("value",n.filter().department),s(),v(n.departmentOptions),s(5),y("value",n.filter().level),s(),v(n.levelOptions),s(2),Q("active",n.simulationMode()),s(9),v(n.gridOrder))},dependencies:[K,N,$],styles:[".map-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E4E8;padding:30px}.map-card__header[_ngcontent-%COMP%]{margin-bottom:25px}.map-card__title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#1f2937;margin-bottom:8px;display:flex;align-items:center;gap:10px}.map-card__title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7f9ca0}.map-card__desc[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;line-height:1.6}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;margin-bottom:25px;padding:20px;background:#f5f5f7;border-radius:10px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1f2937;white-space:nowrap}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #E2E4E8;border-radius:8px;background:#fff;color:#1f2937;font-size:14px;cursor:pointer;transition:all .3s ease;min-width:150px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#64748b}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#64748b;box-shadow:0 0 0 3px #64748b1a}.simulation-btn[_ngcontent-%COMP%]{margin-left:auto;padding:10px 15px;background:#fff;border:1px solid #E2E4E8;border-radius:8px;font-size:14px;font-weight:600;color:#1f2937;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.simulation-btn[_ngcontent-%COMP%]:hover{border-color:#64748b;color:#64748b}.simulation-btn.active[_ngcontent-%COMP%]{background:#64748b;border-color:#64748b;color:#fff}.nine-box-wrapper[_ngcontent-%COMP%]{position:relative;margin:30px 0 50px 75px}.axis-label[_ngcontent-%COMP%]{font-weight:700;color:#1f2937;font-size:14px;white-space:nowrap}.axis-label--y[_ngcontent-%COMP%]{position:absolute;left:-95px;top:50%;transform:translateY(-50%) rotate(-90deg)}.axis-label--x[_ngcontent-%COMP%]{text-align:center;margin-bottom:15px}.nine-box-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px}.box-cell[_ngcontent-%COMP%]{border:2px solid;border-radius:12px;padding:20px;min-height:200px}.box-cell__header[_ngcontent-%COMP%]{margin-bottom:8px}.box-cell__title[_ngcontent-%COMP%]{display:block;font-weight:700;color:#1f2937;margin-bottom:4px;font-size:15px}.box-cell__subtitle[_ngcontent-%COMP%]{display:block;font-size:12px;color:#6b7280}.box-cell__count[_ngcontent-%COMP%]{font-size:32px;font-weight:800;margin-bottom:15px;letter-spacing:-1px}.employee-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.employee-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:10px;display:flex;align-items:center;gap:10px;border:1px solid #E2E4E8;transition:all .3s ease}.employee-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 2px 8px #00000014}.employee-card.draggable[_ngcontent-%COMP%]{cursor:move}.employee-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:#64748b;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;flex-shrink:0}.employee-info[_ngcontent-%COMP%]{flex:1;min-width:0}.employee-name[_ngcontent-%COMP%]{display:block;font-weight:600;color:#1f2937;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.employee-dept[_ngcontent-%COMP%]{display:block;font-size:11px;color:#6b7280}.employee-scores[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:11px}.score-badge[_ngcontent-%COMP%]{padding:2px 6px;border-radius:4px;font-weight:600}.score-badge--performance[_ngcontent-%COMP%]{background:#7f9ca033;color:#7f9ca0}.score-badge--potential[_ngcontent-%COMP%]{background:#8da39933;color:#8da399}.charts-section[_ngcontent-%COMP%]{margin-top:30px}.section-title[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:20px;font-size:18px}.chart-combo[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px;margin-bottom:15px}.export-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#64748b;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.export-btn[_ngcontent-%COMP%]:hover{background:#475569;transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.export-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 1400px){.chart-combo[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.nine-box-wrapper[_ngcontent-%COMP%]{margin-left:0}.axis-label--y[_ngcontent-%COMP%]{display:none}.nine-box-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.simulation-btn[_ngcontent-%COMP%]{margin-left:0;width:100%;justify-content:center}}"],changeDetection:0})};var ze=["timelineChart"],Ie=["skillTreeChart"],_e=(o,e)=>e.value,Re=(o,e)=>e.title,Le=(o,e)=>e.id,Ve=(o,e)=>e.name;function He(o,e){if(o&1&&(i(0,"option",11),l(1),a()),o&2){let t=e.$implicit;y("value",t.value),s(),d(t.label)}}function Ne(o,e){if(o&1&&(i(0,"div",23)(1,"span",24),l(2),a(),i(3,"span",25),l(4),a(),i(5,"div",26),p(6,"div",27),a()()),o&2){let t=e.$implicit;T("border-top-color",t.color),s(2),d(t.title),s(2),C("",t.value,"%"),s(2),T("width",t.value,"%")("background",t.color)}}function $e(o,e){if(o&1&&(i(0,"option",11),l(1),a()),o&2){let t=e.$implicit;y("value",t.value),s(),d(t.label)}}function Ke(o,e){o&1&&p(0,"i",36)}function je(o,e){if(o&1&&(O(0,Ke,1,0,"i",36),i(1,"span"),l(2),a()),o&2){let t=e.$implicit,n=e.$index;P(n>0?0:-1),s(),pe("path-step path-step--",t.status,""),s(),C(" ",t.name," ")}}function Qe(o,e){if(o&1&&(i(0,"div",31)(1,"h3",32),l(2,"\u{1F3AF} \u500B\u4EBA\u5B78\u7FD2\u8DEF\u5F91"),a(),i(3,"p",33),l(4,"\u6839\u64DA\u8077\u80FD\u8A55\u4F30\u7D50\u679C\uFF0CAI \u63A8\u85A6\u4EE5\u4E0B\u5B78\u7FD2\u8DEF\u5F91"),a(),i(5,"div",34),b(6,je,3,5,"span",35,Ve),a()()),o&2){let t=h(2);s(6),v(t.pathSteps())}}function Ge(o,e){if(o&1){let t=E();i(0,"div",28)(1,"div",8)(2,"label",29),l(3,"\u9078\u64C7\u54E1\u5DE5:"),a(),i(4,"select",30),g("change",function(r){f(t);let c=h();return x(c.selectEmployee(r.target.value))}),b(5,$e,2,2,"option",11,_e),a()()(),O(7,Qe,8,0,"div",31)}if(o&2){let t=h();s(4),y("value",t.selectedEmployee()),s(),v(t.employeeOptions),s(2),P(t.selectedEmployee()&&t.pathSteps().length>0?7:-1)}}function Ye(o,e){o&1&&l(0," \u57FA\u790E ")}function qe(o,e){o&1&&l(0," \u9032\u968E ")}function We(o,e){o&1&&l(0," \u5C08\u5BB6 ")}function Ue(o,e){if(o&1&&(i(0,"article",22)(1,"header",37)(2,"span",38),O(3,Ye,1,0)(4,qe,1,0)(5,We,1,0),a()(),i(6,"h4",39),l(7),a(),i(8,"div",40)(9,"span"),p(10,"i",41),l(11),a(),i(12,"span"),p(13,"i",42),l(14),a()(),i(15,"p",43),l(16),a(),i(17,"footer",44)(18,"div",45)(19,"div",46),p(20,"div",47),a(),i(21,"span"),l(22),a()()()()),o&2){let t,n=e.$implicit,r=h();s(2),V(r.getCourseLevelClass(n.level)),s(),P((t=n.level)==="basic"?3:t==="advanced"?4:t==="expert"?5:-1),s(4),d(n.title),s(4),C(" ",n.duration,""),s(3),C(" ",n.participants," \u4EBA"),s(2),d(n.description),s(4),T("width",n.progress,"%"),s(2),C("",n.progress,"%")}}var ne=class o{timelineChartRef;skillTreeChartRef;talentMapService=w(L);cdr=w(H);timelineChart=null;skillTreeChart=null;viewReady=!1;resizeHandler=()=>{this.timelineChart?.resize(),this.skillTreeChart?.resize()};viewLevelOptions=[{value:"org",label:"\u7D44\u7E54\u5C64\u7D1A"},{value:"dept",label:"\u90E8\u9580\u5C64\u7D1A"},{value:"individual",label:"\u500B\u4EBA\u5C64\u7D1A"}];employeeOptions=[{value:"",label:"\u8ACB\u9078\u64C7\u54E1\u5DE5..."},{value:"e001",label:"\u738B\u5C0F\u660E (\u524D\u7AEF\u5DE5\u7A0B\u5E2B)"},{value:"e002",label:"\u674E\u5C0F\u83EF (\u696D\u52D9\u5C08\u54E1)"},{value:"e003",label:"\u5F35\u5927\u540C (\u884C\u92B7\u5C08\u54E1)"}];viewLevel=_("org");selectedEmployee=_("");progressData=_([]);courses=_([]);pathSteps=_([]);timelineData=_([]);skillTreeData=_(null);loading=_(!1);ngOnInit(){window.addEventListener("resize",this.resizeHandler)}ngAfterViewInit(){this.viewReady=!0,this.loadData()}ngOnDestroy(){window.removeEventListener("resize",this.resizeHandler),this.timelineChart?.dispose(),this.skillTreeChart?.dispose()}loadData(){this.loading.set(!0),this.talentMapService.getLearningProgress().subscribe(e=>{this.progressData.set(e),this.cdr.detectChanges()}),this.talentMapService.getCourses().subscribe(e=>{this.courses.set(e),this.cdr.detectChanges()}),this.talentMapService.getTimelineData().subscribe(e=>{this.timelineData.set(e),this.cdr.detectChanges(),this.viewReady&&e.length>0&&setTimeout(()=>this.updateTimelineChart(e),100)}),this.talentMapService.getSkillTreeData().subscribe(e=>{this.skillTreeData.set(e),this.loading.set(!1),this.cdr.detectChanges(),this.viewReady&&e&&setTimeout(()=>this.updateSkillTreeChart(e),100)})}switchViewLevel(e){this.viewLevel.set(e),e==="individual"&&this.selectedEmployee()&&this.loadIndividualPath()}selectEmployee(e){this.selectedEmployee.set(e),e&&this.loadIndividualPath()}loadIndividualPath(){let e=this.selectedEmployee();e&&this.talentMapService.getPathSteps(e).subscribe(t=>{this.pathSteps.set(t)})}getCourseLevelClass(e){return`course-badge--${e}`}exportChart(e){let t=e==="timeline"?this.timelineChart:this.skillTreeChart;if(t){let n=t.getDataURL({type:"png",pixelRatio:2}),r=document.createElement("a");r.download=`${e}-chart.png`,r.href=n,r.click()}}updateTimelineChart(e){if(!this.timelineChartRef?.nativeElement)return;this.timelineChart||(this.timelineChart=z(this.timelineChartRef.nativeElement));let t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["\u8AB2\u7A0B\u6578","\u57F9\u8A13\u6642\u6578","\u5B8C\u6210\u7387"],bottom:0,textStyle:{color:"#6B7280"}},grid:{left:"3%",right:"4%",bottom:"15%",top:"10%",containLabel:!0},xAxis:{type:"category",data:e.map(n=>n.month),axisLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280"}},yAxis:[{type:"value",name:"\u6578\u91CF/\u6642\u6578",axisLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280"},splitLine:{lineStyle:{color:"#F5F5F7"}}},{type:"value",name:"\u5B8C\u6210\u7387 %",max:100,axisLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280"},splitLine:{show:!1}}],series:[{name:"\u8AB2\u7A0B\u6578",type:"bar",data:e.map(n=>n.courses),itemStyle:{color:"#8DA399"}},{name:"\u57F9\u8A13\u6642\u6578",type:"bar",data:e.map(n=>n.hours),itemStyle:{color:"#7F9CA0"}},{name:"\u5B8C\u6210\u7387",type:"line",yAxisIndex:1,data:e.map(n=>n.completion),itemStyle:{color:"#C9A88C"},lineStyle:{width:3},smooth:!0}]};this.timelineChart.setOption(t)}updateSkillTreeChart(e){if(!this.skillTreeChartRef?.nativeElement)return;this.skillTreeChart||(this.skillTreeChart=z(this.skillTreeChartRef.nativeElement));let t={tooltip:{trigger:"item",formatter:n=>{let r=n;return r.value?`${r.name}: ${r.value}%`:r.name}},series:[{type:"tree",data:[e],top:"5%",left:"15%",bottom:"5%",right:"15%",symbolSize:12,orient:"TB",label:{position:"bottom",verticalAlign:"middle",fontSize:12,color:"#4B5563"},leaves:{label:{position:"bottom",verticalAlign:"middle"}},expandAndCollapse:!0,animationDuration:550,animationDurationUpdate:750,lineStyle:{color:"#8DA399",width:2},itemStyle:{color:"#7F9CA0",borderColor:"#7F9CA0"}}]};this.skillTreeChart.setOption(t)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=I({type:o,selectors:[["app-learning-path-tab"]],viewQuery:function(t,n){if(t&1&&(F(ze,5),F(Ie,5)),t&2){let r;A(r=B())&&(n.timelineChartRef=r.first),A(r=B())&&(n.skillTreeChartRef=r.first)}},standalone:!0,features:[R],decls:38,vars:2,consts:[["timelineChart",""],["skillTreeChart",""],[1,"map-card"],[1,"map-card__header"],[1,"map-card__title"],[1,"ri-route-fill"],[1,"map-card__desc"],[1,"filters"],[1,"filter-group"],["for","learningPathLevel"],["id","learningPathLevel",3,"change","value"],[3,"value"],[1,"progress-overview"],[1,"progress-card",3,"border-top-color"],[1,"chart-section"],[1,"chart-card"],[1,"chart-container"],["type","button",1,"export-btn",3,"click"],[1,"ri-download-2-line"],[1,"courses-section"],[1,"section-title"],[1,"course-grid"],[1,"course-card"],[1,"progress-card"],[1,"progress-card__label"],[1,"progress-card__value"],[1,"progress-card__bar"],[1,"progress-card__fill"],[1,"employee-selector"],["for","employeeSelect"],["id","employeeSelect",3,"change","value"],[1,"path-summary"],[1,"path-summary__title"],[1,"path-summary__desc"],[1,"path-steps"],[3,"class"],[1,"ri-arrow-right-line","path-arrow"],[1,"course-card__header"],[1,"course-badge"],[1,"course-card__title"],[1,"course-card__meta"],[1,"ri-time-line"],[1,"ri-user-line"],[1,"course-card__desc"],[1,"course-card__footer"],[1,"course-progress"],[1,"mini-progress-bar"],[1,"mini-progress-fill"]],template:function(t,n){if(t&1){let r=E();i(0,"div",2)(1,"header",3)(2,"h2",4),p(3,"i",5),l(4," \u5B78\u7FD2\u767C\u5C55\u8DEF\u5F91\u5716 (Learning Journey Map) "),a(),i(5,"p",6),l(6," \u70BA\u54E1\u5DE5\u63D0\u4F9B\u6E05\u6670\u7684\u8077\u6DAF\u767C\u5C55\u8DEF\u5F91\u8207\u500B\u4EBA\u5316\u5B78\u7FD2\u5730\u5716\u3002AI\u667A\u80FD\u63A8\u85A6\u5B78\u7FD2\u9806\u5E8F\u8207\u6642\u9593\u3002 "),a()(),i(7,"div",7)(8,"div",8)(9,"label",9),l(10,"\u8996\u5716\u5C64\u7D1A:"),a(),i(11,"select",10),g("change",function(m){return f(r),x(n.switchViewLevel(m.target.value))}),b(12,He,2,2,"option",11,_e),a()()(),i(14,"div",12),b(15,Ne,7,8,"div",13,Re),a(),O(17,Ge,8,2),i(18,"section",14)(19,"div",15),p(20,"div",16,0),i(22,"button",17),g("click",function(){return f(r),x(n.exportChart("timeline"))}),p(23,"i",18),l(24," \u532F\u51FA\u6642\u9593\u8EF8 PNG "),a()()(),i(25,"section",14)(26,"div",15),p(27,"div",16,1),i(29,"button",17),g("click",function(){return f(r),x(n.exportChart("skillTree"))}),p(30,"i",18),l(31," \u532F\u51FA\u6280\u80FD\u6A39 PNG "),a()()(),i(32,"section",19)(33,"h3",20),l(34,"\u{1F4A1} AI \u63A8\u85A6\u8AB2\u7A0B"),a(),i(35,"div",21),b(36,Ue,23,10,"article",22,Le),a()()()}t&2&&(s(11),y("value",n.viewLevel()),s(),v(n.viewLevelOptions),s(3),v(n.progressData()),s(2),P(n.viewLevel()==="individual"?17:-1),s(19),v(n.courses()))},dependencies:[K,N,$],styles:[".map-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E4E8;padding:30px}.map-card__header[_ngcontent-%COMP%]{margin-bottom:25px}.map-card__title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#1f2937;margin-bottom:8px;display:flex;align-items:center;gap:10px}.map-card__title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7f9ca0}.map-card__desc[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;line-height:1.6}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;margin-bottom:30px;padding:20px;background:#f5f5f7;border-radius:10px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1f2937;white-space:nowrap}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #E2E4E8;border-radius:8px;background:#fff;color:#1f2937;font-size:14px;cursor:pointer;transition:all .3s ease;min-width:180px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#64748b}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#64748b;box-shadow:0 0 0 3px #64748b1a}.progress-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px}.progress-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8;border-top:4px solid;position:relative;overflow:hidden}.progress-card__label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#6b7280;margin-bottom:10px;font-weight:700}.progress-card__value[_ngcontent-%COMP%]{display:block;font-size:36px;font-weight:800;color:#1f2937;margin-bottom:12px;letter-spacing:-1px;line-height:1.1}.progress-card__bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#f5f5f7;border-radius:4px;overflow:hidden}.progress-card__fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.employee-selector[_ngcontent-%COMP%]{margin-bottom:20px;padding:20px;background:#f5f5f7;border-radius:10px}.path-summary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea14,#764ba214);border:2px solid rgba(102,126,234,.2);border-radius:12px;padding:20px;margin-bottom:30px}.path-summary__title[_ngcontent-%COMP%]{color:#64748b;margin-bottom:12px;font-size:16px}.path-summary__desc[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-bottom:15px}.path-steps[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;overflow-x:auto;padding-bottom:5px}.path-arrow[_ngcontent-%COMP%]{color:#6b7280}.path-step[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;font-size:13px;font-weight:600;white-space:nowrap;border:2px solid}.path-step--completed[_ngcontent-%COMP%]{background:#7fb09526;border-color:#7fb095;color:#7fb095}.path-step--current[_ngcontent-%COMP%]{background:#7f9ca026;border-color:#7f9ca0;color:#7f9ca0}.path-step--pending[_ngcontent-%COMP%]{background:#858e961a;border-color:#e2e4e8;color:#6b7280}.chart-section[_ngcontent-%COMP%]{margin-bottom:30px}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px;margin-bottom:15px}.export-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#64748b;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.export-btn[_ngcontent-%COMP%]:hover{background:#475569;transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.export-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.courses-section[_ngcontent-%COMP%]{margin-top:30px}.section-title[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:20px;font-size:18px}.course-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.course-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8;transition:all .3s ease;display:flex;flex-direction:column;gap:12px}.course-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f;border-color:#64748b}.course-card__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.course-card__title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#1f2937;line-height:1.4}.course-card__meta[_ngcontent-%COMP%]{display:flex;gap:15px;font-size:12px;color:#6b7280}.course-card__meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.course-card__desc[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;line-height:1.6;flex:1}.course-card__footer[_ngcontent-%COMP%]{padding-top:12px;border-top:1px solid #E2E4E8}.course-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:6px;font-size:12px;font-weight:600;color:#fff}.course-badge--basic[_ngcontent-%COMP%]{background:#8da399}.course-badge--advanced[_ngcontent-%COMP%]{background:#c9a88c}.course-badge--expert[_ngcontent-%COMP%]{background:#a89bb5}.course-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.course-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#1f2937;min-width:35px}.mini-progress-bar[_ngcontent-%COMP%]{flex:1;height:6px;background:#f5f5f7;border-radius:3px;overflow:hidden}.mini-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#7f9ca0,#8da399);border-radius:3px;transition:width .3s ease}@media (max-width: 1200px){.progress-overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.progress-overview[_ngcontent-%COMP%]{grid-template-columns:1fr}.path-steps[_ngcontent-%COMP%]{flex-wrap:wrap}}"],changeDetection:0})};var Je=["coverageChart"],Ze=["costChart"],Xe=(o,e)=>e.value,et=(o,e)=>e.title,tt=(o,e)=>e.id,nt=(o,e)=>e.position,it=(o,e)=>e.rank;function at(o,e){if(o&1&&(i(0,"option",11),l(1),a()),o&2){let t=e.$implicit;y("value",t.value),s(),d(t.label)}}function ot(o,e){if(o&1){let t=E();i(0,"button",35),g("click",function(){f(t);let r=h(2);return x(r.startRetentionPlan())}),l(1),a()}if(o&2){let t=h().$implicit;s(),C(" ",t.actionLabel," ")}}function rt(o,e){if(o&1&&(i(0,"article",13)(1,"h3",31),l(2),a(),i(3,"p",32),l(4),a(),i(5,"p",33),l(6),a(),O(7,ot,2,1,"button",34),a()),o&2){let t=e.$implicit;s(2),d(t.title),s(),T("color",t.color),s(),d(t.value),s(2),d(t.description),s(),P(t.actionLabel?7:-1)}}function lt(o,e){if(o&1){let t=E();i(0,"article",36)(1,"div",37),l(2),a(),i(3,"div",38)(4,"span",39),l(5),a(),i(6,"span",40),l(7),a(),i(8,"span",41),l(9),a()(),i(10,"div",42),l(11),a(),i(12,"button",43),g("click",function(){let r=f(t).$implicit,c=h();return x(c.openRetentionModal(r))}),l(13," \u555F\u52D5\u7559\u624D\u8A08\u756B "),a()()}if(o&2){let t=e.$implicit;V(t.riskLevel),s(2),d(t.name.charAt(0)),s(3),d(t.name),s(2),W("",t.department," \xB7 ",t.position,""),s(2),d(t.factors.join(" \xB7 ")),s(),V(t.riskLevel),s(),C("",t.riskScore,"%")}}function st(o,e){if(o&1&&(i(0,"div",49)(1,"span",50),l(2),a(),i(3,"span",51),l(4),a(),i(5,"div",52),p(6,"div",53),a(),i(7,"span",54),l(8),a()()),o&2){let t=e.$implicit;s(2),d(t.rank),s(2),d(t.name),s(2),T("width",t.readiness,"%"),s(2),C("",t.readiness,"%")}}function ct(o,e){if(o&1&&b(0,st,9,5,"div",49,it),o&2){let t=h().$implicit;v(t.successors)}}function pt(o,e){o&1&&(i(0,"div",48),p(1,"i",55),i(2,"span"),l(3,"\u5C1A\u7121\u63A5\u73ED\u4EBA\u9078"),a()())}function dt(o,e){if(o&1&&(i(0,"article",24)(1,"header",44)(2,"span",45),l(3),a(),i(4,"span",46),l(5),a()(),i(6,"div",47),O(7,ct,2,0)(8,pt,4,0,"div",48),a()()),o&2){let t=e.$implicit,n=h();s(3),d(t.position),s(),V(n.getCoverageClass(t.coverage)),s(),C(" ",t.coverageText," "),s(2),P(t.successors.length>0?7:8)}}function mt(o,e){if(o&1&&(i(0,"li"),l(1),a()),o&2){let t=e.$implicit;s(),C("\u2022 ",t,"")}}function ut(o,e){if(o&1&&(i(0,"li"),l(1),a()),o&2){let t=e.$implicit;s(),C("\u2022 ",t,"")}}function gt(o,e){if(o&1){let t=E();i(0,"h3",58),l(1),a(),i(2,"div",59)(3,"strong",60),l(4,"\u98A8\u96AA\u56E0\u7D20\uFF1A"),a(),i(5,"ul",61),b(6,mt,2,1,"li",null,q),a()(),i(8,"div",59)(9,"strong",62),l(10,"\u5EFA\u8B70\u884C\u52D5\u65B9\u6848\uFF1A"),a(),i(11,"ul",63),b(12,ut,2,1,"li",null,q),a()(),i(14,"div",59)(15,"strong"),l(16,"\u9810\u4F30\u633D\u7559\u6210\u529F\u7387\uFF1A"),a(),i(17,"span",64),l(18),a()(),i(19,"div",65)(20,"button",66),g("click",function(){f(t);let r=h(2);return x(r.closeRetentionModal())}),l(21,"\u53D6\u6D88"),a(),i(22,"button",67),g("click",function(){f(t);let r=h(2);return x(r.confirmRetention())}),l(23,"\u78BA\u8A8D\u555F\u52D5"),a()()}if(o&2){let t=e,n=h(2);s(),C("\u555F\u52D5\u7559\u624D\u8A08\u756B - ",t.name,""),s(5),v(t.factors),s(6),v(n.retentionSuggestions),s(6),C("",n.getEstimatedSuccessRate(t),"%")}}function ft(o,e){if(o&1){let t=E();i(0,"div",56),g("click",function(){f(t);let r=h();return x(r.closeRetentionModal())}),i(1,"div",57),g("click",function(r){return f(t),x(r.stopPropagation())}),O(2,gt,24,2),a()()}if(o&2){let t,n=h();s(2),P((t=n.selectedAlert())?2:-1,t)}}var ie=class o{coverageChartRef;costChartRef;talentMapService=w(L);notificationService=w(ge);cdr=w(H);coverageChart=null;costChart=null;viewReady=!1;resizeHandler=()=>{this.coverageChart?.resize(),this.costChart?.resize()};departmentOptions=this.talentMapService.departmentOptions;retentionSuggestions=["\u7ACB\u5373\u5B89\u6392\u4E00\u5C0D\u4E00\u9762\u8AC7\uFF0C\u4E86\u89E3\u771F\u5BE6\u96E2\u8077\u610F\u9858","\u8A55\u4F30\u85AA\u8CC7\u8ABF\u6574\u7A7A\u9593\uFF08\u5EFA\u8B70\u8ABF\u5E45 15-20%\uFF09","\u63D0\u4F9B\u8077\u6DAF\u767C\u5C55\u6A5F\u6703\u6216\u6649\u5347\u8DEF\u5F91","\u5B89\u6392 EAP \u5FC3\u7406\u8AEE\u5546\u670D\u52D9","\u5F48\u6027\u5DE5\u4F5C\u5B89\u6392\uFF08\u5982\u9031\u4F11\u4E09\u65E5\u8A66\u884C\uFF09"];selectedDepartment=_("all");metrics=_([]);riskAlerts=_([]);successionPlans=_([]);loading=_(!1);showRetentionModal=_(!1);selectedAlert=_(null);ngOnInit(){window.addEventListener("resize",this.resizeHandler)}ngAfterViewInit(){this.viewReady=!0,this.loadData()}ngOnDestroy(){window.removeEventListener("resize",this.resizeHandler),this.coverageChart?.dispose(),this.costChart?.dispose()}loadData(){this.loading.set(!0),this.talentMapService.getKeyTalentMetrics().subscribe(e=>{this.metrics.set(e),this.cdr.detectChanges()}),this.talentMapService.getRiskAlerts().subscribe(e=>{this.riskAlerts.set(e),this.cdr.detectChanges()}),this.talentMapService.getSuccessionPlans().subscribe(e=>{this.successionPlans.set(e),this.loading.set(!1),this.cdr.detectChanges(),this.viewReady&&e.length>0&&setTimeout(()=>this.updateCharts(e),100)})}updateDepartment(e){this.selectedDepartment.set(e),this.loadData()}startRetentionPlan(){this.notificationService.info("\u529F\u80FD\u958B\u767C\u4E2D\uFF1A\u5C07\u9023\u7D50\u81F3\u5B8C\u6574\u7684\u7559\u624D\u8A08\u756B\u7BA1\u7406\u6A21\u7D44")}openRetentionModal(e){this.selectedAlert.set(e),this.showRetentionModal.set(!0),this.cdr.detectChanges()}closeRetentionModal(){this.showRetentionModal.set(!1),this.selectedAlert.set(null),this.cdr.detectChanges()}confirmRetention(){let e=this.selectedAlert();e&&(this.closeRetentionModal(),this.notificationService.success(`\u7559\u624D\u8A08\u756B\u5DF2\u555F\u52D5\uFF1A${e.name} \u7684\u7559\u624D\u65B9\u6848\u5DF2\u5EFA\u7ACB\uFF0CHR \u5C07\u5728 24 \u5C0F\u6642\u5167\u806F\u7E6B`))}getEstimatedSuccessRate(e){return e?Math.max(50,100-e.riskScore+20):0}getCoverageClass(e){return`coverage-badge--${e}`}exportChart(e){let t=e==="coverage"?this.coverageChart:this.costChart;if(t){let n=t.getDataURL({type:"png",pixelRatio:2}),r=document.createElement("a");r.download=`${e}-chart.png`,r.href=n,r.click()}}updateCharts(e){this.updateCoverageChart(e),this.updateCostChart()}updateCoverageChart(e){if(!this.coverageChartRef?.nativeElement)return;this.coverageChart||(this.coverageChart=z(this.coverageChartRef.nativeElement));let t={high:100,medium:60,low:20},n={high:"#7FB095",medium:"#E3C088",low:"#C77F7F"},r={title:{text:"\u95DC\u9375\u8077\u4F4D\u63A5\u73ED\u4EBA\u8986\u84CB\u7387",left:"center",textStyle:{color:"#1F2937",fontSize:16}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"10%",top:"20%",containLabel:!0},xAxis:{type:"category",data:e.map(c=>c.position),axisLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280",rotate:15,fontSize:11}},yAxis:{type:"value",max:100,axisLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280",formatter:"{value}%"},splitLine:{lineStyle:{color:"#F5F5F7"}}},series:[{type:"bar",data:e.map(c=>({value:t[c.coverage],itemStyle:{color:n[c.coverage]}})),barWidth:"50%",label:{show:!0,position:"top",formatter:"{c}%",color:"#6B7280"}}]};this.coverageChart.setOption(r)}updateCostChart(){if(!this.costChartRef?.nativeElement)return;this.costChart||(this.costChart=z(this.costChartRef.nativeElement));let e={title:{text:"\u4EBA\u624D\u6D41\u5931\u6210\u672C\u5206\u6790",left:"center",textStyle:{color:"#1F2937",fontSize:16}},tooltip:{trigger:"item",formatter:"{b}: {c} \u842C ({d}%)"},legend:{orient:"vertical",right:"5%",top:"center",textStyle:{color:"#6B7280"}},series:[{type:"pie",radius:["40%","70%"],center:["35%","55%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:8,borderColor:"#fff",borderWidth:2},label:{show:!1},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold"}},data:[{value:60,name:"\u66FF\u63DB\u6210\u672C",itemStyle:{color:"#C77F7F"}},{value:35,name:"\u57F9\u8A13\u6210\u672C",itemStyle:{color:"#E3C088"}},{value:30,name:"\u7522\u51FA\u640D\u5931",itemStyle:{color:"#7F9CA0"}},{value:25,name:"\u5176\u4ED6\u6210\u672C",itemStyle:{color:"#8DA399"}}]}]};this.costChart.setOption(e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=I({type:o,selectors:[["app-key-talent-tab"]],viewQuery:function(t,n){if(t&1&&(F(Je,5),F(Ze,5)),t&2){let r;A(r=B())&&(n.coverageChartRef=r.first),A(r=B())&&(n.costChartRef=r.first)}},standalone:!0,features:[R],decls:46,vars:2,consts:[["coverageChart",""],["costChart",""],[1,"map-card"],[1,"map-card__header"],[1,"map-card__title"],[1,"ri-star-fill"],[1,"map-card__desc"],[1,"filters"],[1,"filter-group"],["for","talentDept"],["id","talentDept",3,"change","value"],[3,"value"],[1,"dashboard-grid"],[1,"metric-card"],[1,"alert-panel"],[1,"alert-panel__header"],[1,"alert-icon"],[1,"ri-alert-fill"],[1,"alert-panel__title"],[1,"alert-list"],[1,"alert-item",3,"class"],[1,"succession-section"],[1,"section-title"],[1,"succession-grid"],[1,"succession-card"],[1,"chart-combo"],[1,"chart-card"],[1,"chart-container"],["type","button",1,"export-btn",3,"click"],[1,"ri-download-2-line"],[1,"modal-overlay"],[1,"metric-card__title"],[1,"metric-card__value"],[1,"metric-card__desc"],["type","button",1,"small-btn"],["type","button",1,"small-btn",3,"click"],[1,"alert-item"],[1,"alert-item__avatar"],[1,"alert-item__info"],[1,"alert-item__name"],[1,"alert-item__detail"],[1,"alert-item__factors"],[1,"alert-item__score"],["type","button",1,"alert-item__action",3,"click"],[1,"succession-card__header"],[1,"succession-card__position"],[1,"coverage-badge"],[1,"succession-list"],[1,"no-successor"],[1,"successor-item"],[1,"successor-rank"],[1,"successor-name"],[1,"readiness-bar"],[1,"readiness-fill"],[1,"readiness-score"],[1,"ri-user-add-line"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-title"],[1,"modal-section"],[1,"modal-label"],[1,"factor-list"],[1,"modal-label","modal-label--primary"],[1,"suggestion-list"],[1,"success-rate"],[1,"modal-actions"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"btn-primary",3,"click"]],template:function(t,n){if(t&1){let r=E();i(0,"div",2)(1,"header",3)(2,"h2",4),p(3,"i",5),l(4," \u95DC\u9375\u4EBA\u624D\u5100\u8868\u677F (Key Talent Dashboard) "),a(),i(5,"p",6),l(6," \u9AD8\u968E\u4E3B\u7BA1\u6C7A\u7B56\u3001\u4EBA\u624D\u4FDD\u7559\u7B56\u7565\u3001\u85AA\u916C\u8ABF\u6574\u53C3\u8003\u3002\u5373\u6642\u76E3\u63A7\u95DC\u9375\u4EBA\u624D\u98A8\u96AA\u8207\u9810\u8B66\u3002 "),a()(),i(7,"div",7)(8,"div",8)(9,"label",9),l(10,"\u9078\u64C7\u90E8\u9580:"),a(),i(11,"select",10),g("change",function(m){return f(r),x(n.updateDepartment(m.target.value))}),b(12,at,2,2,"option",11,Xe),a()()(),i(14,"div",12),b(15,rt,8,6,"article",13,et),a(),i(17,"section",14)(18,"header",15)(19,"div",16),p(20,"i",17),a(),i(21,"h3",18),l(22,"\u9AD8\u98A8\u96AA\u4EBA\u624D\u9810\u8B66\uFF08\u96E2\u8077\u50BE\u5411 > 60%\uFF09"),a()(),i(23,"div",19),b(24,lt,14,10,"article",20,tt),a()(),i(26,"section",21)(27,"h2",22),l(28,"\u95DC\u9375\u8077\u4F4D\u63A5\u73ED\u4EBA\u898F\u5283"),a(),i(29,"div",23),b(30,dt,9,5,"article",24,nt),a()(),i(32,"div",25)(33,"div",26),p(34,"div",27,0),i(36,"button",28),g("click",function(){return f(r),x(n.exportChart("coverage"))}),p(37,"i",29),l(38," \u532F\u51FA\u8986\u84CB\u7387\u5716\u8868 PNG "),a()(),i(39,"div",26),p(40,"div",27,1),i(42,"button",28),g("click",function(){return f(r),x(n.exportChart("cost"))}),p(43,"i",29),l(44," \u532F\u51FA\u6210\u672C\u5206\u6790 PNG "),a()()()(),O(45,ft,3,1,"div",30)}t&2&&(s(11),y("value",n.selectedDepartment()),s(),v(n.departmentOptions),s(3),v(n.metrics()),s(9),v(n.riskAlerts()),s(6),v(n.successionPlans()),s(15),P(n.showRetentionModal()?45:-1))},dependencies:[K,N,$],styles:[".map-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E4E8;padding:30px}.map-card__header[_ngcontent-%COMP%]{margin-bottom:25px}.map-card__title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#1f2937;margin-bottom:8px;display:flex;align-items:center;gap:10px}.map-card__title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7f9ca0}.map-card__desc[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;line-height:1.6}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;margin-bottom:30px;padding:20px;background:#f5f5f7;border-radius:10px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1f2937;white-space:nowrap}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #E2E4E8;border-radius:8px;background:#fff;color:#1f2937;font-size:14px;cursor:pointer;transition:all .3s ease;min-width:150px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#64748b}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#64748b;box-shadow:0 0 0 3px #64748b1a}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:30px}.metric-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E4E8;padding:25px;text-align:center;transition:all .3s ease}.metric-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 15px #0000001a}.metric-card__title[_ngcontent-%COMP%]{font-size:16px;color:#1f2937;margin-bottom:15px;font-weight:600}.metric-card__value[_ngcontent-%COMP%]{font-size:36px;font-weight:800;margin:15px 0;letter-spacing:-1px;line-height:1.1}.metric-card__desc[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;margin-bottom:15px}.small-btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px;border-radius:8px;background:#8da399;color:#fff;border:none;cursor:pointer;transition:all .3s ease}.small-btn[_ngcontent-%COMP%]:hover{opacity:.85;transform:translateY(-2px)}.alert-panel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c77f7f14,#c77f7f05);border:1px solid rgba(199,127,127,.2);border-radius:12px;padding:25px;margin-bottom:30px}.alert-panel__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:20px}.alert-panel__title[_ngcontent-%COMP%]{font-size:18px;color:#c77f7f;margin:0}.alert-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#c77f7f;color:#fff;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px}.alert-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.alert-item[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:16px;display:flex;align-items:center;gap:15px;border:1px solid #E2E4E8;border-left:4px solid}.alert-item.high[_ngcontent-%COMP%]{border-left-color:#c77f7f}.alert-item.medium[_ngcontent-%COMP%]{border-left-color:#e3c088}.alert-item__avatar[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;background:#64748b;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;flex-shrink:0}.alert-item__info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.alert-item__name[_ngcontent-%COMP%]{font-weight:700;color:#1f2937;font-size:15px}.alert-item__detail[_ngcontent-%COMP%]{font-size:13px;color:#6b7280}.alert-item__factors[_ngcontent-%COMP%]{font-size:13px;color:#c77f7f;margin-top:4px}.alert-item__score[_ngcontent-%COMP%]{font-size:32px;font-weight:800;text-align:center;min-width:70px;flex-shrink:0;letter-spacing:-1px}.alert-item__score.high[_ngcontent-%COMP%]{color:#c77f7f}.alert-item__score.medium[_ngcontent-%COMP%]{color:#e3c088}.alert-item__action[_ngcontent-%COMP%]{padding:10px 18px;background:#64748b;color:#fff;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s ease;white-space:nowrap;flex-shrink:0}.alert-item__action[_ngcontent-%COMP%]:hover{background:#475569;transform:translateY(-1px)}.succession-section[_ngcontent-%COMP%]{margin-bottom:30px}.section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1f2937;margin-bottom:20px}.succession-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.succession-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8;transition:all .3s ease}.succession-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 15px #0000001a}.succession-card__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #E2E4E8}.succession-card__position[_ngcontent-%COMP%]{font-weight:700;color:#1f2937}.coverage-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:700}.coverage-badge--high[_ngcontent-%COMP%]{background:#7fb09526;color:#7fb095}.coverage-badge--medium[_ngcontent-%COMP%]{background:#e3c08826;color:#a88643}.coverage-badge--low[_ngcontent-%COMP%]{background:#c77f7f26;color:#c77f7f}.succession-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.successor-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;background:#f5f5f7;border-radius:8px}.successor-rank[_ngcontent-%COMP%]{width:24px;height:24px;background:#64748b;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;flex-shrink:0}.successor-name[_ngcontent-%COMP%]{flex:1;font-size:13px;font-weight:600;color:#1f2937}.readiness-bar[_ngcontent-%COMP%]{width:60px;height:6px;background:#e2e4e8;border-radius:3px;overflow:hidden}.readiness-fill[_ngcontent-%COMP%]{height:100%;background:#7fb095;border-radius:3px}.readiness-score[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#6b7280;min-width:35px;text-align:right}.no-successor[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:20px;color:#6b7280;font-size:14px}.no-successor[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.chart-combo[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px;margin-bottom:15px}.export-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#64748b;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.export-btn[_ngcontent-%COMP%]:hover{background:#475569;transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.export-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:9999;display:flex;align-items:center;justify-content:center;padding:20px;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;max-width:600px;width:100%;padding:30px;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1f2937;margin-bottom:20px}.modal-section[_ngcontent-%COMP%]{margin-bottom:20px}.modal-label[_ngcontent-%COMP%]{display:block;font-size:14px;color:#1f2937;margin-bottom:10px}.modal-label--primary[_ngcontent-%COMP%]{color:#667eea}.factor-list[_ngcontent-%COMP%]{background:#f5f5f7;padding:15px 20px;border-radius:8px;list-style:none;margin:0}.factor-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;color:#1f2937;line-height:1.8}.suggestion-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.suggestion-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;color:#1f2937;line-height:1.8}.success-rate[_ngcontent-%COMP%]{font-size:24px;font-weight:800;color:#7fb095;margin-left:10px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:25px;padding-top:20px;border-top:1px solid #E2E4E8}.btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;background:#f5f5f7;color:#1f2937;border:1px solid #E2E4E8;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e7e7ec}.btn-primary[_ngcontent-%COMP%]{padding:10px 20px;background:#64748b;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:#475569}@media (max-width: 1200px){.chart-combo[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.alert-item[_ngcontent-%COMP%]{flex-wrap:wrap}.alert-item__info[_ngcontent-%COMP%]{order:1;flex:1 1 100%}.alert-item__score[_ngcontent-%COMP%]{order:2}.alert-item__action[_ngcontent-%COMP%]{order:3;width:100%;margin-top:10px}.modal-content[_ngcontent-%COMP%]{padding:20px}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-secondary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})};var xt=(o,e)=>e.key,_t=()=>["\u6559\u80B2\u8A13\u7DF4","\u4EBA\u624D\u5730\u5716"];function ht(o,e){if(o&1){let t=E();i(0,"button",6),g("click",function(){let r=f(t).$implicit,c=h();return x(c.setActiveTab(r.key))}),p(1,"i"),i(2,"span"),l(3),a()()}if(o&2){let t=e.$implicit,n=h();Q("active",n.activeTab()===t.key),ce("aria-selected",n.activeTab()===t.key),s(),V(t.icon),s(2),d(t.label)}}function bt(o,e){o&1&&p(0,"app-heatmap-tab")}function vt(o,e){o&1&&p(0,"app-nine-box-tab")}function Ct(o,e){o&1&&p(0,"app-learning-path-tab")}function yt(o,e){o&1&&p(0,"app-key-talent-tab")}var he=class o{activeTab=_("heatmap");tabs=[{key:"heatmap",label:"\u7D44\u7E54\u8077\u80FD\u71B1\u529B\u5716",icon:"ri-fire-line"},{key:"nine-box",label:"\u4EBA\u624D\u4E5D\u5BAE\u683C",icon:"ri-grid-line"},{key:"learning-path",label:"\u5B78\u7FD2\u767C\u5C55\u8DEF\u5F91\u5716",icon:"ri-route-line"},{key:"key-talent",label:"\u95DC\u9375\u4EBA\u624D\u5100\u8868\u677F",icon:"ri-star-line"}];setActiveTab(e){this.activeTab.set(e)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=I({type:o,selectors:[["app-talent-map-page"]],standalone:!0,features:[R],decls:11,vars:3,consts:[["pageTitle","\u591A\u5C64\u6B21\u4EBA\u624D\u5730\u5716\u751F\u6210\u5F15\u64CE",3,"breadcrumbs"],[1,"main-content"],[1,"content-container"],["role","tablist",1,"talent-map-tabs"],["role","tab","type","button",1,"tab-btn",3,"active"],[1,"tab-content-wrapper"],["role","tab","type","button",1,"tab-btn",3,"click"]],template:function(t,n){if(t&1&&(p(0,"app-header",0),i(1,"main",1)(2,"div",2)(3,"nav",3),b(4,ht,4,6,"button",4,xt),a(),i(6,"div",5),O(7,bt,1,0,"app-heatmap-tab")(8,vt,1,0,"app-nine-box-tab")(9,Ct,1,0,"app-learning-path-tab")(10,yt,1,0,"app-key-talent-tab"),a()()()),t&2){let r;y("breadcrumbs",me(2,_t)),s(4),v(n.tabs),s(3),P((r=n.activeTab())==="heatmap"?7:r==="nine-box"?8:r==="learning-path"?9:r==="key-talent"?10:-1)}},dependencies:[fe,X,te,ne,ie],styles:[".talent-map-tabs[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:30px;background:#fff;padding:10px;border-radius:12px;border:1px solid #E2E4E8}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:15px 20px;background:transparent;border:none;border-radius:10px;font-size:14px;font-weight:600;color:#6b7280;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.tab-btn[_ngcontent-%COMP%]:hover{background:#f5f5f7;color:#64748b}.tab-btn.active[_ngcontent-%COMP%]{background:#7f9ca0;color:#fff;box-shadow:0 4px 15px #7f9ca04d}.tab-content-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 992px){.talent-map-tabs[_ngcontent-%COMP%]{flex-wrap:wrap}.tab-btn[_ngcontent-%COMP%]{flex:1 1 calc(50% - 5px);min-width:150px}}@media (max-width: 576px){.talent-map-tabs[_ngcontent-%COMP%]{flex-direction:column}.tab-btn[_ngcontent-%COMP%]{flex:1 1 100%;justify-content:flex-start}}"],changeDetection:0})};export{he as TalentMapPageComponent};

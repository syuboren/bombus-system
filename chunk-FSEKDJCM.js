import{a as N}from"./chunk-PABKVVOZ.js";import{a as k}from"./chunk-PZOMZZZC.js";import{i as z,j as R,l as V}from"./chunk-6NWKX4EL.js";import{a as $}from"./chunk-ZVKGYAYE.js";import"./chunk-TKFFVAKG.js";import{$ as p,G as o,L as c,N as x,P as d,Q as y,S as A,T as L,U as C,X as m,Y as u,Z as r,_ as a,aa as T,ba as b,ca as v,fa as S,ga as F,ha as D,ia as l,ja as g,ka as h,n as O,o as E,sa as w,t as f,ta as B,u as _,za as I}from"./chunk-Y7UTIMVI.js";import"./chunk-GAL4ENT6.js";var G=["timelineChart"],U=["skillTreeChart"],H=(n,e)=>e.value,J=(n,e)=>e.title,K=(n,e)=>e.id,W=(n,e)=>e.name;function X(n,e){if(n&1&&(r(0,"option",11),l(1),a()),n&2){let t=e.$implicit;d("value",t.value),o(),g(t.label)}}function Z(n,e){if(n&1&&(r(0,"div",23)(1,"span",24),l(2),a(),r(3,"span",25),l(4),a(),r(5,"div",26),p(6,"div",27),a()()),n&2){let t=e.$implicit;y("border-top-color",t.color),o(2),g(t.title),o(2),h("",t.value,"%"),o(2),y("width",t.value,"%")("background",t.color)}}function ee(n,e){if(n&1&&(r(0,"option",11),l(1),a()),n&2){let t=e.$implicit;d("value",t.value),o(),g(t.label)}}function te(n,e){n&1&&p(0,"i",36)}function ne(n,e){if(n&1&&(x(0,te,1,0,"i",36),r(1,"span"),l(2),a()),n&2){let t=e.$implicit,i=e.$index;C(i>0?0:-1),o(),L("path-step path-step--",t.status,""),o(),h(" ",t.name," ")}}function ie(n,e){if(n&1&&(r(0,"div",31)(1,"h3",32),l(2,"\u{1F3AF} \u500B\u4EBA\u5B78\u7FD2\u8DEF\u5F91"),a(),r(3,"p",33),l(4,"\u6839\u64DA\u8077\u80FD\u8A55\u4F30\u7D50\u679C\uFF0CAI \u63A8\u85A6\u4EE5\u4E0B\u5B78\u7FD2\u8DEF\u5F91"),a(),r(5,"div",34),m(6,ne,3,5,"span",35,W),a()()),n&2){let t=v(2);o(6),u(t.pathSteps())}}function re(n,e){if(n&1){let t=T();r(0,"div",28)(1,"div",8)(2,"label",29),l(3,"\u9078\u64C7\u54E1\u5DE5:"),a(),r(4,"select",30),b("change",function(s){f(t);let P=v();return _(P.selectEmployee(s.target.value))}),m(5,ee,2,2,"option",11,H),a()()(),x(7,ie,8,0,"div",31)}if(n&2){let t=v();o(4),d("value",t.selectedEmployee()),o(),u(t.employeeOptions),o(2),C(t.selectedEmployee()&&t.pathSteps().length>0?7:-1)}}function ae(n,e){n&1&&l(0," \u57FA\u790E ")}function oe(n,e){n&1&&l(0," \u9032\u968E ")}function le(n,e){n&1&&l(0," \u5C08\u5BB6 ")}function se(n,e){if(n&1&&(r(0,"article",22)(1,"header",37)(2,"span",38),x(3,ae,1,0)(4,oe,1,0)(5,le,1,0),a()(),r(6,"h4",39),l(7),a(),r(8,"div",40)(9,"span"),p(10,"i",41),l(11),a(),r(12,"span"),p(13,"i",42),l(14),a()(),r(15,"p",43),l(16),a(),r(17,"footer",44)(18,"div",45)(19,"div",46),p(20,"div",47),a(),r(21,"span"),l(22),a()()()()),n&2){let t,i=e.$implicit,s=v();o(2),A(s.getCourseLevelClass(i.level)),o(),C((t=i.level)==="basic"?3:t==="advanced"?4:t==="expert"?5:-1),o(4),g(i.title),o(4),h(" ",i.duration,""),o(3),h(" ",i.participants," \u4EBA"),o(2),g(i.description),o(4),y("width",i.progress,"%"),o(2),h("",i.progress,"%")}}var M=class n{timelineChartRef;skillTreeChartRef;talentMapService=O(N);cdr=O(I);timelineChart=null;skillTreeChart=null;viewReady=!1;resizeHandler=()=>{this.timelineChart?.resize(),this.skillTreeChart?.resize()};viewLevelOptions=[{value:"org",label:"\u7D44\u7E54\u5C64\u7D1A"},{value:"dept",label:"\u90E8\u9580\u5C64\u7D1A"},{value:"individual",label:"\u500B\u4EBA\u5C64\u7D1A"}];employeeOptions=[{value:"",label:"\u8ACB\u9078\u64C7\u54E1\u5DE5..."},{value:"e001",label:"\u738B\u5C0F\u660E (\u524D\u7AEF\u5DE5\u7A0B\u5E2B)"},{value:"e002",label:"\u674E\u5C0F\u83EF (\u696D\u52D9\u5C08\u54E1)"},{value:"e003",label:"\u5F35\u5927\u540C (\u884C\u92B7\u5C08\u54E1)"}];viewLevel=c("org");selectedEmployee=c("");progressData=c([]);courses=c([]);pathSteps=c([]);timelineData=c([]);skillTreeData=c(null);loading=c(!1);ngOnInit(){window.addEventListener("resize",this.resizeHandler)}ngAfterViewInit(){this.viewReady=!0,this.loadData()}ngOnDestroy(){window.removeEventListener("resize",this.resizeHandler),this.timelineChart?.dispose(),this.skillTreeChart?.dispose()}loadData(){this.loading.set(!0),this.talentMapService.getLearningProgress().subscribe(e=>{this.progressData.set(e),this.cdr.detectChanges()}),this.talentMapService.getCourses().subscribe(e=>{this.courses.set(e),this.cdr.detectChanges()}),this.talentMapService.getTimelineData().subscribe(e=>{this.timelineData.set(e),this.cdr.detectChanges(),this.viewReady&&e.length>0&&setTimeout(()=>this.updateTimelineChart(e),100)}),this.talentMapService.getSkillTreeData().subscribe(e=>{this.skillTreeData.set(e),this.loading.set(!1),this.cdr.detectChanges(),this.viewReady&&e&&setTimeout(()=>this.updateSkillTreeChart(e),100)})}switchViewLevel(e){this.viewLevel.set(e),e==="individual"&&this.selectedEmployee()&&this.loadIndividualPath()}selectEmployee(e){this.selectedEmployee.set(e),e&&this.loadIndividualPath()}loadIndividualPath(){let e=this.selectedEmployee();e&&this.talentMapService.getPathSteps(e).subscribe(t=>{this.pathSteps.set(t)})}getCourseLevelClass(e){return`course-badge--${e}`}exportChart(e){let t=e==="timeline"?this.timelineChart:this.skillTreeChart;if(t){let i=t.getDataURL({type:"png",pixelRatio:2}),s=document.createElement("a");s.download=`${e}-chart.png`,s.href=i,s.click()}}updateTimelineChart(e){if(!this.timelineChartRef?.nativeElement)return;this.timelineChart||(this.timelineChart=k(this.timelineChartRef.nativeElement));let t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["\u8AB2\u7A0B\u6578","\u57F9\u8A13\u6642\u6578","\u5B8C\u6210\u7387"],bottom:0,textStyle:{color:"#6B7280"}},grid:{left:"3%",right:"4%",bottom:"15%",top:"10%",containLabel:!0},xAxis:{type:"category",data:e.map(i=>i.month),axisLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280"}},yAxis:[{type:"value",name:"\u6578\u91CF/\u6642\u6578",axisLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280"},splitLine:{lineStyle:{color:"#F5F5F7"}}},{type:"value",name:"\u5B8C\u6210\u7387 %",max:100,axisLine:{lineStyle:{color:"#E8E8EA"}},axisLabel:{color:"#6B7280"},splitLine:{show:!1}}],series:[{name:"\u8AB2\u7A0B\u6578",type:"bar",data:e.map(i=>i.courses),itemStyle:{color:"#8DA399"}},{name:"\u57F9\u8A13\u6642\u6578",type:"bar",data:e.map(i=>i.hours),itemStyle:{color:"#7F9CA0"}},{name:"\u5B8C\u6210\u7387",type:"line",yAxisIndex:1,data:e.map(i=>i.completion),itemStyle:{color:"#C9A88C"},lineStyle:{width:3},smooth:!0}]};this.timelineChart.setOption(t)}updateSkillTreeChart(e){if(!this.skillTreeChartRef?.nativeElement)return;this.skillTreeChart||(this.skillTreeChart=k(this.skillTreeChartRef.nativeElement));let t={tooltip:{trigger:"item",formatter:i=>{let s=i;return s.value?`${s.name}: ${s.value}%`:s.name}},series:[{type:"tree",data:[e],top:"5%",left:"15%",bottom:"5%",right:"15%",symbolSize:12,orient:"TB",label:{position:"bottom",verticalAlign:"middle",fontSize:12,color:"#4B5563"},leaves:{label:{position:"bottom",verticalAlign:"middle"}},expandAndCollapse:!0,animationDuration:550,animationDurationUpdate:750,lineStyle:{color:"#8DA399",width:2},itemStyle:{color:"#7F9CA0",borderColor:"#7F9CA0"}}]};this.skillTreeChart.setOption(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=E({type:n,selectors:[["app-learning-path-tab"]],viewQuery:function(t,i){if(t&1&&(S(G,5),S(U,5)),t&2){let s;F(s=D())&&(i.timelineChartRef=s.first),F(s=D())&&(i.skillTreeChartRef=s.first)}},standalone:!0,features:[w],decls:38,vars:2,consts:[["timelineChart",""],["skillTreeChart",""],[1,"map-card"],[1,"map-card__header"],[1,"map-card__title"],[1,"ri-route-fill"],[1,"map-card__desc"],[1,"filters"],[1,"filter-group"],["for","learningPathLevel"],["id","learningPathLevel",3,"change","value"],[3,"value"],[1,"progress-overview"],[1,"progress-card",3,"border-top-color"],[1,"chart-section"],[1,"chart-card"],[1,"chart-container"],["type","button",1,"export-btn",3,"click"],[1,"ri-download-2-line"],[1,"courses-section"],[1,"section-title"],[1,"course-grid"],[1,"course-card"],[1,"progress-card"],[1,"progress-card__label"],[1,"progress-card__value"],[1,"progress-card__bar"],[1,"progress-card__fill"],[1,"employee-selector"],["for","employeeSelect"],["id","employeeSelect",3,"change","value"],[1,"path-summary"],[1,"path-summary__title"],[1,"path-summary__desc"],[1,"path-steps"],[3,"class"],[1,"ri-arrow-right-line","path-arrow"],[1,"course-card__header"],[1,"course-badge"],[1,"course-card__title"],[1,"course-card__meta"],[1,"ri-time-line"],[1,"ri-user-line"],[1,"course-card__desc"],[1,"course-card__footer"],[1,"course-progress"],[1,"mini-progress-bar"],[1,"mini-progress-fill"]],template:function(t,i){if(t&1){let s=T();r(0,"div",2)(1,"header",3)(2,"h2",4),p(3,"i",5),l(4," \u5B78\u7FD2\u767C\u5C55\u8DEF\u5F91\u5716 (Learning Journey Map) "),a(),r(5,"p",6),l(6," \u70BA\u54E1\u5DE5\u63D0\u4F9B\u6E05\u6670\u7684\u8077\u6DAF\u767C\u5C55\u8DEF\u5F91\u8207\u500B\u4EBA\u5316\u5B78\u7FD2\u5730\u5716\u3002AI\u667A\u80FD\u63A8\u85A6\u5B78\u7FD2\u9806\u5E8F\u8207\u6642\u9593\u3002 "),a()(),r(7,"div",7)(8,"div",8)(9,"label",9),l(10,"\u8996\u5716\u5C64\u7D1A:"),a(),r(11,"select",10),b("change",function(Y){return f(s),_(i.switchViewLevel(Y.target.value))}),m(12,X,2,2,"option",11,H),a()()(),r(14,"div",12),m(15,Z,7,8,"div",13,J),a(),x(17,re,8,2),r(18,"section",14)(19,"div",15),p(20,"div",16,0),r(22,"button",17),b("click",function(){return f(s),_(i.exportChart("timeline"))}),p(23,"i",18),l(24," \u532F\u51FA\u6642\u9593\u8EF8 PNG "),a()()(),r(25,"section",14)(26,"div",15),p(27,"div",16,1),r(29,"button",17),b("click",function(){return f(s),_(i.exportChart("skillTree"))}),p(30,"i",18),l(31," \u532F\u51FA\u6280\u80FD\u6A39 PNG "),a()()(),r(32,"section",19)(33,"h3",20),l(34,"\u{1F4A1} AI \u63A8\u85A6\u8AB2\u7A0B"),a(),r(35,"div",21),m(36,se,23,10,"article",22,K),a()()()}t&2&&(o(11),d("value",i.viewLevel()),o(),u(i.viewLevelOptions),o(3),u(i.progressData()),o(2),C(i.viewLevel()==="individual"?17:-1),o(19),u(i.courses()))},dependencies:[V,z,R],styles:[".map-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #E2E4E8;padding:30px}.map-card__header[_ngcontent-%COMP%]{margin-bottom:25px}.map-card__title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#1f2937;margin-bottom:8px;display:flex;align-items:center;gap:10px}.map-card__title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7f9ca0}.map-card__desc[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;line-height:1.6}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;align-items:center;margin-bottom:30px;padding:20px;background:#f5f5f7;border-radius:10px}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1f2937;white-space:nowrap}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 15px;border:1px solid #E2E4E8;border-radius:8px;background:#fff;color:#1f2937;font-size:14px;cursor:pointer;transition:all .3s ease;min-width:180px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#64748b}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#64748b;box-shadow:0 0 0 3px #64748b1a}.progress-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px}.progress-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8;border-top:4px solid;position:relative;overflow:hidden}.progress-card__label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#6b7280;margin-bottom:10px;font-weight:700}.progress-card__value[_ngcontent-%COMP%]{display:block;font-size:36px;font-weight:800;color:#1f2937;margin-bottom:12px;letter-spacing:-1px;line-height:1.1}.progress-card__bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#f5f5f7;border-radius:4px;overflow:hidden}.progress-card__fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.employee-selector[_ngcontent-%COMP%]{margin-bottom:20px;padding:20px;background:#f5f5f7;border-radius:10px}.path-summary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea14,#764ba214);border:2px solid rgba(102,126,234,.2);border-radius:12px;padding:20px;margin-bottom:30px}.path-summary__title[_ngcontent-%COMP%]{color:#64748b;margin-bottom:12px;font-size:16px}.path-summary__desc[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-bottom:15px}.path-steps[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;overflow-x:auto;padding-bottom:5px}.path-arrow[_ngcontent-%COMP%]{color:#6b7280}.path-step[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;font-size:13px;font-weight:600;white-space:nowrap;border:2px solid}.path-step--completed[_ngcontent-%COMP%]{background:#7fb09526;border-color:#7fb095;color:#7fb095}.path-step--current[_ngcontent-%COMP%]{background:#7f9ca026;border-color:#7f9ca0;color:#7f9ca0}.path-step--pending[_ngcontent-%COMP%]{background:#858e961a;border-color:#e2e4e8;color:#6b7280}.chart-section[_ngcontent-%COMP%]{margin-bottom:30px}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8}.chart-container[_ngcontent-%COMP%]{width:100%;height:400px;margin-bottom:15px}.export-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#64748b;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px}.export-btn[_ngcontent-%COMP%]:hover{background:#475569;transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.export-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.courses-section[_ngcontent-%COMP%]{margin-top:30px}.section-title[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:20px;font-size:18px}.course-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.course-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;border:1px solid #E2E4E8;transition:all .3s ease;display:flex;flex-direction:column;gap:12px}.course-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f;border-color:#64748b}.course-card__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.course-card__title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#1f2937;line-height:1.4}.course-card__meta[_ngcontent-%COMP%]{display:flex;gap:15px;font-size:12px;color:#6b7280}.course-card__meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.course-card__desc[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;line-height:1.6;flex:1}.course-card__footer[_ngcontent-%COMP%]{padding-top:12px;border-top:1px solid #E2E4E8}.course-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:6px;font-size:12px;font-weight:600;color:#fff}.course-badge--basic[_ngcontent-%COMP%]{background:#8da399}.course-badge--advanced[_ngcontent-%COMP%]{background:#c9a88c}.course-badge--expert[_ngcontent-%COMP%]{background:#a89bb5}.course-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.course-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#1f2937;min-width:35px}.mini-progress-bar[_ngcontent-%COMP%]{flex:1;height:6px;background:#f5f5f7;border-radius:3px;overflow:hidden}.mini-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#7f9ca0,#8da399);border-radius:3px;transition:width .3s ease}@media (max-width: 1200px){.progress-overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.progress-overview[_ngcontent-%COMP%]{grid-template-columns:1fr}.path-steps[_ngcontent-%COMP%]{flex-wrap:wrap}}"],changeDetection:0})};var pe=()=>["\u6559\u80B2\u8A13\u7DF4","\u5B78\u7FD2\u767C\u5C55\u8DEF\u5F91\u5716"],Q=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=E({type:n,selectors:[["app-learning-path-page"]],standalone:!0,features:[w],decls:4,vars:2,consts:[["pageTitle","\u5B78\u7FD2\u767C\u5C55\u8DEF\u5F91\u5716",3,"breadcrumbs"],[1,"main-content"],[1,"content-container"]],template:function(t,i){t&1&&(p(0,"app-header",0),r(1,"main",1)(2,"div",2),p(3,"app-learning-path-tab"),a()()),t&2&&d("breadcrumbs",B(1,pe))},dependencies:[$,M],styles:["[_ngcontent-%COMP%]:root{--color-cloud-gray: #F5F5F7;--color-pure-white: #FCFCFD;--color-soft-gray: #E8E8EA;--color-text-primary: #464E56;--color-text-secondary: #6B7280;--color-text-dark: #1F2937;--color-brand-main: #64748B;--color-brand-light: #94A3B8;--color-brand-dark: #475569;--color-l1-sage: #8DA399;--color-l2-terracotta: #D6A28C;--color-l3-petrol: #7F9CA0;--color-l4-mauve: #9A8C98;--color-l5-brick: #B87D7B;--color-l6-rose: #C4A4A1;--color-success: #7FB095;--color-warning: #E3C088;--color-error: #C77F7F;--color-info: #8DA8BE;--sidebar-width: 280px;--sidebar-width-minimized: 80px;--header-height: 70px;--radius-sm: 6px;--radius-md: 8px;--radius-lg: 12px;--shadow-soft: 0 4px 20px rgba(0, 0, 0, .05);--shadow-md: 0 4px 12px rgba(0, 0, 0, .06);--shadow-lg: 0 8px 24px rgba(0, 0, 0, .08);--transition-normal: .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.main-content[_ngcontent-%COMP%]{padding:1.5rem;margin-top:70px}@media (max-width: 767px){.main-content[_ngcontent-%COMP%]{padding:1rem}}.content-container[_ngcontent-%COMP%]{max-width:1600px;margin:0 auto}"],changeDetection:0})};export{Q as LearningPathPageComponent};

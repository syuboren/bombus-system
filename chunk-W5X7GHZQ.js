import{a as be}from"./chunk-RPXXBRUV.js";import{a as ae,b as le,c as ce,d as de,e as se,f as me,g as pe,h as ue,i as ge,j as _e,k as Ce,l as fe}from"./chunk-6NWKX4EL.js";import{a as xe}from"./chunk-FPXKS7YP.js";import"./chunk-TKFFVAKG.js";import{$ as s,Ba as W,G as c,Ha as oe,L as f,La as re,N as E,O as U,P as b,Q as H,R as X,S as L,U as v,W as K,X as z,Y as N,Z as i,_ as r,aa as I,ba as g,ca as d,fa as J,ga as ee,ha as te,ia as a,ja as D,ka as M,n as q,o as Q,sa as ne,t as p,u,v as G,w as Z,za as ie}from"./chunk-Y7UTIMVI.js";import{a as A,b as T}from"./chunk-GAL4ENT6.js";var ve=["canvasContainer"],R=(l,n)=>n.id,De=(l,n)=>n.collaboration.id,Pe=(l,n)=>n.department.id;function Ee(l,n){if(l&1&&(i(0,"option",12),a(1),r()),l&2){let e=n.$implicit;b("value",e.id),c(),D(e.name)}}function Me(l,n){if(l&1){let e=I();i(0,"div",17)(1,"button",33),g("click",function(){p(e);let o=d();return u(o.toggleEditMode())}),s(2,"i",34),i(3,"span"),a(4),r()(),s(5,"div",35),i(6,"button",36),g("click",function(){p(e);let o=d();return u(o.toggleCollaborations())}),s(7,"i",30),r(),i(8,"button",37),g("click",function(){p(e);let o=d();return u(o.toggleGridSnap())}),s(9,"i",38),r(),s(10,"div",35),i(11,"button",39),g("click",function(){p(e);let o=d();return u(o.zoomOut())}),s(12,"i",40),r(),i(13,"span",41),a(14),r(),i(15,"button",42),g("click",function(){p(e);let o=d();return u(o.zoomIn())}),s(16,"i",43),r(),i(17,"button",44),g("click",function(){p(e);let o=d();return u(o.resetZoom())}),s(18,"i",45),r()()}if(l&2){let e=d();c(),X("active",e.isEditMode()),c(3),D(e.isEditMode()?"\u5B8C\u6210\u7DE8\u8F2F":"\u7DE8\u8F2F\u4F48\u5C40"),c(2),X("active",e.showCollaborations()),c(2),X("active",e.gridSnapEnabled()),c(6),M("",(e.canvasScale()*100).toFixed(0),"%")}}function Se(l,n){if(l&1&&(i(0,"span",75),a(1),r()),l&2){let e=d(2);c(),M(" \u5DF2\u9078\u53D6 ",e.selectedNodes().size," \u9805 ")}}function ye(l,n){if(l&1){let e=I();i(0,"section",18)(1,"div",46)(2,"span",47),a(3,"\u9078\u53D6\uFF1A"),r(),i(4,"button",48),g("click",function(){p(e);let o=d();return u(o.selectAllNodes())}),s(5,"i",49),a(6," \u5168\u9078 "),r(),i(7,"button",50),g("click",function(){p(e);let o=d();return u(o.clearSelection())}),s(8,"i",51),a(9," \u53D6\u6D88\u9078\u53D6 "),r(),E(10,Se,2,1,"span",52),r(),s(11,"div",53),i(12,"div",46)(13,"span",47),a(14,"\u5C0D\u9F4A\uFF1A"),r(),i(15,"button",54),g("click",function(){p(e);let o=d();return u(o.alignNodes("left"))}),s(16,"i",55),r(),i(17,"button",56),g("click",function(){p(e);let o=d();return u(o.alignNodes("center-h"))}),s(18,"i",57),r(),i(19,"button",58),g("click",function(){p(e);let o=d();return u(o.alignNodes("right"))}),s(20,"i",59),r(),s(21,"div",60),i(22,"button",61),g("click",function(){p(e);let o=d();return u(o.alignNodes("top"))}),s(23,"i",62),r(),i(24,"button",63),g("click",function(){p(e);let o=d();return u(o.alignNodes("center-v"))}),s(25,"i",64),r(),i(26,"button",65),g("click",function(){p(e);let o=d();return u(o.alignNodes("bottom"))}),s(27,"i",66),r()(),s(28,"div",53),i(29,"div",46)(30,"span",47),a(31,"\u5206\u5E03\uFF1A"),r(),i(32,"button",67),g("click",function(){p(e);let o=d();return u(o.alignNodes("distribute-h"))}),s(33,"i",68),r(),i(34,"button",69),g("click",function(){p(e);let o=d();return u(o.alignNodes("distribute-v"))}),s(35,"i",70),r()(),s(36,"div",53),i(37,"div",46)(38,"button",71),g("click",function(){p(e);let o=d();return u(o.undo())}),s(39,"i",72),a(40," \u9084\u539F "),r(),i(41,"button",73),g("click",function(){p(e);let o=d();return u(o.autoArrange())}),s(42,"i",74),a(43," \u81EA\u52D5\u6574\u7406 "),r()()()}if(l&2){let e=d();c(7),b("disabled",e.selectedNodes().size===0),c(3),b("ngIf",e.selectedNodes().size>0),c(5),b("disabled",e.selectedNodes().size<2),c(2),b("disabled",e.selectedNodes().size<2),c(2),b("disabled",e.selectedNodes().size<2),c(3),b("disabled",e.selectedNodes().size<2),c(2),b("disabled",e.selectedNodes().size<2),c(2),b("disabled",e.selectedNodes().size<2),c(6),b("disabled",e.selectedNodes().size<3),c(2),b("disabled",e.selectedNodes().size<3),c(4),b("disabled",!e.canUndo())}}function we(l,n){l&1&&(i(0,"div",31),s(1,"i",76),i(2,"span"),a(3,"\u8F09\u5165\u90E8\u9580\u7D50\u69CB\u4E2D..."),r()())}function ke(l,n){l&1&&s(0,"div",82)}function Oe(l,n){if(l&1&&(G(),s(0,"path",93)),l&2){let e=d().$implicit,t=d(3);U("d",t.getConnectionPath(e.parentDepartmentId,e.id))}}function Fe(l,n){if(l&1&&E(0,Oe,1,1,":svg:path",93),l&2){let e=n.$implicit;v(e.parentDepartmentId?0:-1)}}function Ve(l,n){if(l&1&&(G(),s(0,"line",94)),l&2){let e=n.$implicit,t=d(4);U("x1",t.getNodePosition(e.source.id).x)("y1",t.getNodePosition(e.source.id).y+35)("x2",t.getNodePosition(e.target.id).x)("y2",t.getNodePosition(e.target.id).y+35)("stroke",t.getCollaborationColor(e.collaboration.relationType))}}function Ae(l,n){if(l&1&&(z(0,Ve,1,5,":svg:line",94,De),G(),i(2,"defs")(3,"marker",95),s(4,"polygon",96),r()()),l&2){let e=d(3);N(e.collaborationLines())}}function Te(l,n){l&1&&(i(0,"div",98),s(1,"i",103),r())}function ze(l,n){if(l&1&&(i(0,"span"),s(1,"i",104),a(2),r()),l&2){let e=d().$implicit;c(2),M(" ",e.managerName,"")}}function Ne(l,n){if(l&1){let e=I();i(0,"div",97),g("mousedown",function(o){let m=p(e).$implicit,x=d(3);return u(x.onNodeMouseDown(o,m.id))})("click",function(o){let m=p(e).$implicit,x=d(3);return u(x.onNodeClick(o,m))}),E(1,Te,2,0,"div",98),i(2,"div",99),s(3,"i"),r(),i(4,"div",100)(5,"div",101),a(6),r(),i(7,"div",102),E(8,ze,3,1,"span"),i(9,"span"),s(10,"i",29),a(11),r()()()()}if(l&2){let e=n.$implicit,t=d(3);H("left",t.getNodePosition(e.id).x-100,"px")("top",t.getNodePosition(e.id).y,"px")("border-color",t.getDepartmentColor(e)),X("dept-node--level-0",e.level===1)("dept-node--level-1",e.level===2)("dept-node--level-2",e.level===3)("selected",t.isNodeSelected(e.id))("draggable",t.isEditMode()),c(),v(t.isEditMode()?1:-1),c(),H("background",t.getDepartmentColor(e)),c(),L(e.icon||"ri-folder-line"),c(3),D(e.name),c(2),v(e.managerName?8:-1),c(3),M(" ",e.employeeCount," \u4EBA")}}function Ie(l,n){l&1&&(i(0,"div",86)(1,"span",87),a(2,"\u5354\u4F5C\u985E\u578B"),r(),i(3,"div",88),s(4,"span",105),i(5,"span"),a(6,"\u5E73\u884C\u5354\u4F5C"),r()(),i(7,"div",88),s(8,"span",106),i(9,"span"),a(10,"\u4E0B\u6E38\u6D41\u7A0B"),r()()())}function Be(l,n){l&1&&(i(0,"div",92),s(1,"i",107),i(2,"span"),a(3,"\u62D6\u66F3\u7BC0\u9EDE\u8ABF\u6574\u4F4D\u7F6E \xB7 Ctrl/Cmd + \u9EDE\u64CA\u591A\u9078 \xB7 \u4F7F\u7528\u5DE5\u5177\u5217\u5C0D\u9F4A"),r()())}function $e(l,n){if(l&1){let e=I();i(0,"section",79)(1,"div",80,0),g("mousedown",function(o){p(e);let m=d(2);return u(m.onCanvasMouseDown(o))})("mousemove",function(o){p(e);let m=d(2);return u(m.onCanvasMouseMove(o))})("mouseup",function(){p(e);let o=d(2);return u(o.onCanvasMouseUp())})("mouseleave",function(){p(e);let o=d(2);return u(o.onCanvasMouseUp())})("wheel",function(o){p(e);let m=d(2);return u(m.onCanvasWheel(o))}),i(3,"div",81),E(4,ke,1,0,"div",82),G(),i(5,"svg",83),z(6,Fe,1,1,null,null,R),E(8,Ae,5,0,":svg:defs"),r(),z(9,Ne,12,24,"div",84,R),r()(),Z(),i(11,"div",85)(12,"div",86)(13,"span",87),a(14,"\u90E8\u9580\u5C64\u7D1A"),r(),i(15,"div",88),s(16,"span",89),i(17,"span"),a(18,"\u4E00\u7D1A\u90E8\u9580"),r()(),i(19,"div",88),s(20,"span",90),i(21,"span"),a(22,"\u4E8C\u7D1A\u90E8\u9580"),r()(),i(23,"div",88),s(24,"span",91),i(25,"span"),a(26,"\u4E09\u7D1A\u90E8\u9580"),r()()(),E(27,Ie,11,0,"div",86),r(),E(28,Be,4,0,"div",92),r()}if(l&2){let e=d(2);X("edit-mode",e.isEditMode()),c(),X("panning",e.isPanning())("editing",e.isEditMode()),c(2),H("transform","translate("+e.canvasPanX()+"px, "+e.canvasPanY()+"px) scale("+e.canvasScale()+")"),c(),v(e.isEditMode()&&e.gridSnapEnabled()?4:-1),c(2),N(e.getAllDepartmentsFlat()),c(2),v(e.showCollaborations()?8:-1),c(),N(e.getAllDepartmentsFlat()),c(18),v(e.showCollaborations()?27:-1),c(),v(e.isEditMode()?28:-1)}}function Ye(l,n){l&1&&(i(0,"span",120),a(1,"\u2514"),r())}function He(l,n){if(l&1){let e=I();i(0,"tr",118)(1,"td",110)(2,"div",119),E(3,Ye,2,0,"span",120),i(4,"div",121)(5,"div",122),s(6,"i"),r(),i(7,"span",123),a(8),r()()()(),i(9,"td",111),a(10),r(),i(11,"td",112),a(12),r(),i(13,"td",113),a(14),r(),i(15,"td",114)(16,"span",124),a(17),r()(),i(18,"td",115)(19,"span",125),a(20),r()(),i(21,"td",116)(22,"button",126),g("click",function(){let o=p(e).$implicit,m=d(3);return u(m.selectDepartment(o.department))}),s(23,"i",127),r(),i(24,"button",128),s(25,"i",129),r()()()}if(l&2){let e=n.$implicit,t=d(3);L("level-"+e.level),c(2),H("padding-left",e.level*24,"px"),c(),v(e.level>0?3:-1),c(2),H("background",t.getDepartmentColor(e.department)),c(),L(e.department.icon||"ri-folder-line"),c(2),D(e.department.name),c(2),D(e.department.code),c(2),D(e.department.managerName||"-"),c(2),M("",e.department.employeeCount," \u4EBA"),c(2),L("level-"+e.department.level),c(),M(" Level ",e.department.level," "),c(3),M(" ",t.getDepartmentCollaborations(e.department.id).length," \u9805 ")}}function Xe(l,n){if(l&1&&(i(0,"section",78)(1,"div",108)(2,"table",109)(3,"thead")(4,"tr")(5,"th",110),a(6,"\u90E8\u9580\u540D\u7A31"),r(),i(7,"th",111),a(8,"\u4EE3\u78BC"),r(),i(9,"th",112),a(10,"\u4E3B\u7BA1"),r(),i(11,"th",113),a(12,"\u54E1\u5DE5\u6578"),r(),i(13,"th",114),a(14,"\u5C64\u7D1A"),r(),i(15,"th",115),a(16,"\u5354\u4F5C\u95DC\u4FC2"),r(),i(17,"th",116),a(18,"\u64CD\u4F5C"),r()()(),i(19,"tbody"),z(20,He,26,17,"tr",117,Pe),r()()()()),l&2){let e=d(2);c(20),N(e.flatDepartmentList())}}function Le(l,n){if(l&1&&E(0,$e,29,12,"section",77)(1,Xe,22,0,"section",78),l&2){let e=d();v(e.viewMode()==="canvas"?0:-1),c(),v(e.viewMode()==="list"?1:-1)}}function je(l,n){if(l&1){let e=I();i(0,"button",152),g("click",function(){p(e);let o=d(2);return u(o.goBackDepartment())}),s(1,"i",153),r()}}function We(l,n){if(l&1&&(i(0,"li",155),s(1,"i",156),i(2,"span"),a(3),r()()),l&2){let e=n.$implicit;c(3),D(e)}}function Re(l,n){if(l&1&&(i(0,"div",142)(1,"h3",143),a(2,"\u90E8\u9580\u8077\u8CAC"),r(),i(3,"ul",154),z(4,We,4,1,"li",155,K),r()()),l&2){let e=d();c(4),N(e.responsibilities)}}function Ge(l,n){if(l&1){let e=I();i(0,"div",159),g("click",function(){let o=p(e).$implicit,m=d(3);return u(m.selectDepartment(o))}),i(1,"div",160),s(2,"i"),r(),i(3,"span",161),a(4),r(),i(5,"span",162),a(6),r()()}if(l&2){let e=n.$implicit,t=d(3);c(),H("background",t.getDepartmentColor(e)),c(),L(e.icon||"ri-folder-line"),c(2),D(e.name),c(2),M("",e.employeeCount," \u4EBA")}}function qe(l,n){if(l&1&&(i(0,"div",142)(1,"h3",143),a(2,"\u4E0B\u8F44\u90E8\u9580"),r(),i(3,"div",157),z(4,Ge,7,6,"div",158,R),r()()),l&2){let e=d(),t=d();c(4),N(t.getChildDepartments(e.id))}}function Ue(l,n){if(l&1&&a(0),l&2){let e,t=d().$implicit,o=d(3);M(" \u2192 ",(e=o.getDepartmentById(t.targetDepartmentId))==null?null:e.name," ")}}function Qe(l,n){if(l&1&&a(0),l&2){let e,t=d().$implicit,o=d(3);M(" \u2190 ",(e=o.getDepartmentById(t.sourceDepartmentId))==null?null:e.name," ")}}function Ze(l,n){if(l&1&&(i(0,"div",164)(1,"div",165)(2,"span",166),a(3),r(),i(4,"span",167),E(5,Ue,1,1)(6,Qe,1,1),r()(),i(7,"p",168),a(8),r(),i(9,"div",169)(10,"span"),s(11,"i",170),a(12),r(),i(13,"span"),s(14,"i",171),a(15),r()()()),l&2){let e=n.$implicit,t=d(2),o=d();c(2),H("background",o.getCollaborationColor(e.relationType)),c(),M(" ",o.getCollaborationLabel(e.relationType)," "),c(2),v(e.sourceDepartmentId===t.id?5:6),c(3),D(e.workflowDescription),c(4),M(" ",e.communicationChannel,""),c(3),M(" ",o.getFrequencyLabel(e.frequency),"")}}function Ke(l,n){if(l&1&&(i(0,"div",142)(1,"h3",143),a(2,"\u5354\u4F5C\u95DC\u4FC2"),r(),i(3,"div",163),z(4,Ze,16,7,"div",164,R),r()()),l&2){let e=d(),t=d();c(4),N(t.getDepartmentCollaborations(e.id))}}function Je(l,n){if(l&1){let e=I();i(0,"div",130),g("click",function(){p(e);let o=d();return u(o.closeDepartmentModal())}),i(1,"div",131),g("click",function(o){return p(e),u(o.stopPropagation())}),i(2,"div",132)(3,"div",133),E(4,je,2,0,"button",134),i(5,"div",135),s(6,"i"),r(),i(7,"div")(8,"h2",136),a(9),r(),i(10,"p",137),a(11),r()()(),i(12,"button",138),g("click",function(){p(e);let o=d();return u(o.closeDepartmentModal())}),s(13,"i",139),r()(),i(14,"div",140)(15,"div",141)(16,"div",142)(17,"h3",143),a(18,"\u57FA\u672C\u8CC7\u8A0A"),r(),i(19,"div",144)(20,"div",145)(21,"span",146),a(22,"\u90E8\u9580\u4EE3\u78BC"),r(),i(23,"span",147),a(24),r()(),i(25,"div",145)(26,"span",146),a(27,"\u90E8\u9580\u5C64\u7D1A"),r(),i(28,"span",147)(29,"span",124),a(30),r()()(),i(31,"div",145)(32,"span",146),a(33,"\u90E8\u9580\u4E3B\u7BA1"),r(),i(34,"span",147),a(35),r()(),i(36,"div",145)(37,"span",146),a(38,"\u54E1\u5DE5\u4EBA\u6578"),r(),i(39,"span",147),a(40),r()()()(),E(41,Re,6,0,"div",142)(42,qe,6,0,"div",142)(43,Ke,6,0,"div",142),r()(),i(44,"div",148)(45,"button",149),g("click",function(){let o=p(e),m=d();return u(m.confirmDeleteDepartment(o))}),s(46,"i",150),a(47," \u522A\u9664\u90E8\u9580 "),r(),i(48,"button",151),g("click",function(){p(e);let o=d();return u(o.closeDepartmentModal())}),a(49,"\u95DC\u9589"),r(),i(50,"button",5),g("click",function(){let o=p(e),m=d();return u(m.openEditDepartmentForm(o))}),s(51,"i",129),a(52," \u7DE8\u8F2F\u90E8\u9580 "),r()()()()}if(l&2){let e=n,t=d();c(4),v(t.canGoBackDepartment()?4:-1),c(),H("background",t.getDepartmentColor(e)),c(),L(e.icon||"ri-folder-line"),c(3),D(e.name),c(2),D(t.getCompanyName(e.companyId)),c(13),D(e.code),c(5),L("level-"+e.level),c(),M("Level ",e.level,""),c(5),D(e.managerName||"\u672A\u6307\u6D3E"),c(5),M("",e.employeeCount," \u4EBA"),c(),v(e.responsibilities&&e.responsibilities.length>0?41:-1),c(),v(t.getChildDepartments(e.id).length>0?42:-1),c(),v(t.getDepartmentCollaborations(e.id).length>0?43:-1)}}function et(l,n){if(l&1&&(i(0,"option",12),a(1),r()),l&2){let e=n.$implicit;b("value",e.id),c(),D(e.name)}}function tt(l,n){if(l&1&&(i(0,"option",12),a(1),r()),l&2){let e=d().$implicit;b("value",e.id),c(),D(e.name)}}function nt(l,n){if(l&1&&E(0,tt,2,2,"option",12),l&2){let e=n.$implicit,t=d(2);v(e.id!==t.departmentForm().id?0:-1)}}function it(l,n){if(l&1){let e=I();i(0,"div",130),g("click",function(){p(e);let o=d();return u(o.closeDepartmentForm())}),i(1,"div",172),g("click",function(o){return p(e),u(o.stopPropagation())}),i(2,"div",132)(3,"h2",136),s(4,"i"),a(5),r(),i(6,"button",138),g("click",function(){p(e);let o=d();return u(o.closeDepartmentForm())}),s(7,"i",139),r()(),i(8,"div",140)(9,"form",173)(10,"div",174)(11,"div",175)(12,"label",176),a(13,"\u90E8\u9580\u540D\u7A31"),r(),i(14,"input",177),g("ngModelChange",function(o){p(e);let m=d();return u(m.updateDeptFormField("name",o))}),r()(),i(15,"div",175)(16,"label",176),a(17,"\u90E8\u9580\u4EE3\u78BC"),r(),i(18,"input",178),g("ngModelChange",function(o){p(e);let m=d();return u(m.updateDeptFormField("code",o))}),r()()(),i(19,"div",174)(20,"div",175)(21,"label",179),a(22,"\u6240\u5C6C\u516C\u53F8"),r(),i(23,"select",180),g("ngModelChange",function(o){p(e);let m=d();return u(m.updateDeptFormField("companyId",o))}),z(24,et,2,2,"option",12,R),r()(),i(26,"div",175)(27,"label",179),a(28,"\u4E0A\u7D1A\u90E8\u9580"),r(),i(29,"select",181),g("ngModelChange",function(o){p(e);let m=d();return u(m.updateDeptFormField("parentDepartmentId",o))}),i(30,"option",182),a(31,"\u7121\uFF08\u4E00\u7D1A\u90E8\u9580\uFF09"),r(),z(32,nt,1,1,null,null,R),r()()(),i(34,"div",174)(35,"div",175)(36,"label",179),a(37,"\u90E8\u9580\u4E3B\u7BA1"),r(),i(38,"input",183),g("ngModelChange",function(o){p(e);let m=d();return u(m.updateDeptFormField("managerName",o))}),r()(),i(39,"div",175)(40,"label",179),a(41,"\u54E1\u5DE5\u4EBA\u6578"),r(),i(42,"input",184),g("ngModelChange",function(o){p(e);let m=d();return u(m.updateDeptFormField("employeeCount",o))}),r()()(),i(43,"div",174)(44,"div",175)(45,"label",179),a(46,"\u90E8\u9580\u984F\u8272"),r(),i(47,"input",185),g("ngModelChange",function(o){p(e);let m=d();return u(m.updateDeptFormField("color",o))}),r()(),i(48,"div",175)(49,"label",179),a(50,"\u90E8\u9580\u5716\u6A19"),r(),i(51,"select",181),g("ngModelChange",function(o){p(e);let m=d();return u(m.updateDeptFormField("icon",o))}),i(52,"option",186),a(53,"\u8CC7\u6599\u593E"),r(),i(54,"option",187),a(55,"\u5718\u968A"),r(),i(56,"option",188),a(57,"\u7A0B\u5F0F\u78BC"),r(),i(58,"option",189),a(59,"\u8CA1\u52D9"),r(),i(60,"option",190),a(61,"\u5BA2\u670D"),r(),i(62,"option",191),a(63,"\u5168\u7403"),r(),i(64,"option",192),a(65,"\u5275\u610F"),r(),i(66,"option",193),a(67,"\u706B\u7BAD"),r()()()()()(),i(68,"div",148)(69,"button",151),g("click",function(){p(e);let o=d();return u(o.closeDepartmentForm())}),a(70,"\u53D6\u6D88"),r(),i(71,"button",5),g("click",function(){p(e);let o=d();return u(o.saveDepartment())}),s(72,"i",194),a(73),r()()()()}if(l&2){let e=d();c(4),L(e.isEditingDepartment()?"ri-edit-line":"ri-add-line"),c(),M(" ",e.isEditingDepartment()?"\u7DE8\u8F2F\u90E8\u9580\u8CC7\u8A0A":"\u65B0\u589E\u90E8\u9580"," "),c(9),b("ngModel",e.departmentForm().name),c(4),b("ngModel",e.departmentForm().code),c(5),b("ngModel",e.departmentForm().companyId)("disabled",e.isEditingDepartment()),c(),N(e.companies()),c(5),b("ngModel",e.departmentForm().parentDepartmentId),c(3),N(e.filteredDepartments()),c(6),b("ngModel",e.departmentForm().managerName),c(4),b("ngModel",e.departmentForm().employeeCount),c(5),b("ngModel",e.departmentForm().color),c(4),b("ngModel",e.departmentForm().icon),c(22),M(" ",e.isEditingDepartment()?"\u5132\u5B58\u8B8A\u66F4":"\u5EFA\u7ACB\u90E8\u9580"," ")}}function ot(l,n){if(l&1&&(i(0,"p",200),s(1,"i",203),a(2),r()),l&2){let e=d();c(2),M(" \u8A72\u90E8\u9580\u6709 ",e.employeeCount," \u540D\u54E1\u5DE5\uFF0C\u7121\u6CD5\u522A\u9664\u3002 ")}}function rt(l,n){if(l&1&&(i(0,"p",200),s(1,"i",203),a(2),r()),l&2){let e=d(),t=d();c(2),M(" \u8A72\u90E8\u9580\u6709 ",t.getChildDepartments(e.id).length," \u500B\u4E0B\u5C6C\u90E8\u9580\uFF0C\u8ACB\u5148\u522A\u9664\u4E0B\u5C6C\u90E8\u9580\u3002 ")}}function at(l,n){l&1&&(i(0,"p",201),s(1,"i",203),a(2," \u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\uFF0C\u8ACB\u8B39\u614E\u64CD\u4F5C\u3002 "),r())}function lt(l,n){if(l&1){let e=I();i(0,"div",130),g("click",function(){p(e);let o=d();return u(o.cancelDelete())}),i(1,"div",195),g("click",function(o){return p(e),u(o.stopPropagation())}),i(2,"div",196)(3,"h2",136),s(4,"i",197),a(5," \u78BA\u8A8D\u522A\u9664 "),r()(),i(6,"div",140)(7,"div",198)(8,"p",199),a(9," \u60A8\u78BA\u5B9A\u8981\u522A\u9664\u90E8\u9580 "),i(10,"strong"),a(11),r(),a(12," \u55CE\uFF1F "),r(),E(13,ot,3,1,"p",200)(14,rt,3,1,"p",200)(15,at,3,0,"p",201),r()(),i(16,"div",148)(17,"button",151),g("click",function(){p(e);let o=d();return u(o.cancelDelete())}),a(18,"\u53D6\u6D88"),r(),i(19,"button",202),g("click",function(){p(e);let o=d();return u(o.executeDeleteDepartment())}),s(20,"i",150),a(21," \u78BA\u8A8D\u522A\u9664 "),r()()()()}if(l&2){let e=n,t=d();c(11),D(e.name),c(2),v(e.employeeCount>0?13:t.getChildDepartments(e.id).length>0?14:15),c(6),b("disabled",e.employeeCount>0||t.getChildDepartments(e.id).length>0)}}var he=class l{orgService=q(be);cdr=q(ie);canvasContainerRef;pageTitle="\u90E8\u9580\u7D50\u69CB\u7BA1\u7406";breadcrumbs=["\u9996\u9801","\u7D44\u7E54\u7BA1\u7406"];companies=f([]);departments=f([]);collaborations=f([]);loading=f(!0);selectedCompanyId=f("");viewMode=f("canvas");isEditMode=f(!1);canvasScale=f(1);canvasPanX=f(0);canvasPanY=f(0);isPanning=f(!1);panStartX=0;panStartY=0;nodePositions=f(new Map);positionHistory=f([]);maxHistoryLength=50;nodeWidth=200;nodeHeight=90;isDraggingNode=f(!1);draggingNodeId=f(null);dragNodeOffsetX=0;dragNodeOffsetY=0;selectedNodes=f(new Set);gridSnapEnabled=f(!0);gridSize=20;selectedDepartment=f(null);showDepartmentModal=f(!1);departmentViewHistory=f([]);showDepartmentForm=f(!1);isEditingDepartment=f(!1);departmentForm=f({});showDeleteConfirm=f(!1);departmentToDelete=f(null);showCollaborations=f(!0);filteredDepartments=W(()=>{let n=this.selectedCompanyId(),e=this.departments();return n?e.filter(t=>t.companyId===n):e});departmentTree=W(()=>{let n=this.filteredDepartments(),e=n.filter(o=>!o.parentDepartmentId),t=o=>{let m=n.filter(x=>x.parentDepartmentId===o.id);return{department:o,children:m.map(x=>t(x)),expanded:!0}};return e.map(o=>t(o))});flatDepartmentList=W(()=>{let n=[],e=(t,o)=>{t.forEach(m=>{n.push({department:m.department,level:o}),e(m.children,o+1)})};return e(this.departmentTree(),0),n});level2DepartmentCount=W(()=>this.filteredDepartments().filter(n=>n.level===2).length);level3DepartmentCount=W(()=>this.filteredDepartments().filter(n=>n.level===3).length);totalEmployeeCount=W(()=>this.filteredDepartments().reduce((n,e)=>n+e.employeeCount,0));collaborationLines=W(()=>{let n=this.collaborations(),e=this.filteredDepartments(),t=new Map(e.map(o=>[o.id,o]));return n.filter(o=>t.has(o.sourceDepartmentId)&&t.has(o.targetDepartmentId)).map(o=>({collaboration:o,source:t.get(o.sourceDepartmentId),target:t.get(o.targetDepartmentId)}))});ngOnInit(){this.loadData()}ngAfterViewInit(){}loadData(){this.loading.set(!0),this.orgService.getCompanies().subscribe(n=>{this.companies.set(n),n.length>0&&!this.selectedCompanyId()&&this.selectedCompanyId.set(n[0].id)}),this.orgService.getDepartments().subscribe(n=>{this.departments.set(n),this.initializeNodePositions(),this.loading.set(!1)}),this.orgService.getDepartmentCollaborations().subscribe(n=>{this.collaborations.set(n)})}initializeNodePositions(){let n=new Map,e=this.filteredDepartments(),t=e.filter(y=>!y.parentDepartmentId),o=200,m=220,x=160,S=y=>{let w=e.filter(P=>P.parentDepartmentId===y.id);if(w.length===0)return o;let k=w.reduce((P,h)=>P+S(h),0),Y=(w.length-1)*(m-o);return Math.max(o,k+Y)},j=(y,w,k)=>{let Y=k;y.forEach(P=>{let h=S(P),F=Y+(h-o)/2,O=40+w*x;n.set(P.id,{id:P.id,x:F,y:O});let _=e.filter(C=>C.parentDepartmentId===P.id);_.length>0&&j(_,w+1,Y),Y+=h+(m-o)})},B=t.reduce((y,w)=>y+S(w),0)+(t.length-1)*(m-o),$=Math.max(40,500-B/2);j(t,0,$),this.nodePositions.set(n)}getNodePosition(n){return this.nodePositions().get(n)||{id:n,x:400,y:40}}onCompanyChange(n){this.selectedCompanyId.set(n),setTimeout(()=>this.initializeNodePositions(),100)}setViewMode(n){this.viewMode.set(n)}toggleEditMode(){this.isEditMode.update(n=>!n),this.isEditMode()||this.selectedNodes.set(new Set)}toggleCollaborations(){this.showCollaborations.update(n=>!n)}toggleGridSnap(){this.gridSnapEnabled.update(n=>!n)}zoomIn(){this.canvasScale.update(n=>Math.min(n+.1,2))}zoomOut(){this.canvasScale.update(n=>Math.max(n-.1,.5))}resetZoom(){this.canvasScale.set(1),this.canvasPanX.set(0),this.canvasPanY.set(0)}onCanvasMouseDown(n){n.target.closest(".dept-node")||(this.isPanning.set(!0),this.panStartX=n.clientX-this.canvasPanX(),this.panStartY=n.clientY-this.canvasPanY(),this.isEditMode()&&this.selectedNodes.set(new Set))}onCanvasMouseMove(n){if(this.isPanning()&&(this.canvasPanX.set(n.clientX-this.panStartX),this.canvasPanY.set(n.clientY-this.panStartY)),this.isDraggingNode()&&this.draggingNodeId()){let e=this.canvasScale(),t=(n.clientX-this.dragNodeOffsetX)/e,o=(n.clientY-this.dragNodeOffsetY)/e;this.gridSnapEnabled()&&(t=Math.round(t/this.gridSize)*this.gridSize,o=Math.round(o/this.gridSize)*this.gridSize);let m=new Map(this.nodePositions()),x=this.draggingNodeId(),S=m.get(x);if(S){let j=t-S.x,B=o-S.y;this.selectedNodes().has(x)&&this.selectedNodes().size>1?this.selectedNodes().forEach($=>{let y=m.get($);if(y){let w=y.x+j,k=y.y+B;this.gridSnapEnabled()&&(w=Math.round(w/this.gridSize)*this.gridSize,k=Math.round(k/this.gridSize)*this.gridSize),m.set($,T(A({},y),{x:w,y:k}))}}):m.set(x,{id:x,x:t,y:o})}this.nodePositions.set(m),this.cdr.detectChanges()}}onCanvasMouseUp(){this.isPanning.set(!1),this.isDraggingNode.set(!1),this.draggingNodeId.set(null)}onCanvasWheel(n){n.preventDefault();let e=n.deltaY>0?-.05:.05;this.canvasScale.update(t=>Math.max(.5,Math.min(2,t+e)))}saveToHistory(){let n=new Map(this.nodePositions());this.positionHistory.update(e=>{let t=[...e,n];return t.length>this.maxHistoryLength&&t.shift(),t})}undo(){let n=this.positionHistory();if(n.length===0)return;let e=n[n.length-1];this.positionHistory.update(t=>t.slice(0,-1)),this.nodePositions.set(e)}canUndo(){return this.positionHistory().length>0}onNodeMouseDown(n,e){if(n.stopPropagation(),this.isEditMode()){this.saveToHistory(),n.ctrlKey||n.metaKey?this.selectedNodes.update(m=>{let x=new Set(m);return x.has(e)?x.delete(e):x.add(e),x}):this.selectedNodes().has(e)||this.selectedNodes.set(new Set([e])),this.isDraggingNode.set(!0),this.draggingNodeId.set(e);let t=this.getNodePosition(e),o=this.canvasScale();this.dragNodeOffsetX=n.clientX-t.x*o,this.dragNodeOffsetY=n.clientY-t.y*o}}onNodeClick(n,e){n.stopPropagation(),this.isEditMode()||this.selectDepartment(e)}isNodeSelected(n){return this.selectedNodes().has(n)}alignNodes(n){let e=Array.from(this.selectedNodes());if(e.length<2)return;let t=new Map(this.nodePositions()),o=e.map(S=>t.get(S)).filter(S=>S);if(o.length<2)return;let m=o.map(S=>S.x),x=o.map(S=>S.y);switch(n){case"left":let S=Math.min(...m);e.forEach(_=>{let C=t.get(_);C&&t.set(_,T(A({},C),{x:S}))});break;case"center-h":let j=m.reduce((_,C)=>_+C,0)/m.length;e.forEach(_=>{let C=t.get(_);C&&t.set(_,T(A({},C),{x:Math.round(j/this.gridSize)*this.gridSize}))});break;case"right":let B=Math.max(...m);e.forEach(_=>{let C=t.get(_);C&&t.set(_,T(A({},C),{x:B}))});break;case"top":let $=Math.min(...x);e.forEach(_=>{let C=t.get(_);C&&t.set(_,T(A({},C),{y:$}))});break;case"center-v":let y=x.reduce((_,C)=>_+C,0)/x.length;e.forEach(_=>{let C=t.get(_);C&&t.set(_,T(A({},C),{y:Math.round(y/this.gridSize)*this.gridSize}))});break;case"bottom":let w=Math.max(...x);e.forEach(_=>{let C=t.get(_);C&&t.set(_,T(A({},C),{y:w}))});break;case"distribute-h":if(e.length<3)return;let k=[...o].sort((_,C)=>_.x-C.x),P=(k[k.length-1].x-k[0].x)/(k.length-1);k.forEach((_,C)=>{let V=k[0].x+C*P;t.set(_.id,T(A({},_),{x:Math.round(V/this.gridSize)*this.gridSize}))});break;case"distribute-v":if(e.length<3)return;let h=[...o].sort((_,C)=>_.y-C.y),O=(h[h.length-1].y-h[0].y)/(h.length-1);h.forEach((_,C)=>{let V=h[0].y+C*O;t.set(_.id,T(A({},_),{y:Math.round(V/this.gridSize)*this.gridSize}))});break}this.nodePositions.set(t)}autoArrange(){this.initializeNodePositions(),this.selectedNodes.set(new Set)}selectAllNodes(){let n=new Set(this.filteredDepartments().map(e=>e.id));this.selectedNodes.set(n)}clearSelection(){this.selectedNodes.set(new Set)}selectDepartment(n,e=!0){if(e){let t=this.selectedDepartment();t&&this.departmentViewHistory.update(o=>[...o,t])}this.selectedDepartment.set(n),this.showDepartmentModal.set(!0)}goBackDepartment(){let n=this.departmentViewHistory();if(n.length===0)return;let e=n[n.length-1];this.departmentViewHistory.update(t=>t.slice(0,-1)),this.selectDepartment(e,!1)}canGoBackDepartment(){return this.departmentViewHistory().length>0}closeDepartmentModal(){this.showDepartmentModal.set(!1),this.selectedDepartment.set(null),this.departmentViewHistory.set([])}getDepartmentColor(n){return n.color||"#D6A28C"}getCollaborationColor(n){return{upstream:"#4682B4",downstream:"#6B8E23",parallel:"#CD853F",support:"#9370DB"}[n]||"#94A3B8"}getCollaborationLabel(n){return{upstream:"\u4E0A\u6E38",downstream:"\u4E0B\u6E38",parallel:"\u5E73\u884C",support:"\u652F\u63F4"}[n]||n}getFrequencyLabel(n){return{daily:"\u6BCF\u65E5",weekly:"\u6BCF\u9031",monthly:"\u6BCF\u6708",as_needed:"\u6309\u9700"}[n]||n}getCompanyName(n){return this.companies().find(e=>e.id===n)?.name||""}getDepartmentById(n){return this.departments().find(e=>e.id===n)}getChildDepartments(n){return this.filteredDepartments().filter(e=>e.parentDepartmentId===n)}getDepartmentCollaborations(n){return this.collaborations().filter(e=>e.sourceDepartmentId===n||e.targetDepartmentId===n)}getConnectionPath(n,e){let t=this.getNodePosition(n),o=this.getNodePosition(e),m=t.y,x=t.y+this.nodeHeight,S=t.x-this.nodeWidth/2,j=t.x+this.nodeWidth/2,B=t.y+this.nodeHeight/2,$=o.y,y=o.y+this.nodeHeight,w=o.x-this.nodeWidth/2,k=o.x+this.nodeWidth/2,Y=o.y+this.nodeHeight/2,P,h,F,O,_=y<B,C=$>B;if(_){P=t.x,h=m,F=o.x,O=y;let V=h+(O-h)/2;return`M ${P} ${h} C ${P} ${V}, ${F} ${V}, ${F} ${O}`}else if(C){P=t.x,h=x,F=o.x,O=$;let V=h+(O-h)/2;return`M ${P} ${h} C ${P} ${V}, ${F} ${V}, ${F} ${O}`}else{o.x>t.x?(P=j,h=B,F=w,O=Y):(P=S,h=B,F=k,O=Y);let V=P+(F-P)/2;return`M ${P} ${h} C ${V} ${h}, ${V} ${O}, ${F} ${O}`}}getAllDepartmentsFlat(){return this.filteredDepartments()}getParentDepartment(n){if(n.parentDepartmentId)return this.filteredDepartments().find(e=>e.id===n.parentDepartmentId)}openCreateDepartmentForm(){let n=this.selectedCompanyId()||this.companies()[0]?.id||"",e=this.companies().find(t=>t.id===n);this.departmentForm.set({companyId:n,name:"",code:"",parentDepartmentId:void 0,managerId:void 0,managerName:void 0,level:1,employeeCount:0,responsibilities:[],color:"#D6A28C",icon:"ri-folder-line"}),this.isEditingDepartment.set(!1),this.showDepartmentForm.set(!0)}openEditDepartmentForm(n){this.departmentForm.set(A({},n)),this.isEditingDepartment.set(!0),this.showDepartmentForm.set(!0),this.closeDepartmentModal()}closeDepartmentForm(){this.showDepartmentForm.set(!1),this.departmentForm.set({})}saveDepartment(){let n=this.departmentForm();if(!n.name||!n.code){alert("\u8ACB\u586B\u5BEB\u90E8\u9580\u540D\u7A31\u548C\u4EE3\u78BC");return}if(n.parentDepartmentId){let e=this.departments().find(t=>t.id===n.parentDepartmentId);e&&(n.level=(e.level||1)+1)}else n.level=1;this.isEditingDepartment()?this.orgService.updateDepartment(n.id,n).subscribe(e=>{e&&(this.loadData(),this.closeDepartmentForm())}):this.orgService.createDepartment(n).subscribe(e=>{this.loadData(),this.closeDepartmentForm()})}confirmDeleteDepartment(n){this.departmentToDelete.set(n),this.showDeleteConfirm.set(!0),this.closeDepartmentModal()}cancelDelete(){this.showDeleteConfirm.set(!1),this.departmentToDelete.set(null)}executeDeleteDepartment(){let n=this.departmentToDelete();n&&this.orgService.deleteDepartment(n.id).subscribe(e=>{e.success?this.loadData():alert(e.message),this.cancelDelete()})}updateDeptFormField(n,e){this.departmentForm.update(t=>T(A({},t),{[n]:e}))}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=Q({type:l,selectors:[["app-department-structure-page"]],viewQuery:function(e,t){if(e&1&&J(ve,5),e&2){let o;ee(o=te())&&(t.canvasContainerRef=o.first)}},standalone:!0,features:[ne],decls:74,vars:19,consts:[["canvasContainer",""],[3,"pageTitle","breadcrumbs"],[1,"header-actions"],["type","button",1,"btn-secondary"],[1,"ri-download-line"],["type","button",1,"btn-primary",3,"click"],[1,"ri-add-line"],[1,"department-structure-page"],[1,"controls-section"],[1,"filter-group"],[1,"filter-label"],[1,"filter-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"view-toggle"],["type","button",1,"toggle-btn",3,"click"],[1,"ri-artboard-line"],[1,"ri-list-check-2"],[1,"canvas-tools"],[1,"edit-toolbar"],[1,"summary-section"],[1,"summary-cards"],[1,"summary-card"],[1,"ri-organization-chart"],[1,"summary-content"],[1,"summary-value"],[1,"summary-label"],[1,"ri-building-line"],[1,"ri-folder-2-line"],[1,"ri-folder-line"],[1,"ri-team-line"],[1,"ri-links-line"],[1,"loading-container"],[1,"modal-overlay"],["type","button","title","\u7DE8\u8F2F\u6A21\u5F0F",1,"tool-btn",3,"click"],[1,"ri-edit-2-line"],[1,"tool-divider"],["type","button","title","\u986F\u793A\u5354\u4F5C\u95DC\u4FC2",1,"tool-btn","tool-btn--icon",3,"click"],["type","button","title","\u7DB2\u683C\u5438\u9644",1,"tool-btn","tool-btn--icon",3,"click"],[1,"ri-grid-line"],["type","button","title","\u7E2E\u5C0F",1,"tool-btn","tool-btn--icon",3,"click"],[1,"ri-zoom-out-line"],[1,"zoom-level"],["type","button","title","\u653E\u5927",1,"tool-btn","tool-btn--icon",3,"click"],[1,"ri-zoom-in-line"],["type","button","title","\u91CD\u7F6E",1,"tool-btn","tool-btn--icon",3,"click"],[1,"ri-refresh-line"],[1,"toolbar-group"],[1,"toolbar-label"],["type","button",1,"toolbar-btn",3,"click"],[1,"ri-checkbox-multiple-line"],["type","button",1,"toolbar-btn",3,"click","disabled"],[1,"ri-close-circle-line"],["class","selection-count",4,"ngIf"],[1,"toolbar-divider"],["type","button","title","\u9760\u5DE6\u5C0D\u9F4A",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-left"],["type","button","title","\u6C34\u5E73\u7F6E\u4E2D",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-center"],["type","button","title","\u9760\u53F3\u5C0D\u9F4A",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-right"],[1,"btn-separator"],["type","button","title","\u9760\u4E0A\u5C0D\u9F4A",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-top"],["type","button","title","\u5782\u76F4\u7F6E\u4E2D",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-vertically"],["type","button","title","\u9760\u4E0B\u5C0D\u9F4A",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-bottom"],["type","button","title","\u6C34\u5E73\u7B49\u8DDD",1,"toolbar-btn",3,"click","disabled"],[1,"ri-space-ship-line",2,"transform","rotate(90deg)"],["type","button","title","\u5782\u76F4\u7B49\u8DDD",1,"toolbar-btn",3,"click","disabled"],[1,"ri-space-ship-line"],["type","button","title","\u9084\u539F\u4E0A\u4E00\u6B65 (Ctrl+Z)",1,"toolbar-btn",3,"click","disabled"],[1,"ri-arrow-go-back-line"],["type","button","title","\u81EA\u52D5\u6574\u7406",1,"toolbar-btn","toolbar-btn--primary",3,"click"],[1,"ri-layout-grid-line"],[1,"selection-count"],[1,"ri-loader-4-line","spinner"],[1,"canvas-section",3,"edit-mode"],[1,"list-section"],[1,"canvas-section"],[1,"canvas-container",3,"mousedown","mousemove","mouseup","mouseleave","wheel"],[1,"canvas-content"],[1,"grid-overlay"],["width","3000","height","2000",1,"connections-svg",2,"overflow","visible"],[1,"dept-node",3,"dept-node--level-0","dept-node--level-1","dept-node--level-2","selected","draggable","left","top","border-color"],[1,"canvas-legend"],[1,"legend-group"],[1,"legend-title"],[1,"legend-item"],[1,"legend-rect","legend-rect--level-0"],[1,"legend-rect","legend-rect--level-1"],[1,"legend-rect","legend-rect--level-2"],[1,"edit-hint"],["fill","none","stroke","#C4B5A8","stroke-width","2",1,"hierarchy-line"],["stroke-width","2","stroke-dasharray","6,4","marker-end","url(#arrowhead)",1,"collaboration-line"],["id","arrowhead","markerWidth","10","markerHeight","7","refX","9","refY","3.5","orient","auto"],["points","0 0, 10 3.5, 0 7","fill","#94A3B8"],[1,"dept-node",3,"mousedown","click"],[1,"node-drag-handle"],[1,"dept-node__icon"],[1,"dept-node__content"],[1,"dept-node__name"],[1,"dept-node__meta"],[1,"ri-draggable"],[1,"ri-user-line"],[1,"legend-line",2,"background","#CD853F"],[1,"legend-line",2,"background","#6B8E23"],[1,"ri-information-line"],[1,"list-container"],[1,"data-table"],[1,"col-name"],[1,"col-code"],[1,"col-manager"],[1,"col-employees"],[1,"col-level"],[1,"col-collabs"],[1,"col-actions"],[1,"data-row",3,"class"],[1,"data-row"],[1,"dept-cell"],[1,"tree-indicator"],[1,"dept-info"],[1,"dept-icon"],[1,"dept-name"],[1,"level-badge"],[1,"collab-count"],["type","button","title","\u6AA2\u8996\u8A73\u60C5",1,"action-btn",3,"click"],[1,"ri-eye-line"],["type","button","title","\u7DE8\u8F2F",1,"action-btn"],[1,"ri-edit-line"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"modal-title-group"],["type","button","title","\u8FD4\u56DE\u4E0A\u4E00\u5C64",1,"modal-back-btn"],[1,"modal-icon"],[1,"modal-title"],[1,"modal-subtitle"],["type","button",1,"modal-close",3,"click"],[1,"ri-close-line"],[1,"modal-body"],[1,"dept-detail"],[1,"detail-section"],[1,"section-title"],[1,"detail-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"modal-footer"],["type","button",1,"btn-danger",3,"click"],[1,"ri-delete-bin-line"],["type","button",1,"btn-secondary",3,"click"],["type","button","title","\u8FD4\u56DE\u4E0A\u4E00\u5C64",1,"modal-back-btn",3,"click"],[1,"ri-arrow-left-line"],[1,"responsibility-list"],[1,"responsibility-item"],[1,"ri-checkbox-circle-line"],[1,"child-dept-list"],[1,"child-dept-item"],[1,"child-dept-item",3,"click"],[1,"child-dept-icon"],[1,"child-dept-name"],[1,"child-dept-count"],[1,"collab-list"],[1,"collab-item"],[1,"collab-header"],[1,"collab-type"],[1,"collab-target"],[1,"collab-desc"],[1,"collab-meta"],[1,"ri-message-2-line"],[1,"ri-time-line"],[1,"modal-container","modal-form",3,"click"],[1,"dept-form"],[1,"form-row"],[1,"form-group"],[1,"form-label","required"],["type","text","placeholder","\u8ACB\u8F38\u5165\u90E8\u9580\u540D\u7A31",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","\u4F8B\u5982\uFF1AHR\u3001IT\u3001FIN",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["type","text","placeholder","\u8ACB\u8F38\u5165\u4E3B\u7BA1\u59D3\u540D",1,"form-input",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-input",3,"ngModelChange","ngModel"],["type","color",1,"form-color",3,"ngModelChange","ngModel"],["value","ri-folder-line"],["value","ri-team-line"],["value","ri-code-box-line"],["value","ri-money-dollar-circle-line"],["value","ri-customer-service-line"],["value","ri-global-line"],["value","ri-lightbulb-line"],["value","ri-rocket-line"],[1,"ri-save-line"],[1,"modal-container","modal-confirm",3,"click"],[1,"modal-header","modal-header--danger"],[1,"ri-error-warning-line"],[1,"confirm-content"],[1,"confirm-message"],[1,"confirm-warning","warning-error"],[1,"confirm-warning"],["type","button",1,"btn-danger",3,"click","disabled"],[1,"ri-alert-line"]],template:function(e,t){if(e&1&&(i(0,"app-header",1)(1,"div",2)(2,"button",3),s(3,"i",4),a(4," \u532F\u51FA\u7D50\u69CB\u5716 "),r(),i(5,"button",5),g("click",function(){return t.openCreateDepartmentForm()}),s(6,"i",6),a(7," \u65B0\u589E\u90E8\u9580 "),r()()(),i(8,"div",7)(9,"section",8)(10,"div",9)(11,"label",10),a(12,"\u9078\u64C7\u516C\u53F8"),r(),i(13,"select",11),g("ngModelChange",function(m){return t.onCompanyChange(m)}),z(14,Ee,2,2,"option",12,R),r()(),i(16,"div",13)(17,"button",14),g("click",function(){return t.setViewMode("canvas")}),s(18,"i",15),a(19," \u756B\u5E03\u6A21\u5F0F "),r(),i(20,"button",14),g("click",function(){return t.setViewMode("list")}),s(21,"i",16),a(22," \u5217\u8868\u6A21\u5F0F "),r()(),E(23,Me,19,8,"div",17),r(),E(24,ye,44,11,"section",18),i(25,"section",19)(26,"div",20)(27,"div",21),s(28,"i",22),i(29,"div",23)(30,"span",24),a(31),r(),i(32,"span",25),a(33,"\u90E8\u9580\u7E3D\u6578"),r()()(),i(34,"div",21),s(35,"i",26),i(36,"div",23)(37,"span",24),a(38),r(),i(39,"span",25),a(40,"\u4E00\u7D1A\u90E8\u9580"),r()()(),i(41,"div",21),s(42,"i",27),i(43,"div",23)(44,"span",24),a(45),r(),i(46,"span",25),a(47,"\u4E8C\u7D1A\u90E8\u9580"),r()()(),i(48,"div",21),s(49,"i",28),i(50,"div",23)(51,"span",24),a(52),r(),i(53,"span",25),a(54,"\u4E09\u7D1A\u90E8\u9580"),r()()(),i(55,"div",21),s(56,"i",29),i(57,"div",23)(58,"span",24),a(59),r(),i(60,"span",25),a(61,"\u54E1\u5DE5\u7E3D\u6578"),r()()(),i(62,"div",21),s(63,"i",30),i(64,"div",23)(65,"span",24),a(66),r(),i(67,"span",25),a(68,"\u5354\u4F5C\u95DC\u4FC2"),r()()()()(),E(69,we,4,0,"div",31)(70,Le,2,2),r(),E(71,Je,53,16,"div",32)(72,it,74,13,"div",32)(73,lt,22,3,"div",32)),e&2){let o,m;b("pageTitle",t.pageTitle)("breadcrumbs",t.breadcrumbs),c(13),b("ngModel",t.selectedCompanyId()),c(),N(t.companies()),c(3),X("active",t.viewMode()==="canvas"),c(3),X("active",t.viewMode()==="list"),c(3),v(t.viewMode()==="canvas"?23:-1),c(),v(t.viewMode()==="canvas"&&t.isEditMode()?24:-1),c(7),D(t.filteredDepartments().length),c(7),D(t.departmentTree().length),c(7),D(t.level2DepartmentCount()),c(7),D(t.level3DepartmentCount()),c(7),D(t.totalEmployeeCount()),c(7),D(t.collaborationLines().length),c(3),v(t.loading()?69:70),c(2),v((o=t.showDepartmentModal()&&t.selectedDepartment())?71:-1,o),c(),v(t.showDepartmentForm()?72:-1),c(),v((m=t.showDeleteConfirm()&&t.departmentToDelete())?73:-1,m)}},dependencies:[re,oe,fe,me,ge,_e,ae,pe,ue,le,ce,Ce,se,de,xe],styles:['[_ngcontent-%COMP%]:root{--color-cloud-gray: #F5F5F7;--color-pure-white: #FCFCFD;--color-soft-gray: #E8E8EA;--color-text-primary: #464E56;--color-text-secondary: #6B7280;--color-text-dark: #1F2937;--color-brand-main: #64748B;--color-brand-light: #94A3B8;--color-brand-dark: #475569;--color-l1-sage: #8DA399;--color-l2-terracotta: #D6A28C;--color-l3-petrol: #7F9CA0;--color-l4-mauve: #9A8C98;--color-l5-brick: #B87D7B;--color-l6-rose: #C4A4A1;--color-success: #7FB095;--color-warning: #E3C088;--color-error: #C77F7F;--color-info: #8DA8BE;--sidebar-width: 280px;--sidebar-width-minimized: 80px;--header-height: 70px;--radius-sm: 6px;--radius-md: 8px;--radius-lg: 12px;--shadow-soft: 0 4px 20px rgba(0, 0, 0, .05);--shadow-md: 0 4px 12px rgba(0, 0, 0, .06);--shadow-lg: 0 8px 24px rgba(0, 0, 0, .08);--transition-normal: .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.department-structure-page[_ngcontent-%COMP%]{padding:calc(var(--header-height, 70px) + 20px) 1.5rem 1.5rem;min-height:100vh;background:#f5f5f7}.controls-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;margin-bottom:1.5rem;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.filter-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#6b7280}.filter-select[_ngcontent-%COMP%]{min-width:240px;padding:.5rem 1rem;border:1px solid #E8E8EA;border-radius:8px;background:#fcfcfd;font-size:.875rem;color:#464e56;cursor:pointer;transition:border-color .15s ease}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#9a8c98}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#fcfcfd;border-radius:8px;padding:.25rem;box-shadow:0 1px 2px #0000000a}.toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1.5rem;border:none;background:transparent;color:#6b7280;font-size:.875rem;font-weight:500;border-radius:6px;cursor:pointer;transition:all .15s ease}.toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.toggle-btn[_ngcontent-%COMP%]:hover{color:#9a8c98;background:#9a8c980d}.toggle-btn.active[_ngcontent-%COMP%]{background:#9a8c98;color:#fcfcfd}.canvas-tools[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#fcfcfd;border-radius:8px;padding:.25rem 1rem;box-shadow:0 1px 2px #0000000a;margin-left:auto}.tool-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:.5rem 1rem;border:none;background:transparent;color:#6b7280;font-size:.875rem;font-weight:500;border-radius:6px;cursor:pointer;transition:all .15s ease}.tool-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.tool-btn[_ngcontent-%COMP%]:hover{color:#9a8c98;background:#9a8c9814}.tool-btn.active[_ngcontent-%COMP%]{color:#9a8c98;background:#9a8c981f}.tool-btn--icon[_ngcontent-%COMP%]{padding:.5rem;width:32px;height:32px;justify-content:center}.tool-divider[_ngcontent-%COMP%]{width:1px;height:24px;background:#e8e8ea;margin:0 .25rem}.edit-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;background:#fcfcfd;border-radius:12px;box-shadow:0 1px 2px #0000000a;margin-bottom:1rem;flex-wrap:wrap}.toolbar-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.toolbar-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.toolbar-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:.25rem .5rem;border:1px solid #E8E8EA;background:#fcfcfd;color:#464e56;font-size:.875rem;border-radius:6px;cursor:pointer;transition:all .15s ease}.toolbar-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.toolbar-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#9a8c98;color:#9a8c98;background:#9a8c980d}.toolbar-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.toolbar-btn--primary[_ngcontent-%COMP%]{background:#9a8c98;color:#fcfcfd;border-color:#9a8c98}.toolbar-btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#7a6c78;border-color:#7a6c78;color:#fcfcfd}.btn-separator[_ngcontent-%COMP%]{width:1px;height:20px;background:#e8e8ea;margin:0 .25rem}.toolbar-divider[_ngcontent-%COMP%]{width:1px;height:32px;background:#e8e8ea}.selection-count[_ngcontent-%COMP%]{font-size:.75rem;color:#9a8c98;font-weight:500;padding:.25rem .5rem;background:#9a8c981a;border-radius:6px}.control-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:#6b7280;font-size:1.125rem;border-radius:6px;cursor:pointer;transition:all .15s ease}.control-btn[_ngcontent-%COMP%]:hover{color:#9a8c98;background:#9a8c9814}.control-btn.active[_ngcontent-%COMP%]{color:#9a8c98;background:#9a8c981f}.control-divider[_ngcontent-%COMP%]{width:1px;height:20px;background:#e8e8ea;margin:0 .25rem}.zoom-level[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;min-width:45px;text-align:center}.summary-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.summary-cards[_ngcontent-%COMP%]{display:flex;gap:1rem}.summary-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;background:#fcfcfd;border-radius:8px;box-shadow:0 1px 2px #0000000a}.summary-card[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:1.25rem;color:#9a8c98}.summary-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#464e56}.summary-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 1.5rem;color:#6b7280;gap:1rem}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:32px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.canvas-section[_ngcontent-%COMP%]{position:relative;background:#fcfcfd;border-radius:12px;box-shadow:0 1px 2px #0000000a;overflow:hidden}.canvas-section.edit-mode[_ngcontent-%COMP%]{border:2px dashed rgba(154,140,152,.4)}.canvas-container[_ngcontent-%COMP%]{width:100%;height:550px;overflow:hidden;cursor:grab;background:linear-gradient(90deg,rgba(232,232,234,.3) 1px,transparent 1px),linear-gradient(rgba(232,232,234,.3) 1px,transparent 1px);background-size:20px 20px;background-color:#f5f5f7}.canvas-container.panning[_ngcontent-%COMP%]{cursor:grabbing}.canvas-container.editing[_ngcontent-%COMP%]{cursor:default}.grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(90deg,rgba(154,140,152,.08) 1px,transparent 1px),linear-gradient(rgba(154,140,152,.08) 1px,transparent 1px);background-size:20px 20px;pointer-events:none}.canvas-content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transform-origin:center center;transition:transform .1s ease}.connections-svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.hierarchy-line[_ngcontent-%COMP%]{stroke:#e8e8ea;stroke-width:2;fill:none}.collaboration-line[_ngcontent-%COMP%]{stroke-dasharray:6,4;fill:none;opacity:.7}.dept-node[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;gap:1rem;padding:1rem;background:#fcfcfd;border-radius:12px;box-shadow:0 4px 12px #0000000f;cursor:pointer;transition:all .15s ease;border-left:4px solid;-webkit-user-select:none;user-select:none}.dept-node[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 24px #00000014}.dept-node.draggable[_ngcontent-%COMP%]{cursor:grab}.dept-node.draggable[_ngcontent-%COMP%]:active{cursor:grabbing}.dept-node.draggable[_ngcontent-%COMP%]:hover{transform:none}.dept-node.selected[_ngcontent-%COMP%]{outline:3px solid #9A8C98;outline-offset:2px;box-shadow:0 0 0 6px #9a8c9826,0 8px 24px #00000014}.dept-node.selected[_ngcontent-%COMP%]   .node-drag-handle[_ngcontent-%COMP%]{opacity:1}.dept-node--level-0[_ngcontent-%COMP%]{min-width:200px}.dept-node--level-1[_ngcontent-%COMP%]{min-width:180px}.dept-node--level-2[_ngcontent-%COMP%]{min-width:160px}.dept-node__icon[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;color:#fcfcfd;font-size:1.125rem;flex-shrink:0}.dept-node__content[_ngcontent-%COMP%]{flex:1;min-width:0}.dept-node__name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#464e56;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dept-node__meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-top:.25rem;font-size:.75rem;color:#6b7280}.dept-node__meta[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem;margin-right:2px}.node-drag-handle[_ngcontent-%COMP%]{position:absolute;top:.25rem;right:.25rem;width:20px;height:20px;display:flex;align-items:center;justify-content:center;background:#9a8c981a;border-radius:6px;color:#9a8c98;font-size:.875rem;opacity:.5;transition:opacity .15s ease;cursor:grab}.node-drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.edit-hint[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1rem;display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#9a8c98e6;color:#fcfcfd;font-size:.75rem;border-radius:8px;box-shadow:0 4px 12px #0000000f}.edit-hint[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.canvas-legend[_ngcontent-%COMP%]{position:absolute;bottom:1rem;left:1rem;display:flex;gap:2rem;padding:1rem;background:#fcfcfdf2;border-radius:8px;box-shadow:0 1px 2px #0000000a}.legend-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.legend-title[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px;margin-bottom:.25rem}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:#6b7280}.legend-rect[_ngcontent-%COMP%]{width:16px;height:10px;border-radius:2px;border:1px solid}.legend-rect--level-0[_ngcontent-%COMP%]{background:#9a8c9826;border-color:#9a8c98}.legend-rect--level-1[_ngcontent-%COMP%]{background:#7f9ca026;border-color:#7f9ca0}.legend-rect--level-2[_ngcontent-%COMP%]{background:#8da39926;border-color:#8da399}.legend-line[_ngcontent-%COMP%]{width:24px;height:3px;border-radius:2px}.list-section[_ngcontent-%COMP%]{background:#fcfcfd;border-radius:12px;box-shadow:0 1px 2px #0000000a;overflow:hidden}.list-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #E8E8EA}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f7;font-size:.75rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.875rem;color:#464e56}.data-row[_ngcontent-%COMP%]{transition:background .15s ease}.data-row[_ngcontent-%COMP%]:hover{background:#9a8c9808}.data-row.level-0[_ngcontent-%COMP%]{background:#9a8c980a}.data-row.level-0[_ngcontent-%COMP%]:hover{background:#9a8c9812}.dept-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.tree-indicator[_ngcontent-%COMP%]{color:#c4c4c6;font-family:SF Mono,Consolas,Liberation Mono,monospace;font-size:1rem}.dept-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.dept-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;color:#fcfcfd;font-size:.875rem}.dept-name[_ngcontent-%COMP%]{font-weight:500}.level-badge[_ngcontent-%COMP%]{display:inline-flex;padding:.25rem .5rem;font-size:.75rem;font-weight:500;border-radius:9999px}.level-badge.level-1[_ngcontent-%COMP%]{background:#9a8c981f;color:#9a8c98}.level-badge.level-2[_ngcontent-%COMP%]{background:#7f9ca01f;color:#7f9ca0}.level-badge.level-3[_ngcontent-%COMP%]{background:#8da3991f;color:#8da399}.level-badge.level-4[_ngcontent-%COMP%], .level-badge.level-5[_ngcontent-%COMP%]{background:#c4c4c61f;color:#c4c4c6}.collab-count[_ngcontent-%COMP%]{color:#6b7280}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border:none;background:transparent;color:#6b7280;font-size:1rem;border-radius:6px;cursor:pointer;transition:all .15s ease}.action-btn[_ngcontent-%COMP%]:hover{color:#9a8c98;background:#9a8c9814}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1.5rem}.modal-container[_ngcontent-%COMP%]{background:#fcfcfd;border-radius:12px;box-shadow:0 16px 48px #0000001a;width:100%;max-width:680px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem 2rem;border-bottom:1px solid #E8E8EA}.modal-title-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.modal-back-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:1px solid #E8E8EA;background:#fcfcfd;border-radius:8px;color:#6b7280;font-size:1.125rem;cursor:pointer;transition:all .15s ease}.modal-back-btn[_ngcontent-%COMP%]:hover{border-color:#9a8c98;color:#9a8c98;background:#9a8c980d}.modal-icon[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:8px;color:#fcfcfd;font-size:1.25rem}.modal-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#464e56;margin:0}.modal-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:2px 0 0}.modal-close[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:#6b7280;font-size:1.25rem;border-radius:6px;cursor:pointer;transition:all .15s ease}.modal-close[_ngcontent-%COMP%]:hover{color:#464e56;background:#f5f5f7}.modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:2rem}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:1rem 2rem;border-top:1px solid #E8E8EA;background:#f5f5f7}.dept-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.detail-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#464e56;margin:0 0 1rem;padding-bottom:.5rem;border-bottom:1px solid #E8E8EA}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.detail-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.detail-value[_ngcontent-%COMP%]{font-size:.875rem;color:#464e56;font-weight:500}.responsibility-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.responsibility-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#f5f5f7;border-radius:6px;font-size:.875rem;color:#464e56}.responsibility-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7fb095;font-size:1rem}.child-dept-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.child-dept-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:#f5f5f7;border-radius:8px;cursor:pointer;transition:all .15s ease}.child-dept-item[_ngcontent-%COMP%]:hover{background:#9a8c9814}.child-dept-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;color:#fcfcfd;font-size:.875rem}.child-dept-name[_ngcontent-%COMP%]{flex:1;font-size:.875rem;font-weight:500;color:#464e56}.child-dept-count[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}.collab-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.collab-item[_ngcontent-%COMP%]{padding:1rem;background:#f5f5f7;border-radius:8px}.collab-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.5rem}.collab-type[_ngcontent-%COMP%]{display:inline-flex;padding:3px .5rem;font-size:.75rem;font-weight:600;color:#fcfcfd;border-radius:9999px}.collab-target[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#464e56}.collab-desc[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0 0 .5rem;line-height:1.5}.collab-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.75rem;color:#c4c4c6}.collab-meta[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem}.btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1.5rem;background:#9a8c98;color:#fcfcfd;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:#7a6c78}.btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1.5rem;background:#fcfcfd;color:#464e56;border:1px solid #E8E8EA;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f7;border-color:#9a8c98;color:#9a8c98}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.modal-form[_ngcontent-%COMP%]{max-width:680px}.modal-confirm[_ngcontent-%COMP%]{max-width:480px}.modal-header--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c77f7f,#b75c5c)}.modal-header--danger[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%], .modal-header--danger[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.dept-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.form-group.full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#464e56}.form-label.required[_ngcontent-%COMP%]:after{content:" *";color:#c77f7f}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #E8E8EA;border-radius:8px;font-size:.875rem;color:#464e56;background:#fcfcfd;transition:all .15s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#9a8c98;box-shadow:0 0 0 3px #9a8c981a}.form-input[_ngcontent-%COMP%]::placeholder, .form-select[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#c4c4c6}.form-input[_ngcontent-%COMP%]:disabled, .form-select[_ngcontent-%COMP%]:disabled, .form-textarea[_ngcontent-%COMP%]:disabled{background:#f5f5f7;cursor:not-allowed}.form-color[_ngcontent-%COMP%]{width:60px;height:36px;padding:2px;border:1px solid #E8E8EA;border-radius:8px;cursor:pointer}.form-color[_ngcontent-%COMP%]:focus{outline:none;border-color:#9a8c98}.confirm-content[_ngcontent-%COMP%]{text-align:center;padding:1.5rem 0}.confirm-message[_ngcontent-%COMP%]{font-size:1.125rem;color:#464e56;margin:0 0 1rem}.confirm-message[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#c77f7f}.confirm-warning[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:.875rem;color:#e3c088;margin:0}.confirm-warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.confirm-warning.warning-error[_ngcontent-%COMP%]{color:#c77f7f}.btn-danger[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1.5rem;background:#c77f7f;color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#b75c5c}.btn-danger[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}'],changeDetection:0})};export{he as DepartmentStructurePageComponent};

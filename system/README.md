# Bombus V6.0 企業管理系統 - 正式介面

## 📋 專案概述

這是 Bombus V6.0 企業管理系統的正式管理介面,整合了左側側邊欄(Sidebar)、頂部導航列(Top Bar)和完整的系統功能。

設計基於:
- **Metronic HTML Template** 的結構
- **IDP 介面設計規劃文件** 的莫蘭迪色系和 Soft UI 風格
- **Remix Icon** 圖示系統

## 🎨 設計特色

### 1. 莫蘭迪色系 (Morandi Color Palette)
- **基礎色調**: 雲霧灰 (#F5F5F7)、極致灰白 (#FCFCFD)
- **品牌色**: 板岩藍 (#64748B)、塵藍 (#94A3B8)
- **模組色**:
  - L1 員工管理: 鼠尾草綠 (#8DA399)
  - L2 職能管理: 陶土橙 (#D6A28C)
  - L3 教育訓練: 復古藍綠 (#7F9CA0)
  - L4 專案管理: 錦葵紫 (#9A8C98)
  - L5 績效管理: 磚紅 (#B87D7B)
  - L6 文化管理: 乾燥玫瑰 (#C4A4A1)

### 2. Soft UI 設計風格
- 圓角半徑: 12px
- 陰影效果: `0 4px 20px rgba(0,0,0,0.05)`
- 柔和過渡動畫: 300ms ease

### 3. 圖示系統
- 使用 **Remix Icon** (符合 IDP 建議的 Outline 風格)
- 統一 20px 大小,1.5px 線條粗細
- 支援模組語意化顏色

## 📁 檔案結構

```
system/
├── index.html                      # 主儀表板頁面
├── training/
│   └── talent-map.html            # L3.2 人才地圖整合頁面
├── assets/
│   ├── css/
│   │   └── system.css             # 系統主樣式表 (基於IDP規範)
│   ├── js/
│   │   └── system.js              # 系統互動邏輯
│   └── images/
│       ├── logo.svg               # Bombus Logo (蜜蜂圖示)
│       └── avatar.jpg             # 使用者頭像 (placeholder)
└── README.md                      # 本文件
```

## 🚀 功能特色

### 側邊欄 (Sidebar)
- ✅ 可收合/展開 (桌面版)
- ✅ 響應式設計 (手機版滑出)
- ✅ 狀態保存 (localStorage)
- ✅ 多層選單手風琴效果
- ✅ 模組顏色標識
- ✅ 當前頁面 active 狀態

### 頂部導航列 (Header)
- ✅ 麵包屑導航
- ✅ 搜尋按鈕
- ✅ 通知中心 (附計數徽章)
- ✅ 快速操作按鈕
- ✅ 使用者選單

### 主儀表板 (Dashboard)
- ✅ 歡迎橫幅
- ✅ 統計卡片 (4個模組數據)
- ✅ 快速存取區域
- ✅ 活動時間軸
- ✅ 待辦事項清單

### L3.2 人才地圖整合頁面
- ✅ Tab 切換介面
- ✅ 組織職能熱力圖 (Heatmap)
- ✅ 人才九宮格 (9-Box Grid)
- ✅ 學習發展路徑圖 (Learning Path)
- ✅ 關鍵人才儀表板 (Key Talent)
- ✅ 圖表匯出功能 (PNG)

## 🔧 技術棧

- **HTML5**: 語義化標籤
- **CSS3**: CSS Variables, Flexbox, Grid
- **JavaScript**: jQuery 3.7.1
- **圖表**: ECharts 5.4.3
- **圖示**: Remix Icon 3.5.0
- **字體**: 系統字體堆疊 (Microsoft JhengHei)

## 📱 響應式斷點

- **Desktop**: ≥ 992px (完整側邊欄)
- **Tablet**: 768px - 991px (收合側邊欄)
- **Mobile**: < 768px (滑出式側邊欄)

## 🎯 核心互動功能

### 側邊欄控制
```javascript
// 桌面版: 最小化/展開
$('#aside_toggle').on('click', function() {
    $('#kt_aside').toggleClass('minimized');
});

// 手機版: 開啟/關閉
$('#mobile_toggle').on('click', function() {
    $('#kt_aside').toggleClass('show');
});
```

### 選單手風琴
```javascript
$('.menu-accordion > .menu-link').on('click', function() {
    $(this).parent('.menu-accordion').toggleClass('show');
});
```

### 通知系統
```javascript
window.BombusSystem.showNotification('訊息內容', 'success');
// 類型: info, success, warning, error
```

## 🔗 頁面連結

### 主系統頁面
- `/system/index.html` - 主儀表板

### 功能模組頁面
- `/system/training/talent-map.html` - L3.2 人才地圖總覽

### Demo 原始頁面 (保留)
- `/demo/index.html` - Demo 入口
- `/demo/talent-map/index.html` - 人才地圖 (原始版)

## 📝 使用說明

### 1. 啟動系統
直接開啟 `system/index.html` 即可。

### 2. 查看人才地圖
- 從主儀表板點擊「快速存取」區塊
- 或從左側選單: 教育訓練 > 人才地圖總覽

### 3. 自訂配色
修改 `system/assets/css/system.css` 中的 CSS Variables:
```css
:root {
    --color-brand-main: #64748B;  /* 改變主品牌色 */
    --color-l3-petrol: #7F9CA0;   /* 改變 L3 模組色 */
}
```

## 🎨 設計規範遵循

### IDP 規範對應
- ✅ **1.1 色彩規範**: 完整採用莫蘭迪色系
- ✅ **1.2 圖示與排版**: Remix Icon + 字體層級
- ✅ **1.3 版面佈局**: Soft UI + 左側側邊欄
- ✅ **2.0 模組介面設計**: L0-L6 模組色標識
- ✅ **3.0 互動反饋**: Toast、Hover、Active 狀態

### Metronic 參考結構
- ✅ Aside (側邊欄) 結構
- ✅ Header (頂部導航) 佈局
- ✅ Menu (選單) 手風琴效果
- ✅ 響應式設計策略

## 🌟 特色亮點

1. **視覺一致性**: 嚴格遵循 IDP 規範的莫蘭迪色系
2. **流暢互動**: 300ms 過渡動畫,Soft UI 陰影效果
3. **智能適配**: 響應式設計,桌面/平板/手機完美呈現
4. **模組化設計**: L0-L6 模組顏色識別系統
5. **專業圖表**: ECharts 整合,支援互動與匯出

## 📄 授權資訊

- **專案**: Bombus V6.0 企業管理系統
- **設計**: 基於 IDP 規範
- **參考**: Metronic Template 結構
- **圖示**: Remix Icon (Apache 2.0 License)

## 🔄 更新日誌

### V1.5 (2025-01-01) - 穩定性與依賴修復版

**修復問題**:
- ✅ 修復 JS 變數衝突 (`employees` 重複宣告) 問題
- ✅ 修復 `draggable` 錯誤 (引入 jQuery UI)
- ✅ 修復九宮格圖表未顯示問題
- ✅ 調整九宮格標籤位置，解決重疊問題

詳細修復報告請參考: [BUGFIX-v1.5.md](./BUGFIX-v1.5.md)

### V1.15.0 (2025-11-23) - L1.1 AI智能面試系統 (Major Feature)

**新增功能**:
- 🤖 **AI智能面試評核系統**：完整的面試播放器與評分系統
  - 候選人管理介面（列表、搜尋、篩選）
  - 音訊播放器（播放/暫停/重新開始控制）
  - 即時逐字稿面板（關鍵字高亮標記）
  - 情緒時間軸圖表（自信度/焦慮度/熱情度）
  - AI 綜合評分系統（關鍵字 40% + 語意 30% + JD適配 30%）
  - 能力雷達圖（六大維度評估）
  - 報告匯出與錄用建議功能

**技術亮點**:
- ECharts 情緒時間軸與雷達圖視覺化
- 關鍵字智能標記（正向綠/負向紅）
- 分數漸進動畫效果
- 響應式設計（支援桌面/平板/手機）

**檔案新增**:
- `system/employee/recruitment.html` - 主頁面
- `system/assets/js/interview.js` - 核心邏輯
- `system/DEVELOPMENT-L1.1.md` - 開發文件

**詳細文檔**: [DEVELOPMENT-L1.1.md](./DEVELOPMENT-L1.1.md)

### V1.14.2 (2025-11-23) - 關鍵人才儀表板按鈕修復 (Hotfix)

**調整內容**:
- 🐛 **Bug Fix**：修正「啟動留才計畫」按鈕因樣式衝突導致寬度不足文字被截斷的問題。

**技術細節**:
- 修改檔案: `talent-map.html`
- 詳細文檔: [BUGFIX-v1.14.2.md](./BUGFIX-v1.14.2.md)

### V1.14.1 (2025-11-23) - 關鍵人才儀表板樣式微調 (Hotfix)

**調整內容**:
- 📊 **圖表優化**：人才流失成本圖表圖例移至下方。
- 🎨 **介面優化**：修正留才計畫按鈕跑版問題，統一 Icon 風格 (Remix Icon)。

**技術細節**:
- 修改檔案: `talent-map.html`, `key-talent.js`
- 詳細文檔: [BUGFIX-v1.14.1.md](./BUGFIX-v1.14.1.md)

### V1.14 (2025-11-23) - 關鍵人才儀表板重構

**調整內容**:
- 🎨 **內容補全**：補齊關鍵人才儀表板中缺少的「高風險預警」與「接班人規劃」區塊。
- 📊 **圖表重構**：解決 Tab 切換時圖表顯示異常問題，優化圖表佈局為並排顯示。

**技術細節**:
- 修改檔案: `talent-map.html`, `key-talent.js`
- 詳細文檔: [BUGFIX-v1.14.md](./BUGFIX-v1.14.md)

### V1.13.1 (2025-11-23) - 員工選擇器樣式統一 (Hotfix)

**調整內容**:
- 🎨 **樣式修正**：修正學習路徑圖中「員工選擇器」的樣式，使其與系統標準下拉選單風格一致。

**技術細節**:
- 修改檔案: `talent-map.html`
- 詳細文檔: [BUGFIX-v1.13.1.md](./BUGFIX-v1.13.1.md)

### V1.13 (2025-11-23) - 學習路徑圖介面統一

**調整內容**:
- 🎨 **介面一致性**：將學習發展路徑圖的層級切換由 Tab 按鈕改為下拉選單，與熱力圖保持一致。

**技術細節**:
- 修改檔案: `talent-map.html`, `learning-path.js`
- 詳細文檔: [BUGFIX-v1.13.md](./BUGFIX-v1.13.md)

### V1.12.1 (2025-11-23) - 熱力圖圖例重疊修復 (Hotfix)

**修復內容**:
- 🐛 **圖例重疊修正**：調整 `grid.right` 與 `visualMap.padding`，為右側圖例預留足夠空間，解決遮擋問題。

**技術細節**:
- 修改檔案: `heatmap.js`
- 詳細文檔: [BUGFIX-v1.12.1.md](./BUGFIX-v1.12.1.md)

### V1.12 (2025-11-23) - 熱力圖圖例調整

**調整內容**:
- 🎨 **圖例位置調整**：將熱力圖圖例移至左側並改為垂直顯示，優化空間利用與視覺動線。

**技術細節**:
- 修改檔案: `heatmap.js`
- 詳細文檔: [BUGFIX-v1.12.md](./BUGFIX-v1.12.md)

### V1.11.1 (2025-11-23) - 九宮格 Tab 切換修復 (Hotfix)

**修復內容**:
- ✅ **修復 Tab 切換後圖表消失問題**：在切換回九宮格 Tab 重建圖表後，補上 `updateNineBox()` 呼叫以重新填入數據。

**技術細節**:
- 修改檔案: `talent-map.html`
- 詳細文檔: [BUGFIX-v1.11.1.md](./BUGFIX-v1.11.1.md)

### V1.11 (2025-11-23) - 學習路徑圖表重構

**修復內容**:
- ✅ **重構學習路徑圖表邏輯**：對 `timelineChart` 和 `skillTreeChart` 實施與九宮格相同的標準化管理。
- ✅ **解決圖表顯示異常**：加入 `dispose()` 機制與正確的初始化時機，解決 Tab 切換導致的寬度錯誤與消失問題。

**技術細節**:
- 修改檔案: `learning-path.js`, `talent-map.html`
- 詳細文檔: [BUGFIX-v1.11.md](./BUGFIX-v1.11.md)

### V1.10.1 (2025-11-23) - Draggable 報錯修復 (Hotfix)

**修復內容**:
- ✅ **修復圖表不顯示問題**：解決因 `draggable('destroy')` 對未初始化元素報錯而導致 JS 中斷，進而使圖表無法渲染的問題。
- ✅ **優化執行順序**：將圖表渲染移至拖拽初始化之前，提高容錯率。

**技術細節**:
- 修改檔案: `nine-box.js`
- 詳細文檔: [BUGFIX-v1.10.1.md](./BUGFIX-v1.10.1.md)

### V1.10 (2025-11-23) - 九宮格圖表重構 (Redo)

**修復內容**:
- ✅ **重做圓餅圖與散佈圖邏輯**：將所有圖表邏輯統一移至 `nine-box.js` 管理。
- ✅ **修復圖表消失問題**：加入 `dispose()` 機制，確保圖表重繪時先銷毀舊實例，解決空白或重疊問題。
- ✅ **數據完全連動**：散佈圖現在會隨篩選器 (部門/職級) 動態更新，與九宮格數據一致。

**技術細節**:
- 移除 HTML 內聯腳本，採用模組化函數 `initNineBoxCharts()`。
- 詳細文檔: [BUGFIX-v1.10.md](./BUGFIX-v1.10.md)

### V1.9 (2025-11-23) - 九宮格數據與篩選器修復 (Critical)

**修復內容**:
- ✅ 修復九宮格顯示 0 人問題 (ID 衝突導致過濾器失效)
- ✅ 修正篩選器 ID (`nineBoxDeptFilter`, `nineBoxLevelFilter`) 避免與熱力圖衝突
- ✅ 統一 JS 變數命名 (`nineBoxEmployees`)，解決數據引用錯誤

**問題描述**:
- 因頁面存在重複 ID (`deptFilter`)，導致 JS 抓取錯誤的篩選值，進而過濾掉所有資料。
- 變數命名混用 (`employees` vs `nineBoxEmployees`) 導致部分邏輯讀取到空陣列。

**技術細節**:
- 修改檔案: `talent-map.html`, `nine-box.js`
- 詳細文檔: [BUGFIX-v1.9.md](./BUGFIX-v1.9.md)

### V1.8.1 (2025-11-23) - 九宮格數據顯示修復 (Hotfix)

**修復內容**:
- ✅ 九宮格員工數據顯示問題 (所有初始化邏輯統一延遲執行)

**問題描述**:
- V1.8 中九宮格顯示「0 人」，但散佈圖有資料
- 原因：`updateNineBox()` 在延遲外執行，DOM 容器未準備好

**修復方案**:
- 將 `generateEmployees()` 和 `updateNineBox()` 移入 `setTimeout` 內
- 確保所有 DOM 操作在容器準備好後才執行

**技術細節**:
- 修改檔案: `talent-map.html`
- 詳細文檔: [BUGFIX-v1.8.1.md](./BUGFIX-v1.8.1.md)

### V1.8 (2025-11-22) - 圓餅圖初始化修復 & 恢復原生圖例

**修復內容**:
- ✅ 圓餅圖初始載入尺寸錯誤 (新增雙重延遲 + 強制 resize)
- ✅ 恢復 ECharts 原生圖例 (移除自訂 HTML 圖例)
- ✅ 圖表容器佈局改為對稱 (1fr 1fr)

**功能改善**:
- 圖例支援點擊切換顯示/隱藏
- 圖例支援 Hover 高亮對應扇區
- 圖表初始化自動正確顯示，無需手動 resize

**技術優化**:
- 移除自訂圖例相關代碼，降低維護成本
- 新增圖表初始化容器檢查
- 簡化 CSS 結構

**技術細節**:
- 修改檔案: `talent-map.html`, `nine-box.js`
- 詳細文檔: [BUGFIX-v1.8.md](./BUGFIX-v1.8.md)

### V1.7 (2025-11-22) - 圓餅圖圖例佈局優化版

**修復內容**:
- ✅ 圓餅圖圖例從右側改為底部水平排列
- ✅ 圓餅圖半徑增大至 40%-65% (原 35%-60%)
- ✅ 圓餅圖居中顯示 (50%, 50%)
- ✅ 解決圖例項目擠壓問題，充分利用左右寬度

**視覺改善**:
- 圖例水平排列，閱讀更流暢
- 圓餅圖更大更居中，視覺焦點更清晰
- 標題、圓餅、圖例三者間距更協調

**影響範圍**:
- 人才九宮格 - 人才分類分佈圓餅圖
- 關鍵人才儀表板 - 接班人覆蓋率圓餅圖

**技術細節**:
- 修改檔案: `nine-box.js`, `key-talent.js`
- 詳細文檔: [BUGFIX-v1.7.md](./BUGFIX-v1.7.md)

### V1.6 (2025-11-22) - 完整視覺與數據修復版

**修復內容**:
1. ✅ 九宮格 Y 軸標籤間距增加 15px
2. ✅ 九宮格員工數據消失問題 (全域變數統一為 `nineBoxEmployees`)
3. ✅ 圓餅圖圖例與本體重疊 (調整半徑與中心點)
4. ✅ 圓餅圖配色套用莫蘭迪色系 (符合 IDP 規範)
5. ✅ 所有圖表寬度過窄問題 (新增 `max-width: 100%`)
6. ✅ 學習路徑課程卡片排版優化 (新增完整 CSS 樣式)

**設計優化**:
- 圓餅圖新增標題，預設隱藏標籤，Hover 時顯示
- 課程卡片新增 Hover 上浮效果與陰影
- 進度條使用莫蘭迪漸層色
- 所有配色符合 IDP 莫蘭迪色系規範

**技術細節**:
- 修改檔案: `talent-map.html`, `nine-box.js`, `key-talent.js`
- 新增 CSS: 課程卡片、路徑步驟、層級 Tab 樣式
- 詳細文檔: [BUGFIX-v1.6.md](./BUGFIX-v1.6.md)

### V1.5 (2025-01-01) - 變數衝突修復版

**修復問題**:
- ✅ 修復 JS 變數衝突 (nine-box.js 與 learning-path.js 的 `employees` 變數)
- ✅ 重新命名為 `nineBoxEmployees` 和 `learningPathEmployees`
- ✅ 整合 jQuery UI 支援拖曳功能
- ✅ 修復九宮格散佈圖數據源問題

詳細修復報告請參考: [BUGFIX-v1.5.md](./BUGFIX-v1.5.md)

### V1.4 (2025-01-01) - 圖表與佈局優化版

**修復問題**:
- ✅ 修復學習發展路徑圖內容空白問題 (補全 HTML 結構)
- ✅ 修復側邊欄收合時圖示未居中問題
- ✅ 新增人才九宮格 XY 散佈圖 (與圓餅圖並列)
- ✅ 調整九宮格軸標籤位置，解決重疊問題
- ✅ 實作散佈圖 ECharts 渲染邏輯

詳細修復報告請參考: [BUGFIX-v1.4.md](./BUGFIX-v1.4.md)

### V1.3 (2025-01-01) - 視覺與數據完善版

**修復問題**:
- ✅ 修復側邊欄最小化時圖示跑版問題
- ✅ 更換正式 Bombus Logo (logo-bombus.svg)
- ✅ 修復人才九宮格分佈統計無資訊問題
- ✅ 添加九宮格橫軸（績效表現）與縱軸（發展潛力）標籤
- ✅ 修復學習路徑圖無法顯示問題
- ✅ 完整初始化九宮格數據流程 (generateEmployees + updateNineBox)
- ✅ 添加篩選器事件綁定確保動態更新

詳細修復報告請參考: [BUGFIX-v1.3.md](./BUGFIX-v1.3.md)

### V1.2 (2025-01-01) - 完整功能修復版

**修復問題**:
- ✅ 統一 `index.html` 和 `talent-map.html` 側邊欄結構
- ✅ 修復人才九宮格無法顯示問題
- ✅ 添加九宮格完整 3x3 網格結構與員工卡片
- ✅ 修復學習發展路徑圖無法顯示問題
- ✅ 修正所有模組的初始化函數調用
- ✅ 調整關鍵人才儀表板圖表高度 (400px/450px)
- ✅ 添加員工卡片 CSS 樣式支援拖曳
- ✅ 完善九宮格莫蘭迪配色方案

詳細修復報告請參考: [BUGFIX-v1.2.md](./BUGFIX-v1.2.md)

### V1.1 (2025-01-01) - Bug 修復版

**修復問題**:
- ✅ 修復 Tab 切換按鈕無反應問題
- ✅ 修復組織職能熱力圖無法顯示問題
- ✅ 統一所有圖表容器 ID 與原始 JS 檔案匹配
- ✅ 統一所有篩選器 ID 與事件綁定邏輯匹配
- ✅ 調整 JS 載入順序，確保函數正確初始化
- ✅ 添加延遲初始化邏輯，確保 DOM 完全就緒
- ✅ 添加熱力圖詳細資訊 Modal 彈窗
- ✅ 添加統計資訊顯示區域

詳細修復報告請參考: [BUGFIX.md](./BUGFIX.md)

### V1.0 (2025-01-01) - 初始版本

- ✅ 建立完整系統管理介面
- ✅ 整合左側側邊欄與頂部導航列
- ✅ 整合 L3.2 人才地圖四大子模組
- ✅ 實作響應式設計
- ✅ 完全遵循 IDP 設計規範

---

**最後更新**: 2025-11-23  
**當前版本**: V1.15.0  
**開發者**: Gemini AI Assistant

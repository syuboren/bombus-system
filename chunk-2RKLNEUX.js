import{a as be}from"./chunk-RPXXBRUV.js";import{a as ce,b as de,c as se,d as ue,e as me,f as pe,h as ge,i as _e,j as Ce,l as xe}from"./chunk-6NWKX4EL.js";import{a as fe}from"./chunk-FPXKS7YP.js";import"./chunk-TKFFVAKG.js";import{$ as u,Ba as U,G as l,Ha as ae,Ja as re,L as f,La as le,N as S,O as J,P as b,Q as X,R as B,S as A,U as y,X as Y,Y as H,Z as t,_ as o,aa as w,ba as g,ca as d,fa as ee,ga as te,ha as ne,ia as r,ja as v,ka as M,n as L,o as Z,sa as ie,t as m,u as p,v as j,va as W,w as K,wa as R,za as oe}from"./chunk-Y7UTIMVI.js";import{a as D,b as T}from"./chunk-GAL4ENT6.js";var ve=["canvasContainer"],Q=(c,a)=>a.company.id,ye=(c,a)=>a.id;function Me(c,a){if(c&1&&(t(0,"div",9)(1,"div",19)(2,"div",20),u(3,"i",21),o(),t(4,"div",22)(5,"div",23),r(6),o(),t(7,"div",24),r(8,"\u96C6\u5718\u516C\u53F8\u6578"),o()()(),t(9,"div",19)(10,"div",25),u(11,"i",26),o(),t(12,"div",22)(13,"div",23),r(14),o(),t(15,"div",24),r(16,"\u90E8\u9580\u7E3D\u6578"),o()()(),t(17,"div",19)(18,"div",27),u(19,"i",28),o(),t(20,"div",22)(21,"div",23),r(22),o(),t(23,"div",24),r(24,"\u54E1\u5DE5\u7E3D\u6578"),o()()(),t(25,"div",19)(26,"div",29),u(27,"i",30),o(),t(28,"div",22)(29,"div",23),r(30),o(),t(31,"div",24),r(32,"\u8DE8\u516C\u53F8\u4EFB\u8077\u4EBA\u6578"),o()()()()),c&2){let e=a;l(6),v(e.totalCompanies),l(8),v(e.totalDepartments),l(8),v(e.totalEmployees),l(8),v(e.crossCompanyEmployees)}}function Pe(c,a){if(c&1){let e=w();t(0,"div",15)(1,"button",31),g("click",function(){m(e);let n=d();return p(n.toggleEditMode())}),u(2,"i",32),t(3,"span"),r(4),o()(),u(5,"div",33),t(6,"button",34),g("click",function(){m(e);let n=d();return p(n.toggleGridSnap())}),u(7,"i",35),o(),t(8,"button",36),g("click",function(){m(e);let n=d();return p(n.zoomOut())}),u(9,"i",37),o(),t(10,"span",38),r(11),o(),t(12,"button",39),g("click",function(){m(e);let n=d();return p(n.zoomIn())}),u(13,"i",40),o(),t(14,"button",41),g("click",function(){m(e);let n=d();return p(n.resetZoom())}),u(15,"i",42),o()()}if(c&2){let e=d();l(),B("active",e.isEditMode()),l(3),v(e.isEditMode()?"\u5B8C\u6210\u7DE8\u8F2F":"\u7DE8\u8F2F\u4F48\u5C40"),l(2),B("active",e.gridSnapEnabled()),l(5),M("",(e.canvasScale()*100).toFixed(0),"%")}}function Se(c,a){if(c&1&&(t(0,"span",72),r(1),o()),c&2){let e=d(2);l(),M(" \u5DF2\u9078\u53D6 ",e.selectedNodes().size," \u9805 ")}}function Ee(c,a){if(c&1){let e=w();t(0,"section",16)(1,"div",43)(2,"span",44),r(3,"\u9078\u53D6\uFF1A"),o(),t(4,"button",45),g("click",function(){m(e);let n=d();return p(n.selectAllNodes())}),u(5,"i",46),r(6," \u5168\u9078 "),o(),t(7,"button",47),g("click",function(){m(e);let n=d();return p(n.clearSelection())}),u(8,"i",48),r(9," \u53D6\u6D88\u9078\u53D6 "),o(),S(10,Se,2,1,"span",49),o(),u(11,"div",50),t(12,"div",43)(13,"span",44),r(14,"\u5C0D\u9F4A\uFF1A"),o(),t(15,"button",51),g("click",function(){m(e);let n=d();return p(n.alignNodes("left"))}),u(16,"i",52),o(),t(17,"button",53),g("click",function(){m(e);let n=d();return p(n.alignNodes("center-h"))}),u(18,"i",54),o(),t(19,"button",55),g("click",function(){m(e);let n=d();return p(n.alignNodes("right"))}),u(20,"i",56),o(),u(21,"div",57),t(22,"button",58),g("click",function(){m(e);let n=d();return p(n.alignNodes("top"))}),u(23,"i",59),o(),t(24,"button",60),g("click",function(){m(e);let n=d();return p(n.alignNodes("center-v"))}),u(25,"i",61),o(),t(26,"button",62),g("click",function(){m(e);let n=d();return p(n.alignNodes("bottom"))}),u(27,"i",63),o()(),u(28,"div",50),t(29,"div",43)(30,"span",44),r(31,"\u5206\u5E03\uFF1A"),o(),t(32,"button",64),g("click",function(){m(e);let n=d();return p(n.alignNodes("distribute-h"))}),u(33,"i",65),o(),t(34,"button",66),g("click",function(){m(e);let n=d();return p(n.alignNodes("distribute-v"))}),u(35,"i",67),o()(),u(36,"div",50),t(37,"div",43)(38,"button",68),g("click",function(){m(e);let n=d();return p(n.undo())}),u(39,"i",69),r(40," \u9084\u539F "),o(),t(41,"button",70),g("click",function(){m(e);let n=d();return p(n.autoArrange())}),u(42,"i",71),r(43," \u81EA\u52D5\u6574\u7406 "),o()()()}if(c&2){let e=d();l(7),b("disabled",e.selectedNodes().size===0),l(3),b("ngIf",e.selectedNodes().size>0),l(5),b("disabled",e.selectedNodes().size<2),l(2),b("disabled",e.selectedNodes().size<2),l(2),b("disabled",e.selectedNodes().size<2),l(3),b("disabled",e.selectedNodes().size<2),l(2),b("disabled",e.selectedNodes().size<2),l(2),b("disabled",e.selectedNodes().size<2),l(6),b("disabled",e.selectedNodes().size<3),l(2),b("disabled",e.selectedNodes().size<3),l(4),b("disabled",!e.canUndo())}}function we(c,a){c&1&&(t(0,"div",17),u(1,"i",73),t(2,"span"),r(3,"\u8F09\u5165\u7D44\u7E54\u67B6\u69CB\u4E2D..."),o()())}function ke(c,a){c&1&&u(0,"div",79)}function Fe(c,a){if(c&1&&(j(),u(0,"path",87)),c&2){let e=a.$implicit,i=d(),n=d(3);J("d",n.getConnectionPath(i.company.id,e.company.id))}}function Oe(c,a){c&1&&Y(0,Fe,1,1,":svg:path",87,Q),c&2&&H(a.children)}function De(c,a){c&1&&(t(0,"div",89),u(1,"i",97),o())}function Ve(c,a){c&1&&(t(0,"div",89),u(1,"i",97),o())}function Te(c,a){if(c&1){let e=w();t(0,"div",98),g("mousedown",function(n){let s=m(e).$implicit,_=d(4);return p(_.onNodeMouseDown(n,s.company.id))})("click",function(n){let s=m(e).$implicit,_=d(4);return p(_.onNodeClick(n,s.company))}),S(1,Ve,2,0,"div",89),t(2,"div",90),u(3,"i",99),t(4,"span",92),r(5,"\u5B50\u516C\u53F8"),o()(),t(6,"div",93),r(7),o(),t(8,"div",94)(9,"span"),u(10,"i",28),r(11),o(),t(12,"span"),u(13,"i",26),r(14),o()(),t(15,"div",95),r(16),o()()}if(c&2){let e=a.$implicit,i=d(4);X("left",i.getNodePosition(e.company.id).x-120,"px")("top",i.getNodePosition(e.company.id).y,"px"),B("selected",i.isNodeSelected(e.company.id))("draggable",i.isEditMode()),l(),y(i.isEditMode()?1:-1),l(6),v(e.company.name),l(4),M(" ",e.company.employeeCount," \u4EBA"),l(3),M(" ",e.company.departmentCount," \u90E8\u9580"),l(),A(i.getStatusClass(e.company.status)),l(),M(" ",e.company.status==="active"?"\u71DF\u904B\u4E2D":"\u5DF2\u505C\u6B62"," ")}}function Be(c,a){if(c&1){let e=w();t(0,"div",88),g("mousedown",function(n){let s=m(e),_=d(3);return p(_.onNodeMouseDown(n,s.company.id))})("click",function(n){let s=m(e),_=d(3);return p(_.onNodeClick(n,s.company))}),S(1,De,2,0,"div",89),t(2,"div",90),u(3,"i",91),t(4,"span",92),r(5,"\u6BCD\u516C\u53F8"),o()(),t(6,"div",93),r(7),o(),t(8,"div",94)(9,"span"),u(10,"i",28),r(11),o(),t(12,"span"),u(13,"i",26),r(14),o()(),t(15,"div",95),r(16),o()(),Y(17,Te,17,15,"div",96,Q)}if(c&2){let e=a,i=d(3);X("left",i.getNodePosition(e.company.id).x-120,"px")("top",i.getNodePosition(e.company.id).y,"px"),B("selected",i.isNodeSelected(e.company.id))("draggable",i.isEditMode()),l(),y(i.isEditMode()?1:-1),l(6),v(e.company.name),l(4),M(" ",e.company.employeeCount," \u4EBA"),l(3),M(" ",e.company.departmentCount," \u90E8\u9580"),l(),A(i.getStatusClass(e.company.status)),l(),M(" ",e.company.status==="active"?"\u71DF\u904B\u4E2D":"\u5DF2\u505C\u6B62"," "),l(),H(e.children)}}function Ae(c,a){c&1&&(t(0,"div",86),u(1,"i",100),t(2,"span"),r(3,"\u62D6\u66F3\u7BC0\u9EDE\u8ABF\u6574\u4F4D\u7F6E \xB7 Ctrl/Cmd + \u9EDE\u64CA\u591A\u9078 \xB7 \u4F7F\u7528\u5DE5\u5177\u5217\u5C0D\u9F4A"),o()())}function ze(c,a){if(c&1){let e=w();t(0,"section",76)(1,"div",77,0),g("mousedown",function(n){m(e);let s=d(2);return p(s.onCanvasMouseDown(n))})("mousemove",function(n){m(e);let s=d(2);return p(s.onCanvasMouseMove(n))})("mouseup",function(){m(e);let n=d(2);return p(n.onCanvasMouseUp())})("mouseleave",function(){m(e);let n=d(2);return p(n.onCanvasMouseUp())})("wheel",function(n){m(e);let s=d(2);return p(s.onCanvasWheel(n))}),t(3,"div",78),S(4,ke,1,0,"div",79),j(),t(5,"svg",80),S(6,Oe,2,0),o(),S(7,Be,19,15),o()(),K(),t(8,"div",81)(9,"div",82),u(10,"span",83),t(11,"span"),r(12,"\u6BCD\u516C\u53F8 (\u96C6\u5718\u7E3D\u90E8)"),o()(),t(13,"div",82),u(14,"span",84),t(15,"span"),r(16,"\u5B50\u516C\u53F8"),o()(),t(17,"div",82),u(18,"span",85),t(19,"span"),r(20,"\u96B8\u5C6C\u95DC\u4FC2"),o()()(),S(21,Ae,4,0,"div",86),o()}if(c&2){let e,i,n=d(2);B("edit-mode",n.isEditMode()),l(),B("panning",n.isPanning())("editing",n.isEditMode()),l(2),X("transform","translate("+n.canvasPanX()+"px, "+n.canvasPanY()+"px) scale("+n.canvasScale()+")"),l(),y(n.isEditMode()&&n.gridSnapEnabled()?4:-1),l(2),y((e=n.treeData())?6:-1,e),l(),y((i=n.treeData())?7:-1,i),l(14),y(n.isEditMode()?21:-1)}}function Ge(c,a){c&1&&(t(0,"span",114),r(1,"\u2514"),o())}function Ne(c,a){if(c&1){let e=w();t(0,"tr",112)(1,"td",103)(2,"div",113),S(3,Ge,2,0,"span",114),t(4,"div",115),u(5,"i"),t(6,"span",116),r(7),o()()()(),t(8,"td",104),r(9),o(),t(10,"td",105)(11,"span",117),r(12),o()(),t(13,"td",106),r(14),o(),t(15,"td",107),r(16),o(),t(17,"td",108),r(18),W(19,"date"),o(),t(20,"td",109)(21,"span",118),r(22),o()(),t(23,"td",110)(24,"button",119),g("click",function(){let n=m(e).$implicit,s=d(3);return p(s.selectCompany(n.company))}),u(25,"i",120),o(),t(26,"button",121),u(27,"i",122),o()()()}if(c&2){let e=a.$implicit,i=d(3);B("level-0",e.level===0)("level-1",e.level===1),l(2),X("padding-left",e.level*24,"px"),l(),y(e.level>0?3:-1),l(2),A(e.company.type==="headquarters"?"ri-building-4-line":"ri-building-2-line"),l(2),v(e.company.name),l(2),v(e.company.code),l(2),A(e.company.type),l(),M(" ",i.getCompanyTypeLabel(e.company.type)," "),l(2),M("",e.company.employeeCount," \u4EBA"),l(2),M("",e.company.departmentCount," \u500B"),l(2),v(R(19,20,e.company.establishedDate,"yyyy/MM/dd")),l(3),A(i.getStatusClass(e.company.status)),l(),M(" ",e.company.status==="active"?"\u71DF\u904B\u4E2D":"\u5DF2\u505C\u6B62"," ")}}function Ie(c,a){if(c&1&&(t(0,"section",75)(1,"div",101)(2,"table",102)(3,"thead")(4,"tr")(5,"th",103),r(6,"\u516C\u53F8\u540D\u7A31"),o(),t(7,"th",104),r(8,"\u516C\u53F8\u4EE3\u78BC"),o(),t(9,"th",105),r(10,"\u985E\u578B"),o(),t(11,"th",106),r(12,"\u54E1\u5DE5\u6578"),o(),t(13,"th",107),r(14,"\u90E8\u9580\u6578"),o(),t(15,"th",108),r(16,"\u6210\u7ACB\u65E5\u671F"),o(),t(17,"th",109),r(18,"\u72C0\u614B"),o(),t(19,"th",110),r(20,"\u64CD\u4F5C"),o()()(),t(21,"tbody"),Y(22,Ne,28,23,"tr",111,Q),o()()()()),c&2){let e=d(2);l(22),H(e.flatList())}}function $e(c,a){if(c&1&&S(0,ze,22,12,"section",74)(1,Ie,24,0,"section",75),c&2){let e=d();y(e.viewMode()==="canvas"?0:-1),l(),y(e.viewMode()==="list"?1:-1)}}function Ye(c,a){if(c&1){let e=w();t(0,"button",142),g("click",function(){m(e);let n=d(2);return p(n.goBackCompany())}),u(1,"i",143),o()}}function He(c,a){if(c&1&&(t(0,"div",132)(1,"h3",133),r(2,"\u516C\u53F8\u7C21\u4ECB"),o(),t(3,"p",144),r(4),o()()),c&2){let e=d();l(4),v(e.description)}}function Xe(c,a){if(c&1){let e=w();t(0,"div",147),g("click",function(){let n=m(e).$implicit,s=d(3);return p(s.selectCompany(n))}),u(1,"i",99),t(2,"span",148),r(3),o(),t(4,"span",149),r(5),o()()}if(c&2){let e=a.$implicit;l(3),v(e.name),l(2),M("",e.employeeCount," \u4EBA")}}function qe(c,a){if(c&1&&(t(0,"div",132)(1,"h3",133),r(2,"\u8F44\u4E0B\u5B50\u516C\u53F8"),o(),t(3,"div",145),Y(4,Xe,6,2,"div",146,ye),o()()),c&2){let e=d(),i=d();l(4),H(i.getSubsidiaries(e.id))}}function Le(c,a){if(c&1){let e=w();t(0,"button",150),g("click",function(){m(e);let n=d(),s=d();return p(s.confirmDeleteCompany(n))}),u(1,"i",151),r(2," \u522A\u9664\u516C\u53F8 "),o()}}function je(c,a){if(c&1){let e=w();t(0,"div",123),g("click",function(){m(e);let n=d();return p(n.closeCompanyModal())}),t(1,"div",124),g("click",function(n){return m(e),p(n.stopPropagation())}),t(2,"div",125),S(3,Ye,2,0,"button",126),t(4,"h2",127),u(5,"i"),r(6),o(),t(7,"button",128),g("click",function(){m(e);let n=d();return p(n.closeCompanyModal())}),u(8,"i",129),o()(),t(9,"div",130)(10,"div",131)(11,"div",132)(12,"h3",133),r(13,"\u57FA\u672C\u8CC7\u8A0A"),o(),t(14,"div",134)(15,"div",135)(16,"span",136),r(17,"\u516C\u53F8\u4EE3\u78BC"),o(),t(18,"span",137),r(19),o()(),t(20,"div",135)(21,"span",136),r(22,"\u516C\u53F8\u985E\u578B"),o(),t(23,"span",137)(24,"span",117),r(25),o()()(),t(26,"div",135)(27,"span",136),r(28,"\u7D71\u4E00\u7DE8\u865F"),o(),t(29,"span",137),r(30),o()(),t(31,"div",135)(32,"span",136),r(33,"\u6210\u7ACB\u65E5\u671F"),o(),t(34,"span",137),r(35),W(36,"date"),o()(),t(37,"div",135)(38,"span",136),r(39,"\u54E1\u5DE5\u4EBA\u6578"),o(),t(40,"span",137),r(41),o()(),t(42,"div",135)(43,"span",136),r(44,"\u71DF\u904B\u72C0\u614B"),o(),t(45,"span",137)(46,"span",118),r(47),o()()()()(),t(48,"div",132)(49,"h3",133),r(50,"\u806F\u7D61\u8CC7\u8A0A"),o(),t(51,"div",134)(52,"div",138)(53,"span",136),r(54,"\u5730\u5740"),o(),t(55,"span",137),r(56),o()(),t(57,"div",135)(58,"span",136),r(59,"\u96FB\u8A71"),o(),t(60,"span",137),r(61),o()(),t(62,"div",135)(63,"span",136),r(64,"\u96FB\u5B50\u90F5\u4EF6"),o(),t(65,"span",137),r(66),o()()()(),S(67,He,5,1,"div",132)(68,qe,6,0,"div",132),o()(),t(69,"div",139),S(70,Le,3,0,"button",140),t(71,"button",141),g("click",function(){m(e);let n=d();return p(n.closeCompanyModal())}),r(72,"\u95DC\u9589"),o(),t(73,"button",5),g("click",function(){let n=m(e),s=d();return p(s.openEditCompanyForm(n))}),u(74,"i",122),r(75," \u7DE8\u8F2F\u8CC7\u8A0A "),o()()()()}if(c&2){let e=a,i=d();l(3),y(i.canGoBackCompany()?3:-1),l(2),A(e.type==="headquarters"?"ri-building-4-line":"ri-building-2-line"),l(),M(" ",e.name," "),l(13),v(e.code),l(5),A(e.type),l(),M(" ",i.getCompanyTypeLabel(e.type)," "),l(5),v(e.taxId||"-"),l(5),v(R(36,20,e.establishedDate,"yyyy/MM/dd")),l(6),M("",e.employeeCount," \u4EBA"),l(5),A(i.getStatusClass(e.status)),l(),M(" ",e.status==="active"?"\u71DF\u904B\u4E2D":"\u5DF2\u505C\u6B62"," "),l(9),v(e.address),l(5),v(e.phone||"-"),l(5),v(e.email||"-"),l(),y(e.description?67:-1),l(),y(i.getSubsidiaries(e.id).length>0?68:-1),l(2),y(e.type!=="headquarters"?70:-1)}}function We(c,a){if(c&1&&(t(0,"option",174),r(1),o()),c&2){let e=d().$implicit;b("value",e.id),l(),v(e.name)}}function Re(c,a){if(c&1&&S(0,We,2,2,"option",174),c&2){let e=a.$implicit,i=d(2);y(e.id!==i.companyForm().id?0:-1)}}function Ue(c,a){if(c&1){let e=w();t(0,"div",123),g("click",function(){m(e);let n=d();return p(n.closeCompanyForm())}),t(1,"div",152),g("click",function(n){return m(e),p(n.stopPropagation())}),t(2,"div",125)(3,"h2",127),u(4,"i"),r(5),o(),t(6,"button",128),g("click",function(){m(e);let n=d();return p(n.closeCompanyForm())}),u(7,"i",129),o()(),t(8,"div",130)(9,"form",153)(10,"div",154)(11,"div",155)(12,"label",156),r(13,"\u516C\u53F8\u540D\u7A31"),o(),t(14,"input",157),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("name",n))}),o()(),t(15,"div",155)(16,"label",156),r(17,"\u516C\u53F8\u4EE3\u78BC"),o(),t(18,"input",158),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("code",n))}),o()()(),t(19,"div",154)(20,"div",155)(21,"label",159),r(22,"\u516C\u53F8\u985E\u578B"),o(),t(23,"select",160),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("type",n))}),t(24,"option",161),r(25,"\u6BCD\u516C\u53F8"),o(),t(26,"option",162),r(27,"\u5B50\u516C\u53F8"),o()()(),t(28,"div",155)(29,"label",159),r(30,"\u4E0A\u7D1A\u516C\u53F8"),o(),t(31,"select",163),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("parentCompanyId",n))}),t(32,"option",164),r(33,"\u7121"),o(),Y(34,Re,1,1,null,null,ye),o()()(),t(36,"div",154)(37,"div",165)(38,"label",159),r(39,"\u516C\u53F8\u5730\u5740"),o(),t(40,"input",166),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("address",n))}),o()()(),t(41,"div",154)(42,"div",155)(43,"label",159),r(44,"\u806F\u7D61\u96FB\u8A71"),o(),t(45,"input",167),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("phone",n))}),o()(),t(46,"div",155)(47,"label",159),r(48,"\u96FB\u5B50\u90F5\u4EF6"),o(),t(49,"input",168),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("email",n))}),o()()(),t(50,"div",154)(51,"div",155)(52,"label",159),r(53,"\u7D71\u4E00\u7DE8\u865F"),o(),t(54,"input",169),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("taxId",n))}),o()(),t(55,"div",155)(56,"label",159),r(57,"\u516C\u53F8\u72C0\u614B"),o(),t(58,"select",160),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("status",n))}),t(59,"option",170),r(60,"\u71DF\u904B\u4E2D"),o(),t(61,"option",171),r(62,"\u5DF2\u505C\u6B62"),o()()()(),t(63,"div",154)(64,"div",165)(65,"label",159),r(66,"\u516C\u53F8\u7C21\u4ECB"),o(),t(67,"textarea",172),g("ngModelChange",function(n){m(e);let s=d();return p(s.updateFormField("description",n))}),o()()()()(),t(68,"div",139)(69,"button",141),g("click",function(){m(e);let n=d();return p(n.closeCompanyForm())}),r(70,"\u53D6\u6D88"),o(),t(71,"button",5),g("click",function(){m(e);let n=d();return p(n.saveCompany())}),u(72,"i",173),r(73),o()()()()}if(c&2){let e=d();l(4),A(e.isEditingCompany()?"ri-edit-line":"ri-add-line"),l(),M(" ",e.isEditingCompany()?"\u7DE8\u8F2F\u516C\u53F8\u8CC7\u8A0A":"\u65B0\u589E\u516C\u53F8"," "),l(9),b("ngModel",e.companyForm().name),l(4),b("ngModel",e.companyForm().code),l(5),b("ngModel",e.companyForm().type),l(8),b("ngModel",e.companyForm().parentCompanyId)("disabled",e.companyForm().type==="headquarters"),l(3),H(e.companies()),l(6),b("ngModel",e.companyForm().address),l(5),b("ngModel",e.companyForm().phone),l(4),b("ngModel",e.companyForm().email),l(5),b("ngModel",e.companyForm().taxId),l(4),b("ngModel",e.companyForm().status),l(9),b("ngModel",e.companyForm().description),l(6),M(" ",e.isEditingCompany()?"\u5132\u5B58\u8B8A\u66F4":"\u5EFA\u7ACB\u516C\u53F8"," ")}}function Qe(c,a){if(c&1){let e=w();t(0,"div",123),g("click",function(){m(e);let n=d();return p(n.cancelDelete())}),t(1,"div",175),g("click",function(n){return m(e),p(n.stopPropagation())}),t(2,"div",176)(3,"h2",127),u(4,"i",177),r(5," \u78BA\u8A8D\u522A\u9664 "),o()(),t(6,"div",130)(7,"div",178)(8,"p",179),r(9," \u60A8\u78BA\u5B9A\u8981\u522A\u9664\u516C\u53F8 "),t(10,"strong"),r(11),o(),r(12," \u55CE\uFF1F "),o(),t(13,"p",180),u(14,"i",181),r(15," \u6B64\u64CD\u4F5C\u7121\u6CD5\u5FA9\u539F\uFF0C\u8ACB\u8B39\u614E\u64CD\u4F5C\u3002 "),o()()(),t(16,"div",139)(17,"button",141),g("click",function(){m(e);let n=d();return p(n.cancelDelete())}),r(18,"\u53D6\u6D88"),o(),t(19,"button",150),g("click",function(){m(e);let n=d();return p(n.executeDeleteCompany())}),u(20,"i",151),r(21," \u78BA\u8A8D\u522A\u9664 "),o()()()()}c&2&&(l(11),v(a.name))}var he=class c{orgService=L(be);cdr=L(oe);canvasContainerRef;pageTitle="\u96C6\u5718\u7D44\u7E54\u5716";breadcrumbs=["\u9996\u9801","\u7D44\u7E54\u7BA1\u7406"];companies=f([]);stats=f(null);loading=f(!0);viewMode=f("canvas");isEditMode=f(!1);canvasScale=f(1);canvasPanX=f(0);canvasPanY=f(0);isPanning=f(!1);panStartX=0;panStartY=0;nodePositions=f(new Map);positionHistory=f([]);maxHistoryLength=50;nodeWidth=240;nodeHeight=160;isDraggingNode=f(!1);draggingNodeId=f(null);dragNodeStartX=0;dragNodeStartY=0;dragNodeOffsetX=0;dragNodeOffsetY=0;selectedNodes=f(new Set);gridSnapEnabled=f(!0);gridSize=20;selectedCompany=f(null);showCompanyModal=f(!1);companyViewHistory=f([]);showCompanyForm=f(!1);isEditingCompany=f(!1);companyForm=f({});showDeleteConfirm=f(!1);companyToDelete=f(null);treeData=U(()=>{let a=this.companies(),e=a.find(n=>n.type==="headquarters");if(!e)return null;let i=n=>{let s=a.filter(_=>_.parentCompanyId===n.id);return{company:n,children:s.map(_=>i(_)),expanded:!0}};return i(e)});flatList=U(()=>{let a=[],e=(i,n)=>{i&&(a.push({company:i.company,level:n}),i.children.forEach(s=>e(s,n+1)))};return e(this.treeData(),0),a});ngOnInit(){this.loadData()}ngAfterViewInit(){}loadData(){this.loading.set(!0),this.orgService.getCompanies().subscribe(a=>{this.companies.set(a),this.initializeNodePositions(a),this.loading.set(!1)}),this.orgService.getOrganizationStats().subscribe(a=>{this.stats.set(a)})}initializeNodePositions(a){let e=new Map,i=a.find(h=>h.type==="headquarters");if(!i)return;e.set(i.id,{id:i.id,x:400,y:60});let n=a.filter(h=>h.parentCompanyId===i.id),s=280,_=400-(n.length-1)*s/2;n.forEach((h,N)=>{e.set(h.id,{id:h.id,x:_+N*s,y:240})}),this.nodePositions.set(e)}getNodePosition(a){return this.nodePositions().get(a)||{id:a,x:400,y:60}}setViewMode(a){this.viewMode.set(a)}toggleEditMode(){this.isEditMode.update(a=>!a),this.isEditMode()||this.selectedNodes.set(new Set)}zoomIn(){this.canvasScale.update(a=>Math.min(a+.1,2))}zoomOut(){this.canvasScale.update(a=>Math.max(a-.1,.5))}resetZoom(){this.canvasScale.set(1),this.canvasPanX.set(0),this.canvasPanY.set(0)}toggleGridSnap(){this.gridSnapEnabled.update(a=>!a)}onCanvasMouseDown(a){a.target.closest(".company-node")||(this.isPanning.set(!0),this.panStartX=a.clientX-this.canvasPanX(),this.panStartY=a.clientY-this.canvasPanY(),this.isEditMode()&&this.selectedNodes.set(new Set))}onCanvasMouseMove(a){if(this.isPanning()&&(this.canvasPanX.set(a.clientX-this.panStartX),this.canvasPanY.set(a.clientY-this.panStartY)),this.isDraggingNode()&&this.draggingNodeId()){let e=this.canvasScale(),i=(a.clientX-this.dragNodeOffsetX)/e,n=(a.clientY-this.dragNodeOffsetY)/e;this.gridSnapEnabled()&&(i=Math.round(i/this.gridSize)*this.gridSize,n=Math.round(n/this.gridSize)*this.gridSize);let s=new Map(this.nodePositions()),_=this.draggingNodeId(),h=s.get(_);if(h){let N=i-h.x,G=n-h.y;this.selectedNodes().has(_)&&this.selectedNodes().size>1?this.selectedNodes().forEach(I=>{let z=s.get(I);if(z){let $=z.x+N,k=z.y+G;this.gridSnapEnabled()&&($=Math.round($/this.gridSize)*this.gridSize,k=Math.round(k/this.gridSize)*this.gridSize),s.set(I,T(D({},z),{x:$,y:k}))}}):s.set(_,{id:_,x:i,y:n})}this.nodePositions.set(s),this.cdr.detectChanges()}}onCanvasMouseUp(){this.isPanning.set(!1),this.isDraggingNode.set(!1),this.draggingNodeId.set(null)}onCanvasWheel(a){a.preventDefault();let e=a.deltaY>0?-.05:.05;this.canvasScale.update(i=>Math.max(.5,Math.min(2,i+e)))}saveToHistory(){let a=new Map(this.nodePositions());this.positionHistory.update(e=>{let i=[...e,a];return i.length>this.maxHistoryLength&&i.shift(),i})}undo(){let a=this.positionHistory();if(a.length===0)return;let e=a[a.length-1];this.positionHistory.update(i=>i.slice(0,-1)),this.nodePositions.set(e)}canUndo(){return this.positionHistory().length>0}onNodeMouseDown(a,e){if(a.stopPropagation(),this.isEditMode()){this.saveToHistory(),a.ctrlKey||a.metaKey?this.selectedNodes.update(s=>{let _=new Set(s);return _.has(e)?_.delete(e):_.add(e),_}):this.selectedNodes().has(e)||this.selectedNodes.set(new Set([e])),this.isDraggingNode.set(!0),this.draggingNodeId.set(e);let i=this.getNodePosition(e),n=this.canvasScale();this.dragNodeOffsetX=a.clientX-i.x*n,this.dragNodeOffsetY=a.clientY-i.y*n}}onNodeClick(a,e){a.stopPropagation(),this.isEditMode()||this.selectCompany(e)}isNodeSelected(a){return this.selectedNodes().has(a)}alignNodes(a){let e=Array.from(this.selectedNodes());if(e.length<2)return;let i=new Map(this.nodePositions()),n=e.map(h=>i.get(h)).filter(h=>h);if(n.length<2)return;let s=n.map(h=>h.x),_=n.map(h=>h.y);switch(a){case"left":let h=Math.min(...s);e.forEach(C=>{let x=i.get(C);x&&i.set(C,T(D({},x),{x:h}))});break;case"center-h":let N=s.reduce((C,x)=>C+x,0)/s.length;e.forEach(C=>{let x=i.get(C);x&&i.set(C,T(D({},x),{x:Math.round(N/this.gridSize)*this.gridSize}))});break;case"right":let G=Math.max(...s);e.forEach(C=>{let x=i.get(C);x&&i.set(C,T(D({},x),{x:G}))});break;case"top":let I=Math.min(..._);e.forEach(C=>{let x=i.get(C);x&&i.set(C,T(D({},x),{y:I}))});break;case"center-v":let z=_.reduce((C,x)=>C+x,0)/_.length;e.forEach(C=>{let x=i.get(C);x&&i.set(C,T(D({},x),{y:Math.round(z/this.gridSize)*this.gridSize}))});break;case"bottom":let $=Math.max(..._);e.forEach(C=>{let x=i.get(C);x&&i.set(C,T(D({},x),{y:$}))});break;case"distribute-h":if(e.length<3)return;let k=[...n].sort((C,x)=>C.x-x.x),E=(k[k.length-1].x-k[0].x)/(k.length-1);k.forEach((C,x)=>{let O=k[0].x+x*E;i.set(C.id,T(D({},C),{x:Math.round(O/this.gridSize)*this.gridSize}))});break;case"distribute-v":if(e.length<3)return;let P=[...n].sort((C,x)=>C.y-x.y),F=(P[P.length-1].y-P[0].y)/(P.length-1);P.forEach((C,x)=>{let O=P[0].y+x*F;i.set(C.id,T(D({},C),{y:Math.round(O/this.gridSize)*this.gridSize}))});break}this.nodePositions.set(i)}autoArrange(){let a=this.companies();this.initializeNodePositions(a),this.selectedNodes.set(new Set)}selectAllNodes(){let a=new Set(this.companies().map(e=>e.id));this.selectedNodes.set(a)}clearSelection(){this.selectedNodes.set(new Set)}selectCompany(a,e=!0){if(e){let i=this.selectedCompany();i&&this.companyViewHistory.update(n=>[...n,i])}this.selectedCompany.set(a),this.showCompanyModal.set(!0)}goBackCompany(){let a=this.companyViewHistory();if(a.length===0)return;let e=a[a.length-1];this.companyViewHistory.update(i=>i.slice(0,-1)),this.selectCompany(e,!1)}canGoBackCompany(){return this.companyViewHistory().length>0}closeCompanyModal(){this.showCompanyModal.set(!1),this.selectedCompany.set(null),this.companyViewHistory.set([])}getCompanyTypeLabel(a){return a==="headquarters"?"\u6BCD\u516C\u53F8":"\u5B50\u516C\u53F8"}getStatusClass(a){return a==="active"?"status--active":"status--inactive"}getSubsidiaries(a){return this.companies().filter(e=>e.parentCompanyId===a)}getConnectionPath(a,e){let i=this.getNodePosition(a),n=this.getNodePosition(e),s=i.y,_=i.y+this.nodeHeight,h=i.x-this.nodeWidth/2,N=i.x+this.nodeWidth/2,G=i.y+this.nodeHeight/2,I=n.y,z=n.y+this.nodeHeight,$=n.x-this.nodeWidth/2,k=n.x+this.nodeWidth/2,q=n.y+this.nodeHeight/2,E,P,V,F,C=z<G,x=I>G;if(C){E=i.x,P=s,V=n.x,F=z;let O=P+(F-P)/2;return`M ${E} ${P} C ${E} ${O}, ${V} ${O}, ${V} ${F}`}else if(x){E=i.x,P=_,V=n.x,F=I;let O=P+(F-P)/2;return`M ${E} ${P} C ${E} ${O}, ${V} ${O}, ${V} ${F}`}else{n.x>i.x?(E=N,P=G,V=$,F=q):(E=h,P=G,V=k,F=q);let O=E+(V-E)/2;return`M ${E} ${P} C ${O} ${P}, ${O} ${F}, ${V} ${F}`}}openCreateCompanyForm(){this.companyForm.set({name:"",code:"",type:"subsidiary",parentCompanyId:this.companies().find(a=>a.type==="headquarters")?.id,address:"",phone:"",email:"",taxId:"",employeeCount:0,departmentCount:0,establishedDate:new Date,status:"active",description:""}),this.isEditingCompany.set(!1),this.showCompanyForm.set(!0)}openEditCompanyForm(a){this.companyForm.set(D({},a)),this.isEditingCompany.set(!0),this.showCompanyForm.set(!0),this.closeCompanyModal()}closeCompanyForm(){this.showCompanyForm.set(!1),this.companyForm.set({})}saveCompany(){let a=this.companyForm();if(!a.name||!a.code){alert("\u8ACB\u586B\u5BEB\u516C\u53F8\u540D\u7A31\u548C\u4EE3\u78BC");return}this.isEditingCompany()?this.orgService.updateCompany(a.id,a).subscribe(e=>{e&&(this.loadData(),this.closeCompanyForm())}):this.orgService.createCompany(a).subscribe(e=>{this.loadData(),this.closeCompanyForm()})}confirmDeleteCompany(a){this.companyToDelete.set(a),this.showDeleteConfirm.set(!0),this.closeCompanyModal()}cancelDelete(){this.showDeleteConfirm.set(!1),this.companyToDelete.set(null)}executeDeleteCompany(){let a=this.companyToDelete();a&&this.orgService.deleteCompany(a.id).subscribe(e=>{e.success?this.loadData():alert(e.message),this.cancelDelete()})}updateFormField(a,e){this.companyForm.update(i=>T(D({},i),{[a]:e}))}static \u0275fac=function(e){return new(e||c)};static \u0275cmp=Z({type:c,selectors:[["app-group-structure-page"]],viewQuery:function(e,i){if(e&1&&ee(ve,5),e&2){let n;te(n=ne())&&(i.canvasContainerRef=n.first)}},standalone:!0,features:[ie],decls:26,vars:13,consts:[["canvasContainer",""],[3,"pageTitle","breadcrumbs"],[1,"header-actions"],["type","button",1,"btn-secondary"],[1,"ri-download-line"],["type","button",1,"btn-primary",3,"click"],[1,"ri-add-line"],[1,"group-structure-page"],[1,"stats-section"],[1,"stats-grid"],[1,"controls-section"],[1,"view-toggle"],["type","button",1,"toggle-btn",3,"click"],[1,"ri-artboard-line"],[1,"ri-list-check-2"],[1,"canvas-tools"],[1,"edit-toolbar"],[1,"loading-container"],[1,"modal-overlay"],[1,"stat-card"],[1,"stat-card__icon","stat-card__icon--primary"],[1,"ri-building-line"],[1,"stat-card__content"],[1,"stat-card__value"],[1,"stat-card__label"],[1,"stat-card__icon","stat-card__icon--secondary"],[1,"ri-organization-chart"],[1,"stat-card__icon","stat-card__icon--tertiary"],[1,"ri-team-line"],[1,"stat-card__icon","stat-card__icon--accent"],[1,"ri-user-shared-line"],["type","button","title","\u7DE8\u8F2F\u6A21\u5F0F",1,"tool-btn",3,"click"],[1,"ri-edit-2-line"],[1,"tool-divider"],["type","button","title","\u7DB2\u683C\u5438\u9644",1,"tool-btn","tool-btn--icon",3,"click"],[1,"ri-grid-line"],["type","button","title","\u7E2E\u5C0F",1,"tool-btn","tool-btn--icon",3,"click"],[1,"ri-zoom-out-line"],[1,"zoom-level"],["type","button","title","\u653E\u5927",1,"tool-btn","tool-btn--icon",3,"click"],[1,"ri-zoom-in-line"],["type","button","title","\u91CD\u7F6E",1,"tool-btn","tool-btn--icon",3,"click"],[1,"ri-refresh-line"],[1,"toolbar-group"],[1,"toolbar-label"],["type","button",1,"toolbar-btn",3,"click"],[1,"ri-checkbox-multiple-line"],["type","button",1,"toolbar-btn",3,"click","disabled"],[1,"ri-close-circle-line"],["class","selection-count",4,"ngIf"],[1,"toolbar-divider"],["type","button","title","\u9760\u5DE6\u5C0D\u9F4A",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-left"],["type","button","title","\u6C34\u5E73\u7F6E\u4E2D",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-center"],["type","button","title","\u9760\u53F3\u5C0D\u9F4A",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-right"],[1,"btn-separator"],["type","button","title","\u9760\u4E0A\u5C0D\u9F4A",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-top"],["type","button","title","\u5782\u76F4\u7F6E\u4E2D",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-vertically"],["type","button","title","\u9760\u4E0B\u5C0D\u9F4A",1,"toolbar-btn",3,"click","disabled"],[1,"ri-align-bottom"],["type","button","title","\u6C34\u5E73\u7B49\u8DDD",1,"toolbar-btn",3,"click","disabled"],[1,"ri-space-ship-line",2,"transform","rotate(90deg)"],["type","button","title","\u5782\u76F4\u7B49\u8DDD",1,"toolbar-btn",3,"click","disabled"],[1,"ri-space-ship-line"],["type","button","title","\u9084\u539F\u4E0A\u4E00\u6B65 (Ctrl+Z)",1,"toolbar-btn",3,"click","disabled"],[1,"ri-arrow-go-back-line"],["type","button","title","\u81EA\u52D5\u6574\u7406",1,"toolbar-btn","toolbar-btn--primary",3,"click"],[1,"ri-layout-grid-line"],[1,"selection-count"],[1,"ri-loader-4-line","spinner"],[1,"canvas-section",3,"edit-mode"],[1,"list-section"],[1,"canvas-section"],[1,"canvas-container",3,"mousedown","mousemove","mouseup","mouseleave","wheel"],[1,"canvas-content"],[1,"grid-overlay"],["width","3000","height","2000",1,"connections-svg",2,"overflow","visible"],[1,"canvas-legend"],[1,"legend-item"],[1,"legend-dot","legend-dot--hq"],[1,"legend-dot","legend-dot--subsidiary"],[1,"legend-line"],[1,"edit-hint"],["fill","none","stroke","#D6A28C","stroke-width","2","stroke-dasharray","5,5",1,"connection-line"],[1,"company-node","company-node--hq",3,"mousedown","click"],[1,"node-drag-handle"],[1,"company-node__header"],[1,"ri-building-4-line"],[1,"company-node__type"],[1,"company-node__name"],[1,"company-node__meta"],[1,"company-node__status"],[1,"company-node","company-node--subsidiary",3,"selected","draggable","left","top"],[1,"ri-draggable"],[1,"company-node","company-node--subsidiary",3,"mousedown","click"],[1,"ri-building-2-line"],[1,"ri-information-line"],[1,"list-container"],[1,"data-table"],[1,"col-name"],[1,"col-code"],[1,"col-type"],[1,"col-employees"],[1,"col-departments"],[1,"col-established"],[1,"col-status"],[1,"col-actions"],[1,"data-row",3,"level-0","level-1"],[1,"data-row"],[1,"company-cell"],[1,"tree-indicator"],[1,"company-info"],[1,"company-name"],[1,"type-badge"],[1,"status-badge"],["type","button","title","\u6AA2\u8996\u8A73\u60C5",1,"action-btn",3,"click"],[1,"ri-eye-line"],["type","button","title","\u7DE8\u8F2F",1,"action-btn"],[1,"ri-edit-line"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],["type","button",1,"modal-back-btn"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],[1,"ri-close-line"],[1,"modal-body"],[1,"company-detail"],[1,"detail-section"],[1,"section-title"],[1,"detail-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"detail-item","full-width"],[1,"modal-footer"],["type","button",1,"btn-danger"],["type","button",1,"btn-secondary",3,"click"],["type","button",1,"modal-back-btn",3,"click"],[1,"ri-arrow-left-line"],[1,"company-description"],[1,"subsidiary-list"],[1,"subsidiary-item"],[1,"subsidiary-item",3,"click"],[1,"subsidiary-name"],[1,"subsidiary-count"],["type","button",1,"btn-danger",3,"click"],[1,"ri-delete-bin-line"],[1,"modal-container","modal-form",3,"click"],[1,"company-form"],[1,"form-row"],[1,"form-group"],[1,"form-label","required"],["type","text","placeholder","\u8ACB\u8F38\u5165\u516C\u53F8\u540D\u7A31",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","\u4F8B\u5982\uFF1ABOMBUS-TECH",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["value","headquarters"],["value","subsidiary"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],["value",""],[1,"form-group","full-width"],["type","text","placeholder","\u8ACB\u8F38\u5165\u516C\u53F8\u5730\u5740",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","\u4F8B\u5982\uFF1A02-2345-6789",1,"form-input",3,"ngModelChange","ngModel"],["type","email","placeholder","\u4F8B\u5982\uFF1Ainfo@company.com",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","8\u4F4D\u6578\u5B57",1,"form-input",3,"ngModelChange","ngModel"],["value","active"],["value","inactive"],["rows","3","placeholder","\u8ACB\u8F38\u5165\u516C\u53F8\u7C21\u4ECB",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"ri-save-line"],[3,"value"],[1,"modal-container","modal-confirm",3,"click"],[1,"modal-header","modal-header--danger"],[1,"ri-error-warning-line"],[1,"confirm-content"],[1,"confirm-message"],[1,"confirm-warning"],[1,"ri-alert-line"]],template:function(e,i){if(e&1&&(t(0,"app-header",1)(1,"div",2)(2,"button",3),u(3,"i",4),r(4," \u532F\u51FA\u7D44\u7E54\u5716 "),o(),t(5,"button",5),g("click",function(){return i.openCreateCompanyForm()}),u(6,"i",6),r(7," \u65B0\u589E\u516C\u53F8 "),o()()(),t(8,"div",7)(9,"section",8),S(10,Me,33,4,"div",9),o(),t(11,"section",10)(12,"div",11)(13,"button",12),g("click",function(){return i.setViewMode("canvas")}),u(14,"i",13),r(15," \u756B\u5E03\u6A21\u5F0F "),o(),t(16,"button",12),g("click",function(){return i.setViewMode("list")}),u(17,"i",14),r(18," \u5217\u8868\u6A21\u5F0F "),o()(),S(19,Pe,16,6,"div",15),o(),S(20,Ee,44,11,"section",16)(21,we,4,0,"div",17)(22,$e,2,2),o(),S(23,je,76,23,"div",18)(24,Ue,74,15,"div",18)(25,Qe,22,1,"div",18)),e&2){let n,s,_;b("pageTitle",i.pageTitle)("breadcrumbs",i.breadcrumbs),l(10),y((n=i.stats())?10:-1,n),l(3),B("active",i.viewMode()==="canvas"),l(3),B("active",i.viewMode()==="list"),l(3),y(i.viewMode()==="canvas"?19:-1),l(),y(i.viewMode()==="canvas"&&i.isEditMode()?20:-1),l(),y(i.loading()?21:22),l(2),y((s=i.showCompanyModal()&&i.selectedCompany())?23:-1,s),l(),y(i.showCompanyForm()?24:-1),l(),y((_=i.showDeleteConfirm()&&i.companyToDelete())?25:-1,_)}},dependencies:[le,ae,re,xe,pe,_e,Ce,ce,ge,de,se,me,ue,fe],styles:['[_ngcontent-%COMP%]:root{--color-cloud-gray: #F5F5F7;--color-pure-white: #FCFCFD;--color-soft-gray: #E8E8EA;--color-text-primary: #464E56;--color-text-secondary: #6B7280;--color-text-dark: #1F2937;--color-brand-main: #64748B;--color-brand-light: #94A3B8;--color-brand-dark: #475569;--color-l1-sage: #8DA399;--color-l2-terracotta: #D6A28C;--color-l3-petrol: #7F9CA0;--color-l4-mauve: #9A8C98;--color-l5-brick: #B87D7B;--color-l6-rose: #C4A4A1;--color-success: #7FB095;--color-warning: #E3C088;--color-error: #C77F7F;--color-info: #8DA8BE;--sidebar-width: 280px;--sidebar-width-minimized: 80px;--header-height: 70px;--radius-sm: 6px;--radius-md: 8px;--radius-lg: 12px;--shadow-soft: 0 4px 20px rgba(0, 0, 0, .05);--shadow-md: 0 4px 12px rgba(0, 0, 0, .06);--shadow-lg: 0 8px 24px rgba(0, 0, 0, .08);--transition-normal: .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.group-structure-page[_ngcontent-%COMP%]{padding:calc(var(--header-height, 70px) + 20px) 1.5rem 1.5rem;min-height:100vh;background:#f5f5f7}.stats-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}@media (max-width: 1200px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:#fcfcfd;border-radius:12px;box-shadow:0 1px 2px #0000000a;transition:transform .15s ease,box-shadow .15s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000000f}.stat-card__icon[_ngcontent-%COMP%]{width:56px;height:56px;display:flex;align-items:center;justify-content:center;border-radius:8px;font-size:24px}.stat-card__icon--primary[_ngcontent-%COMP%]{background:#9a8c981f;color:#9a8c98}.stat-card__icon--secondary[_ngcontent-%COMP%]{background:#7f9ca01f;color:#7f9ca0}.stat-card__icon--tertiary[_ngcontent-%COMP%]{background:#8da3991f;color:#8da399}.stat-card__icon--accent[_ngcontent-%COMP%]{background:#8da8be1f;color:#8da8be}.stat-card__content[_ngcontent-%COMP%]{flex:1}.stat-card__value[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:#464e56;letter-spacing:-.5px}.stat-card__label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin-top:2px}.controls-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.view-toggle[_ngcontent-%COMP%]{display:flex;background:#fcfcfd;border-radius:8px;padding:.25rem;box-shadow:0 1px 2px #0000000a}.toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1.5rem;border:none;background:transparent;color:#6b7280;font-size:.875rem;font-weight:500;border-radius:6px;cursor:pointer;transition:all .15s ease}.toggle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.toggle-btn[_ngcontent-%COMP%]:hover{color:#9a8c98;background:#9a8c980d}.toggle-btn.active[_ngcontent-%COMP%]{background:#9a8c98;color:#fcfcfd}.canvas-tools[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#fcfcfd;border-radius:8px;padding:.25rem 1rem;box-shadow:0 1px 2px #0000000a}.tool-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:.5rem 1rem;border:none;background:transparent;color:#6b7280;font-size:.875rem;font-weight:500;border-radius:6px;cursor:pointer;transition:all .15s ease}.tool-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.tool-btn[_ngcontent-%COMP%]:hover{color:#9a8c98;background:#9a8c9814}.tool-btn.active[_ngcontent-%COMP%]{color:#9a8c98;background:#9a8c981f}.tool-btn--icon[_ngcontent-%COMP%]{padding:.5rem;width:32px;height:32px;justify-content:center}.tool-divider[_ngcontent-%COMP%]{width:1px;height:24px;background:#e8e8ea;margin:0 .25rem}.zoom-level[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;min-width:45px;text-align:center}.edit-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;background:#fcfcfd;border-radius:12px;box-shadow:0 1px 2px #0000000a;margin-bottom:1rem;flex-wrap:wrap}.toolbar-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.toolbar-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.toolbar-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;padding:.25rem .5rem;border:1px solid #E8E8EA;background:#fcfcfd;color:#464e56;font-size:.875rem;border-radius:6px;cursor:pointer;transition:all .15s ease}.toolbar-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.toolbar-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#9a8c98;color:#9a8c98;background:#9a8c980d}.toolbar-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.toolbar-btn--primary[_ngcontent-%COMP%]{background:#9a8c98;color:#fcfcfd;border-color:#9a8c98}.toolbar-btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#7a6c78;border-color:#7a6c78;color:#fcfcfd}.btn-separator[_ngcontent-%COMP%]{width:1px;height:20px;background:#e8e8ea;margin:0 .25rem}.toolbar-divider[_ngcontent-%COMP%]{width:1px;height:32px;background:#e8e8ea}.selection-count[_ngcontent-%COMP%]{font-size:.75rem;color:#9a8c98;font-weight:500;padding:.25rem .5rem;background:#9a8c981a;border-radius:6px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 1.5rem;color:#6b7280;gap:1rem}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{font-size:32px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.canvas-section[_ngcontent-%COMP%]{position:relative;background:#fcfcfd;border-radius:12px;box-shadow:0 1px 2px #0000000a;overflow:hidden}.canvas-section.edit-mode[_ngcontent-%COMP%]{border:2px dashed rgba(154,140,152,.4)}.canvas-container[_ngcontent-%COMP%]{width:100%;height:500px;overflow:hidden;cursor:grab;background:linear-gradient(90deg,rgba(232,232,234,.3) 1px,transparent 1px),linear-gradient(rgba(232,232,234,.3) 1px,transparent 1px);background-size:20px 20px;background-color:#f5f5f7}.canvas-container.panning[_ngcontent-%COMP%]{cursor:grabbing}.canvas-container.editing[_ngcontent-%COMP%]{cursor:default}.grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(90deg,rgba(154,140,152,.08) 1px,transparent 1px),linear-gradient(rgba(154,140,152,.08) 1px,transparent 1px);background-size:20px 20px;pointer-events:none}.canvas-content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transform-origin:center center;transition:transform .1s ease}.connections-svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.connection-line[_ngcontent-%COMP%]{stroke:#9a8c98;stroke-width:2;stroke-dasharray:8,4;fill:none;opacity:.6}.company-node[_ngcontent-%COMP%]{position:absolute;width:240px;padding:1rem;background:#fcfcfd;border-radius:12px;box-shadow:0 4px 12px #0000000f;cursor:pointer;transition:all .15s ease;border:2px solid transparent;-webkit-user-select:none;user-select:none}.company-node[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000014}.company-node.draggable[_ngcontent-%COMP%]{cursor:grab}.company-node.draggable[_ngcontent-%COMP%]:active{cursor:grabbing}.company-node.draggable[_ngcontent-%COMP%]:hover{transform:none}.company-node.selected[_ngcontent-%COMP%]{border-color:#9a8c98!important;box-shadow:0 0 0 3px #9a8c9840,0 8px 24px #00000014}.company-node.selected[_ngcontent-%COMP%]   .node-drag-handle[_ngcontent-%COMP%]{opacity:1}.company-node--hq[_ngcontent-%COMP%]{border-color:#9a8c98;background:linear-gradient(135deg,#fcfcfd,#9a8c980d)}.company-node--hq[_ngcontent-%COMP%]   .company-node__header[_ngcontent-%COMP%]{color:#9a8c98}.company-node--subsidiary[_ngcontent-%COMP%]{border-color:#7f9ca0;background:linear-gradient(135deg,#fcfcfd,#7f9ca00d)}.company-node--subsidiary[_ngcontent-%COMP%]   .company-node__header[_ngcontent-%COMP%]{color:#7f9ca0}.company-node__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;font-size:.75rem;font-weight:600}.company-node__header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.company-node__type[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.5px}.company-node__name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#464e56;margin-bottom:.5rem;line-height:1.5}.company-node__meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:.875rem;color:#6b7280;margin-bottom:1rem}.company-node__meta[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem;margin-right:.25rem}.company-node__status[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .5rem;font-size:.75rem;font-weight:500;border-radius:9999px}.company-node__status.status--active[_ngcontent-%COMP%]{background:#7fb0951f;color:#7fb095}.company-node__status.status--inactive[_ngcontent-%COMP%]{background:#c4c4c61f;color:#c4c4c6}.canvas-legend[_ngcontent-%COMP%]{position:absolute;bottom:1rem;left:1rem;display:flex;gap:1.5rem;padding:1rem;background:#fcfcfdf2;border-radius:8px;box-shadow:0 1px 2px #0000000a}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:#6b7280}.legend-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.legend-dot--hq[_ngcontent-%COMP%]{background:#9a8c98}.legend-dot--subsidiary[_ngcontent-%COMP%]{background:#7f9ca0}.legend-line[_ngcontent-%COMP%]{width:24px;height:2px;background:#9a8c98;border-style:dashed}.node-drag-handle[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:#9a8c981a;border-radius:6px;color:#9a8c98;font-size:1rem;opacity:.5;transition:opacity .15s ease;cursor:grab}.node-drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.edit-hint[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1rem;display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#9a8c98e6;color:#fcfcfd;font-size:.75rem;border-radius:8px;box-shadow:0 4px 12px #0000000f}.edit-hint[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.list-section[_ngcontent-%COMP%]{background:#fcfcfd;border-radius:12px;box-shadow:0 1px 2px #0000000a;overflow:hidden}.list-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #E8E8EA}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f7;font-size:.75rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.5px}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.875rem;color:#464e56}.data-row[_ngcontent-%COMP%]{transition:background .15s ease}.data-row[_ngcontent-%COMP%]:hover{background:#9a8c9808}.data-row.level-0[_ngcontent-%COMP%]{background:#9a8c980d;font-weight:500}.data-row.level-0[_ngcontent-%COMP%]:hover{background:#9a8c9814}.company-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.tree-indicator[_ngcontent-%COMP%]{color:#c4c4c6;font-family:SF Mono,Consolas,Liberation Mono,monospace;font-size:1rem}.company-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.company-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem;color:#9a8c98}.company-name[_ngcontent-%COMP%]{font-weight:500}.type-badge[_ngcontent-%COMP%]{display:inline-flex;padding:.25rem .5rem;font-size:.75rem;font-weight:500;border-radius:9999px}.type-badge.headquarters[_ngcontent-%COMP%]{background:#9a8c981f;color:#9a8c98}.type-badge.subsidiary[_ngcontent-%COMP%]{background:#7f9ca01f;color:#7f9ca0}.status-badge[_ngcontent-%COMP%]{display:inline-flex;padding:.25rem .5rem;font-size:.75rem;font-weight:500;border-radius:9999px}.status-badge.status--active[_ngcontent-%COMP%]{background:#7fb0951f;color:#7fb095}.status-badge.status--inactive[_ngcontent-%COMP%]{background:#c4c4c61f;color:#c4c4c6}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border:none;background:transparent;color:#6b7280;font-size:1rem;border-radius:6px;cursor:pointer;transition:all .15s ease}.action-btn[_ngcontent-%COMP%]:hover{color:#9a8c98;background:#9a8c9814}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1.5rem}.modal-container[_ngcontent-%COMP%]{background:#fcfcfd;border-radius:12px;box-shadow:0 16px 48px #0000001a;width:100%;max-width:640px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem 2rem;border-bottom:1px solid #E8E8EA;gap:1rem}.modal-back-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:#e8e8ea;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease;flex-shrink:0}.modal-back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem;color:#6b7280}.modal-back-btn[_ngcontent-%COMP%]:hover{background:#9a8c98}.modal-back-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}.modal-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:1.125rem;font-weight:600;color:#464e56;margin:0;flex:1}.modal-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:#9a8c98}.modal-close[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:#6b7280;font-size:1.25rem;border-radius:6px;cursor:pointer;transition:all .15s ease}.modal-close[_ngcontent-%COMP%]:hover{color:#464e56;background:#f5f5f7}.modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:2rem}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:1rem 2rem;border-top:1px solid #E8E8EA;background:#f5f5f7}.company-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.detail-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#464e56;margin:0 0 1rem;padding-bottom:.5rem;border-bottom:1px solid #E8E8EA}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.detail-item.full-width[_ngcontent-%COMP%]{grid-column:span 2}.detail-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.detail-value[_ngcontent-%COMP%]{font-size:.875rem;color:#464e56;font-weight:500}.company-description[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;line-height:1.75;margin:0}.subsidiary-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.subsidiary-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:#f5f5f7;border-radius:8px;cursor:pointer;transition:all .15s ease}.subsidiary-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem;color:#7f9ca0}.subsidiary-item[_ngcontent-%COMP%]:hover{background:#7f9ca01a}.subsidiary-name[_ngcontent-%COMP%]{flex:1;font-size:.875rem;font-weight:500;color:#464e56}.subsidiary-count[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}.btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1.5rem;background:#9a8c98;color:#fcfcfd;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:#7a6c78}.btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1.5rem;background:#fcfcfd;color:#464e56;border:1px solid #E8E8EA;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f7;border-color:#9a8c98;color:#9a8c98}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.modal-form[_ngcontent-%COMP%]{max-width:680px}.modal-confirm[_ngcontent-%COMP%]{max-width:480px}.modal-header--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c77f7f,#b75c5c)}.modal-header--danger[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%], .modal-header--danger[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.company-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.form-group.full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#464e56}.form-label.required[_ngcontent-%COMP%]:after{content:" *";color:#c77f7f}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #E8E8EA;border-radius:8px;font-size:.875rem;color:#464e56;background:#fcfcfd;transition:all .15s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#9a8c98;box-shadow:0 0 0 3px #9a8c981a}.form-input[_ngcontent-%COMP%]::placeholder, .form-select[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#c4c4c6}.form-input[_ngcontent-%COMP%]:disabled, .form-select[_ngcontent-%COMP%]:disabled, .form-textarea[_ngcontent-%COMP%]:disabled{background:#f5f5f7;cursor:not-allowed}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.confirm-content[_ngcontent-%COMP%]{text-align:center;padding:1.5rem 0}.confirm-message[_ngcontent-%COMP%]{font-size:1.125rem;color:#464e56;margin:0 0 1rem}.confirm-message[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#c77f7f}.confirm-warning[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:.875rem;color:#e3c088;margin:0}.confirm-warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.btn-danger[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1.5rem;background:#c77f7f;color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease}.btn-danger[_ngcontent-%COMP%]:hover{background:#b75c5c}'],changeDetection:0})};export{he as GroupStructurePageComponent};
